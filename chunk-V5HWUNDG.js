import{a as w}from"./chunk-77KBZJDA.js";import{a as P,b as c,c as A,d as E,f as I,h as H,i as M,n as F,p as G}from"./chunk-2QYUIGVR.js";import"./chunk-U3ZKZ3ZP.js";import{$a as y,Fa as p,Z as l,a as x,aa as u,ab as O,b as h,ea as D,eb as S,ia as s,ma as m,oa as g,ta as i,ua as a,va as v,xa as _,ya as b}from"./chunk-EJPCYNLR.js";function k(e,r){e&1&&(i(0,"div"),p(1," Email is required "),a())}function T(e,r){e&1&&(i(0,"div"),p(1," Please enter a valid email address "),a())}function z(e,r){if(e&1&&(i(0,"div",13),s(1,k,2,0,"div",14)(2,T,2,0,"div",14),a()),e&2){let n,t,o=b();l(),m("ngIf",(n=o.contactForm.get("email"))==null||n.errors==null?null:n.errors.required),l(),m("ngIf",(t=o.contactForm.get("email"))==null||t.errors==null?null:t.errors.email)}}function B(e,r){e&1&&(i(0,"div"),p(1," Phone number is required "),a())}function W(e,r){e&1&&(i(0,"div"),p(1," Please enter a valid phone number "),a())}function q(e,r){if(e&1&&(i(0,"div",13),s(1,B,2,0,"div",14)(2,W,2,0,"div",14),a()),e&2){let n,t,o=b();l(),m("ngIf",(n=o.contactForm.get("phone"))==null||n.errors==null?null:n.errors.required),l(),m("ngIf",(t=o.contactForm.get("phone"))==null||t.errors==null?null:t.errors.pattern)}}var N=class e{constructor(r,n){this.fb=r;this.router=n;this.contactForm=this.fb.group({email:["",[c.required,c.email]],phone:["",[c.required,c.pattern(/^(\+27|0)[0-9]{9}$/)]]})}contactForm;personalData;stepTitles=["Edit Contact Info"];ngOnInit(){let r=sessionStorage.getItem("personalData");if(r)this.personalData=JSON.parse(r),this.contactForm.patchValue({email:this.personalData.email||"",phone:this.personalData.phone||""});else{this.router.navigate(["/authenticate"]);return}window.scrollTo(0,0)}getProgressStep(){return 1}onContactSubmit(){if(this.contactForm.valid){let r=h(x({},this.personalData),{email:this.contactForm.value.email,phone:this.contactForm.value.phone});sessionStorage.setItem("personalData",JSON.stringify(r));let n=sessionStorage.getItem("confirmedAppointment");if(n){let o=JSON.parse(n);o.personalData=r,sessionStorage.setItem("confirmedAppointment",JSON.stringify(o))}let t=sessionStorage.getItem(`appointment_${this.personalData.idNumber}`);if(t){let o=JSON.parse(t);o.personalData=r,sessionStorage.setItem(`appointment_${this.personalData.idNumber}`,JSON.stringify(o))}this.router.navigate(["/menu"])}}goBack(){this.router.navigate(["/menu"])}static \u0275fac=function(n){return new(n||e)(u(F),u(S))};static \u0275cmp=D({type:e,selectors:[["app-edit-contact-info"]],decls:22,vars:10,consts:[[3,"currentStep","steps"],[1,"step-section"],[1,"step-description"],["autocomplete","on",3,"ngSubmit","formGroup"],[1,"form-group","floating-label-group"],["type","email","id","email","formControlName","email","autocomplete","email",1,"floating-input"],["for","email",1,"floating-label"],["class","error-message",4,"ngIf"],["type","tel","id","phone","formControlName","phone","autocomplete","tel","placeholder","+27",1,"floating-input"],["for","phone",1,"floating-label"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"error-message"],[4,"ngIf"]],template:function(n,t){if(n&1&&(i(0,"app-form-page-layout",0)(1,"div",1)(2,"h2"),p(3,"Edit Contact Information"),a(),i(4,"p",2),p(5," Update your contact details for appointment notifications "),a(),i(6,"form",3),_("ngSubmit",function(){return t.onContactSubmit()}),i(7,"div",4),v(8,"input",5),i(9,"label",6),p(10,"Email Address *"),a(),s(11,z,3,2,"div",7),a(),i(12,"div",4),v(13,"input",8),i(14,"label",9),p(15,"Phone Number *"),a(),s(16,q,3,2,"div",7),a(),i(17,"div",10)(18,"button",11),_("click",function(){return t.goBack()}),p(19," Cancel "),a(),i(20,"button",12),p(21," Update Contact Info "),a()()()()()),n&2){let o,d,C,f;m("currentStep",t.getProgressStep())("steps",t.stepTitles),l(6),m("formGroup",t.contactForm),l(2),g("has-value",(o=t.contactForm.get("email"))==null?null:o.value),l(3),m("ngIf",((d=t.contactForm.get("email"))==null?null:d.invalid)&&((d=t.contactForm.get("email"))==null?null:d.touched)),l(2),g("has-value",(C=t.contactForm.get("phone"))==null?null:C.value),l(3),m("ngIf",((f=t.contactForm.get("phone"))==null?null:f.invalid)&&((f=t.contactForm.get("phone"))==null?null:f.touched)),l(4),m("disabled",t.contactForm.invalid)}},dependencies:[O,y,G,I,P,A,E,H,M,w],styles:["[_nghost-%COMP%]{--DHAGreen: #016635;--DHAHoverGreen: rgb(1, 73, 38);--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHABlack: #000000;--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHAErrorColor: #e74c3c;--DHAErrorColorLight: #fdf2f2;--DHAErrorColorBorder: #fecaca}.step-section[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding:20px}h2[_ngcontent-%COMP%]{color:var(--DHAGreen);font-size:2rem;margin-bottom:10px;text-align:center;font-weight:700}.step-description[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);text-align:center;margin-bottom:40px;font-size:1.1rem;line-height:1.5}.form-group[_ngcontent-%COMP%]{margin-bottom:30px;position:relative}.floating-label-group[_ngcontent-%COMP%]{position:relative}.floating-input[_ngcontent-%COMP%]{width:100%;padding:16px 20px;border:2px solid #e0e0e0;border-radius:12px;font-size:16px;background:var(--DHAWhite);transition:all .3s ease;box-sizing:border-box}.floating-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--DHAOrange);box-shadow:0 0 0 3px #f3801f1a}.floating-input.has-value[_ngcontent-%COMP%], .floating-input[_ngcontent-%COMP%]:focus{padding-top:24px;padding-bottom:8px}.floating-label[_ngcontent-%COMP%]{position:absolute;left:20px;top:16px;color:var(--DHATextGray);font-size:16px;transition:all .3s ease;pointer-events:none;background:var(--DHAWhite);padding:0 4px}.floating-input.has-value[_ngcontent-%COMP%] + .floating-label[_ngcontent-%COMP%], .floating-input[_ngcontent-%COMP%]:focus + .floating-label[_ngcontent-%COMP%]{top:-8px;font-size:12px;color:var(--DHAOrange);font-weight:500}.error-message[_ngcontent-%COMP%]{color:var(--DHAErrorColor);font-size:14px;margin-top:8px;padding:8px 12px;background:var(--DHAErrorColorLight);border:1px solid var(--DHAErrorColorBorder);border-radius:8px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-top:40px;flex-wrap:wrap}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:16px 32px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;border:none;min-width:140px}.btn-primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAHoverGreen);transform:translateY(-2px);box-shadow:0 8px 25px #0166354d}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--DHATextGray);cursor:not-allowed;transform:none;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:var(--DHAWhite);color:var(--DHAGreen);border:2px solid var(--DHAGreen)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHAGreen);color:var(--DHAWhite);transform:translateY(-2px);box-shadow:0 8px 25px #0166354d}@media (max-width: 768px){.step-section[_ngcontent-%COMP%]{padding:15px}h2[_ngcontent-%COMP%]{font-size:1.6rem}.step-description[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:30px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;max-width:300px}}"]})};export{N as EditContactInfoComponent};
