import{a as R}from"./chunk-KGLZB4HR.js";import{a as te}from"./chunk-CYUNRCNY.js";import{a as pe,b as S,c as me,d as Y,e as ue,f as Be,g as ge,h as Ge,i as K,j as Le,n as Ve,o as he,p as Ne,q as z}from"./chunk-5EPOGLLD.js";import{a as ze}from"./chunk-A346NTJD.js";import{$a as I,A as Fe,Ca as ie,Da as oe,Ea as re,Fa as s,G as V,Ga as v,H as m,Ha as y,I as u,Ia as B,J as N,Ja as ae,K as ne,Ka as se,La as le,Na as ce,O as k,Ra as Oe,Y as ee,Z as l,_a as T,a as $,aa as H,ab as A,b as Q,e as Ie,ea as P,eb as de,fa as He,h as Z,ia as h,ma as p,oa as _,p as we,pa as U,r as J,s as Se,ta as i,ua as r,v as Pe,va as C,wa as x,xa as g,y as X,ya as d,z as Ee}from"./chunk-ZAPQCUGD.js";var $e=/[&<>"']/g,wi=RegExp($e.source);function Ue(){return new Ae}var Ae=class{constructor(){this._selected=[]}get value(){return this._selected}select(t,e,n){if(t.selected=!0,(!t.children||!e&&n)&&this._selected.push(t),e)if(t.parent){let o=t.parent.children.length,c=t.parent.children.filter(f=>f.selected).length;t.parent.selected=o===c}else t.children&&(this._setChildrenSelectedState(t.children,!0),this._removeChildren(t),n&&this._activeChildren(t)?this._selected=[...this._selected.filter(o=>o.parent!==t),t]:this._selected=[...this._selected,...t.children.filter(o=>!o.disabled)])}unselect(t,e){if(this._selected=this._selected.filter(n=>n!==t),t.selected=!1,e)if(t.parent&&t.parent.selected){let n=t.parent.children;this._removeParent(t.parent),this._removeChildren(t.parent),this._selected.push(...n.filter(o=>o!==t&&!o.disabled)),t.parent.selected=!1}else t.children&&(this._setChildrenSelectedState(t.children,!1),this._removeChildren(t))}clear(t){this._selected=t?this._selected.filter(e=>e.disabled):[]}_setChildrenSelectedState(t,e){for(let n of t)n.disabled||(n.selected=e)}_removeChildren(t){this._selected=[...this._selected.filter(e=>e.parent!==t),...t.children.filter(e=>e.parent===t&&e.disabled&&e.selected)]}_removeParent(t){this._selected=this._selected.filter(e=>e!==t)}_activeChildren(t){return t.children.every(e=>!e.disabled||e.selected)}},Ye=new Fe("ng-select-selection-model");var Re=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=He({type:a})}static{this.\u0275inj=Ee({providers:Ke()})}}return a})();function Ke(){return[{provide:Ye,useValue:Ue}]}var Qe=["datePicker"];function Ze(a,t){if(a&1&&(i(0,"div",13),s(1),r()),a&2){let e=t.$implicit;l(),v(e)}}function Je(a,t){if(a&1){let e=x();i(0,"div",14),g("click",function(o){let c=m(e).$implicit,f=d();return u(f.selectDate(c,o))}),s(1),r()}if(a&2){let e=t.$implicit;_("other-month",e.isOtherMonth)("today",e.isToday)("selected",e.isSelected)("disabled",e.isDisabled),l(),y(" ",e.date," ")}}var fe=class a{selectedDate=null;minDate=null;maxDate=null;isOpen=!1;dateSelected=new k;pickerClosed=new k;datePickerRef;currentDate=new Date;dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];calendarDays=[];ngOnInit(){this.selectedDate&&(this.currentDate=new Date(this.selectedDate)),this.generateCalendarDays()}ngOnDestroy(){}generateCalendarDays(){this.calendarDays=[];let t=this.currentDate.getFullYear(),e=this.currentDate.getMonth(),n=new Date(t,e,1),c=new Date(t,e+1,0).getDate(),f=n.getDay(),w=new Date(t,e-1,0);for(let b=f-1;b>=0;b--){let O=w.getDate()-b;this.calendarDays.push({date:O,fullDate:new Date(t,e-1,O),isOtherMonth:!0,isToday:!1,isSelected:!1,isDisabled:this.isDateDisabled(new Date(t,e-1,O))})}for(let b=1;b<=c;b++){let O=new Date(t,e,b);this.calendarDays.push({date:b,fullDate:O,isOtherMonth:!1,isToday:this.isToday(O),isSelected:this.isSelected(O),isDisabled:this.isDateDisabled(O)})}let M=42-this.calendarDays.length;for(let b=1;b<=M;b++)this.calendarDays.push({date:b,fullDate:new Date(t,e+1,b),isOtherMonth:!0,isToday:!1,isSelected:!1,isDisabled:this.isDateDisabled(new Date(t,e+1,b))})}isToday(t){let e=new Date;return t.toDateString()===e.toDateString()}isSelected(t){return this.selectedDate?t.toDateString()===this.selectedDate.toDateString():!1}isDateDisabled(t){return!!(this.minDate&&t<this.minDate||this.maxDate&&t>this.maxDate)}selectDate(t,e){e&&e.stopPropagation(),!(t.isDisabled||t.isOtherMonth)&&(this.selectedDate=new Date(t.fullDate),this.generateCalendarDays(),this.dateSelected.emit(this.selectedDate),this.pickerClosed.emit())}previousMonth(t){t&&t.stopPropagation(),this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1),this.generateCalendarDays()}nextMonth(t){t&&t.stopPropagation(),this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,1),this.generateCalendarDays()}isPreviousMonthDisabled(){return!1}isNextMonthDisabled(){return!1}getCurrentMonthYear(){return this.currentDate.toLocaleDateString("en-US",{month:"long",year:"numeric"})}clearDate(t){t&&t.stopPropagation(),this.selectedDate=null,this.generateCalendarDays(),this.dateSelected.emit(null),this.pickerClosed.emit()}selectTomorrow(t){t&&t.stopPropagation();let e=new Date;e.setDate(e.getDate()+1),this.selectedDate=e,this.generateCalendarDays(),this.dateSelected.emit(e),this.pickerClosed.emit()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=P({type:a,selectors:[["app-custom-date-picker"]],viewQuery:function(e,n){if(e&1&&ie(Qe,5),e&2){let o;oe(o=re())&&(n.datePickerRef=o.first)}},inputs:{selectedDate:"selectedDate",minDate:"minDate",maxDate:"maxDate",isOpen:"isOpen"},outputs:{dateSelected:"dateSelected",pickerClosed:"pickerClosed"},decls:20,vars:5,consts:[[1,"custom-date-picker"],[1,"date-picker-header"],["type","button",1,"nav-button",3,"click"],[1,"arrow"],[1,"month-year"],[1,"date-picker-body"],[1,"day-names"],["class","day-name",4,"ngFor","ngForOf"],[1,"calendar-grid"],["class","calendar-day",3,"other-month","today","selected","disabled","click",4,"ngFor","ngForOf"],[1,"date-picker-footer"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary",3,"click"],[1,"day-name"],[1,"calendar-day",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(c){return n.previousMonth(c)}),i(3,"span",3),s(4,"\u2039"),r()(),i(5,"h3",4),s(6),r(),i(7,"button",2),g("click",function(c){return n.nextMonth(c)}),i(8,"span",3),s(9,"\u203A"),r()()(),i(10,"div",5)(11,"div",6),h(12,Ze,2,1,"div",7),r(),i(13,"div",8),h(14,Je,2,9,"div",9),r()(),i(15,"div",10)(16,"button",11),g("click",function(c){return n.clearDate(c)}),s(17," Clear "),r(),i(18,"button",12),g("click",function(c){return n.selectTomorrow(c)}),s(19," Tomorrow "),r()()()),e&2&&(_("open",n.isOpen),l(6),v(n.getCurrentMonthYear()),l(6),p("ngForOf",n.dayNames),l(2),p("ngForOf",n.calendarDays))},dependencies:[A,T],styles:[".custom-date-picker[_ngcontent-%COMP%]{position:absolute;right:0;background:var(--DHAWhite);border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 4px 12px #00000026;z-index:9999;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .2s ease;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90vw;max-width:320px;margin:0}.custom-date-picker.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(-50%,-50%)}.date-picker-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid #e0e0e0}.nav-button[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:4px;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;min-width:32px;min-height:32px}.nav-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f5f5f5}.nav-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.arrow[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--DHAGreen)}.month-year[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:var(--DHAGreen)}.date-picker-body[_ngcontent-%COMP%]{padding:16px}.day-names[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:8px}.day-name[_ngcontent-%COMP%]{text-align:center;font-size:12px;font-weight:600;color:#666;padding:8px 4px}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}.calendar-day[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:32px;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s ease;position:relative}.calendar-day[_ngcontent-%COMP%]:hover:not(.disabled){background-color:#f0f8f0}.calendar-day.other-month[_ngcontent-%COMP%]{color:#ccc}.calendar-day.today[_ngcontent-%COMP%]{background-color:#e8f5e8;color:var(--DHAGreen);font-weight:600}.calendar-day.selected[_ngcontent-%COMP%]{background-color:var(--DHAGreen);color:var(--DHAWhite);font-weight:600}.calendar-day.disabled[_ngcontent-%COMP%]{color:#ccc;cursor:not-allowed;background-color:#f9f9f9}.calendar-day.disabled[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.date-picker-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;padding:16px;border-top:1px solid #e0e0e0}.btn-secondary[_ngcontent-%COMP%]{background:none;border:1px solid #e0e0e0;color:#666;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#ccc}.btn-primary[_ngcontent-%COMP%]{background-color:var(--DHAGreen);border:1px solid var(--DHAGreen);color:var(--DHAWhite);padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2d5a2d;border-color:#2d5a2d}@media (max-width: 768px){.custom-date-picker[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90vw;max-width:320px;margin:0}.custom-date-picker.open[_ngcontent-%COMP%]{transform:translate(-50%,-50%)}.calendar-day[_ngcontent-%COMP%]{min-height:40px;font-size:16px}.day-name[_ngcontent-%COMP%]{padding:12px 4px;font-size:14px}}"]})};var Xe=["inputContainer"];function et(a,t){if(a&1){let e=x();i(0,"app-custom-date-picker",12),g("dateSelected",function(o){m(e);let c=d();return u(c.onDateSelected(o))})("pickerClosed",function(){m(e);let o=d();return u(o.onPickerClosed())}),r()}if(a&2){let e=d();p("selectedDate",e.selectedDate)("minDate",e.minDate)("maxDate",e.maxDate)("isOpen",e.showPicker)}}var ve=class a{label="";placeholder="";value=null;minDate=null;maxDate=null;disabled=!1;required=!1;error="";success=!1;valueChange=new k;focus=new k;blur=new k;inputContainerRef;selectedDate=null;showPicker=!1;isFocused=!1;ngOnInit(){this.selectedDate=this.value}ngOnChanges(t){t.value&&t.value.currentValue!==this.selectedDate&&(this.selectedDate=t.value.currentValue)}ngOnDestroy(){}get hasValue(){return this.selectedDate!==null}get displayValue(){return this.selectedDate?this.selectedDate.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):""}onFocus(){this.isFocused=!0,this.focus.emit()}onBlur(){setTimeout(()=>{this.showPicker||(this.isFocused=!1,this.blur.emit())},150)}onInputClick(){this.disabled||this.togglePicker()}togglePicker(){this.disabled||(this.showPicker=!this.showPicker,this.showPicker&&(this.isFocused=!0))}onDateSelected(t){this.selectedDate=t,this.valueChange.emit(t),this.showPicker=!1,this.isFocused=!1}onPickerClosed(){this.showPicker=!1,this.isFocused=!1}onDocumentClick(t){let e=t.target,n=this.inputContainerRef?.nativeElement;n&&!n.contains(e)&&(this.showPicker=!1,this.isFocused=!1)}onDocumentKeydown(t){t.key==="Escape"&&this.showPicker&&(this.showPicker=!1,this.isFocused=!1)}setValue(t){this.selectedDate=t,this.valueChange.emit(t)}clear(){this.setValue(null)}getValue(){return this.selectedDate}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=P({type:a,selectors:[["app-custom-date-input"]],viewQuery:function(e,n){if(e&1&&ie(Xe,5),e&2){let o;oe(o=re())&&(n.inputContainerRef=o.first)}},hostBindings:function(e,n){e&1&&g("click",function(c){return n.onDocumentClick(c)},!1,ee)("keydown",function(c){return n.onDocumentKeydown(c)},!1,ee)},inputs:{label:"label",placeholder:"placeholder",value:"value",minDate:"minDate",maxDate:"maxDate",disabled:"disabled",required:"required",error:"error",success:"success"},outputs:{valueChange:"valueChange",focus:"focus",blur:"blur"},features:[V],decls:13,vars:10,consts:[["inputContainer",""],[1,"floating-label-group"],[1,"floating-label"],[1,"input-container"],["type","text","readonly","",1,"floating-input",3,"focus","blur","click","value","placeholder","disabled"],["type","button",1,"date-picker-button",3,"click","disabled"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"calendar-icon"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[3,"selectedDate","minDate","maxDate","isOpen","dateSelected","pickerClosed",4,"ngIf"],[3,"dateSelected","pickerClosed","selectedDate","minDate","maxDate","isOpen"]],template:function(e,n){if(e&1){let o=x();i(0,"div",1)(1,"label",2),s(2),r(),i(3,"div",3,0)(5,"input",4),g("focus",function(){return m(o),u(n.onFocus())})("blur",function(){return m(o),u(n.onBlur())})("click",function(){return m(o),u(n.onInputClick())}),r(),i(6,"button",5),g("click",function(){return m(o),u(n.togglePicker())}),N(),i(7,"svg",6),C(8,"rect",7)(9,"line",8)(10,"line",9)(11,"line",10),r()()(),h(12,et,1,4,"app-custom-date-picker",11),r()}e&2&&(_("has-value",n.hasValue)("focused",n.isFocused),l(2),v(n.label),l(3),p("value",n.displayValue)("placeholder",n.placeholder)("disabled",n.disabled),l(),p("disabled",n.disabled),l(6),p("ngIf",n.showPicker))},dependencies:[A,I,fe],styles:["[_nghost-%COMP%]{--DHAGreen: #016635;--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHARed: #ea2127;--DHABrown: #9e5c26;--DHAApache: #ddc16a;--DHALaser: #caac6c;--DHAMaroon: #711d12;--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHABlack: #000000;--DHAOffBlack: rgb(51, 51, 51);--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHAErrorColor: #ea2127;--DHADisabledButtonGray: #e6e6e6;--DHAGrayLight: gainsboro;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHADisabledTextGray: #c4c4c4}.floating-label-group[_ngcontent-%COMP%]{position:relative;margin-top:10px}.floating-label[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);background-color:var(--DHAWhite);padding:0 4px;font-size:16px;color:var(--DHATextGray);font-weight:600;pointer-events:none;transition:all .3s ease;z-index:1}.floating-label-group.focused[_ngcontent-%COMP%]   .floating-label[_ngcontent-%COMP%], .floating-label-group.has-value[_ngcontent-%COMP%]   .floating-label[_ngcontent-%COMP%]{top:0;font-size:12px;color:var(--DHAGreen);transform:translateY(-50%)}.input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.floating-input[_ngcontent-%COMP%]{width:100%;padding:16px 12px;border:1px solid var(--DividerGray);border-radius:6px;font-size:16px;background-color:var(--DHAWhite);transition:all .3s ease;cursor:pointer}.floating-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--DHAGreen);box-shadow:0 0 0 3px #4caf501a}.floating-input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#999;cursor:not-allowed}.date-picker-button[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;padding:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background-color .2s ease}.date-picker-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f0f8f0}.date-picker-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.calendar-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:var(--DHAGreen)}.floating-input[_ngcontent-%COMP%]::placeholder{opacity:0;transition:opacity .3s ease}.floating-label-group.focused[_ngcontent-%COMP%]   .floating-input[_ngcontent-%COMP%]::placeholder, .floating-label-group.has-value[_ngcontent-%COMP%]   .floating-input[_ngcontent-%COMP%]::placeholder{opacity:.5}@media (max-width: 768px){.floating-input[_ngcontent-%COMP%]{font-size:16px;padding:16px 12px}.date-picker-button[_ngcontent-%COMP%]{padding:6px}.calendar-icon[_ngcontent-%COMP%]{width:22px;height:22px}}.floating-label-group.error[_ngcontent-%COMP%]   .floating-input[_ngcontent-%COMP%]{border-color:#e74c3c}.floating-label-group.error[_ngcontent-%COMP%]   .floating-label[_ngcontent-%COMP%]{color:#e74c3c}.floating-label-group.success[_ngcontent-%COMP%]   .floating-input[_ngcontent-%COMP%]{border-color:var(--DHAGreen)}.floating-label-group.success[_ngcontent-%COMP%]   .floating-label[_ngcontent-%COMP%]{color:var(--DHAGreen)}"]})};var Me=()=>({standalone:!0});function tt(a,t){if(a&1){let e=x();i(0,"button",17),g("click",function(o){m(e);let c=d();return u(c.clearSelection("province",o))}),s(1," \xD7 "),r()}}function nt(a,t){if(a&1){let e=x();i(0,"div",23)(1,"input",24,0),le("ngModelChange",function(o){m(e);let c=d(2);return se(c.provinceSearchTerm,o)||(c.provinceSearchTerm=o),u(o)}),g("input",function(){m(e);let o=d(2);return u(o.onSearch("province"))})("click",function(o){return m(e),u(o.stopPropagation())}),r()()}if(a&2){let e=d(2);l(),ae("ngModel",e.provinceSearchTerm),p("ngModelOptions",ce(2,Me))}}function it(a,t){if(a&1){let e=x();i(0,"div",25),g("click",function(o){let c=m(e).$implicit,f=d(2);return u(f.selectProvince(c,o))})("keydown.enter",function(o){let c=m(e).$implicit,f=d(2);return u(f.selectProvince(c,o))}),s(1),r()}if(a&2){let e=t.$implicit,n=d(2);_("selected",n.provinceControl.value===e.id),l(),y(" ",e.name," ")}}function ot(a,t){a&1&&(i(0,"div",26),s(1," No provinces found "),r())}function rt(a,t){if(a&1&&(i(0,"div",18),h(1,nt,3,3,"div",19),i(2,"div",20),h(3,it,2,3,"div",21)(4,ot,2,0,"div",22),r()()),a&2){let e=d();l(),p("ngIf",e.provinces.length>5),l(2),p("ngForOf",e.getFilteredProvinces()),l(),p("ngIf",e.getFilteredProvinces().length===0)}}function at(a,t){a&1&&(i(0,"div",27),C(1,"span",28),s(2," Province is required "),r())}function st(a,t){if(a&1){let e=x();i(0,"button",31),g("click",function(o){m(e);let c=d(2);return u(c.clearSelection("city",o))}),s(1," \xD7 "),r()}}function lt(a,t){if(a&1){let e=x();i(0,"div",23)(1,"input",32,1),le("ngModelChange",function(o){m(e);let c=d(3);return se(c.citySearchTerm,o)||(c.citySearchTerm=o),u(o)}),g("input",function(){m(e);let o=d(3);return u(o.onSearch("city"))})("click",function(o){return m(e),u(o.stopPropagation())}),r()()}if(a&2){let e=d(3);l(),ae("ngModel",e.citySearchTerm),p("ngModelOptions",ce(2,Me))}}function ct(a,t){if(a&1){let e=x();i(0,"div",25),g("click",function(o){let c=m(e).$implicit,f=d(3);return u(f.selectCity(c,o))})("keydown.enter",function(o){let c=m(e).$implicit,f=d(3);return u(f.selectCity(c,o))}),s(1),r()}if(a&2){let e=t.$implicit,n=d(3);_("selected",n.cityControl.value===e.id),l(),y(" ",e.name," ")}}function dt(a,t){a&1&&(i(0,"div",26),s(1," No cities found "),r())}function pt(a,t){if(a&1&&(i(0,"div",18),h(1,lt,3,3,"div",19),i(2,"div",20),h(3,ct,2,3,"div",21)(4,dt,2,0,"div",22),r()()),a&2){let e=d(2);l(),p("ngIf",e.getFilteredCities().length>5),l(2),p("ngForOf",e.getFilteredCities()),l(),p("ngIf",e.getFilteredCities().length===0)}}function mt(a,t){a&1&&(i(0,"div",27),C(1,"span",28),s(2," City is required "),r())}function ut(a,t){if(a&1){let e=x();i(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),g("click",function(o){m(e);let c=d();return u(c.toggleDropdown("city",o))})("focus",function(){m(e);let o=d();return u(o.cityFocused=!0)})("blur",function(){m(e);let o=d();return u(o.cityFocused=!1)})("keydown.enter",function(o){m(e);let c=d();return u(c.toggleDropdown("city",o))})("keydown.space",function(o){m(e);let c=d();return u(c.toggleDropdown("city",o))})("keydown.escape",function(){m(e);let o=d();return u(o.closeAllDropdowns())}),i(4,"span",8),s(5),r(),i(6,"span",9),N(),i(7,"svg",10),C(8,"path",11),r()(),h(9,st,2,0,"button",29),r(),h(10,pt,5,3,"div",13),r()(),ne(),i(11,"label",30),s(12,"Select city *"),r(),h(13,mt,3,0,"div",15),r()}if(a&2){let e=d();l(2),_("has-value",e.cityControl.value)("is-open",e.cityDropdownOpen)("is-focused",e.cityFocused)("is-invalid",e.cityControl.invalid&&e.cityControl.touched),l(3),y(" ",e.getSelectedCityName()||""," "),l(),_("rotate",e.cityDropdownOpen),l(3),p("ngIf",e.cityControl.value),l(),p("ngIf",e.cityDropdownOpen),l(3),p("ngIf",e.cityControl.invalid&&e.cityControl.touched)}}function gt(a,t){if(a&1){let e=x();i(0,"button",35),g("click",function(o){m(e);let c=d(2);return u(c.clearSelection("branch",o))}),s(1," \xD7 "),r()}}function ht(a,t){if(a&1){let e=x();i(0,"div",23)(1,"input",36,2),le("ngModelChange",function(o){m(e);let c=d(3);return se(c.branchSearchTerm,o)||(c.branchSearchTerm=o),u(o)}),g("input",function(){m(e);let o=d(3);return u(o.onSearch("branch"))})("click",function(o){return m(e),u(o.stopPropagation())}),r()()}if(a&2){let e=d(3);l(),ae("ngModel",e.branchSearchTerm),p("ngModelOptions",ce(2,Me))}}function ft(a,t){if(a&1){let e=x();i(0,"div",25),g("click",function(o){let c=m(e).$implicit,f=d(3);return u(f.selectBranch(c,o))})("keydown.enter",function(o){let c=m(e).$implicit,f=d(3);return u(f.selectBranch(c,o))}),s(1),r()}if(a&2){let e=t.$implicit,n=d(3);_("selected",n.branchControl.value===e.id),l(),y(" ",e.name," ")}}function vt(a,t){a&1&&(i(0,"div",26),s(1," No branches found "),r())}function _t(a,t){if(a&1&&(i(0,"div",18),h(1,ht,3,3,"div",19),i(2,"div",20),h(3,ft,2,3,"div",21)(4,vt,2,0,"div",22),r()()),a&2){let e=d(2);l(),p("ngIf",e.getFilteredBranches().length>5),l(2),p("ngForOf",e.getFilteredBranches()),l(),p("ngIf",e.getFilteredBranches().length===0)}}function bt(a,t){a&1&&(i(0,"div",27),C(1,"span",28),s(2," Branch is required "),r())}function xt(a,t){if(a&1){let e=x();i(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),g("click",function(o){m(e);let c=d();return u(c.toggleDropdown("branch",o))})("focus",function(){m(e);let o=d();return u(o.branchFocused=!0)})("blur",function(){m(e);let o=d();return u(o.branchFocused=!1)})("keydown.enter",function(o){m(e);let c=d();return u(c.toggleDropdown("branch",o))})("keydown.space",function(o){m(e);let c=d();return u(c.toggleDropdown("branch",o))})("keydown.escape",function(){m(e);let o=d();return u(o.closeAllDropdowns())}),i(4,"span",8),s(5),r(),i(6,"span",9),N(),i(7,"svg",10),C(8,"path",11),r()(),h(9,gt,2,0,"button",33),r(),h(10,_t,5,3,"div",13),r()(),ne(),i(11,"label",34),s(12,"Select branch *"),r(),h(13,bt,3,0,"div",15),r()}if(a&2){let e=d();l(2),_("has-value",e.branchControl.value)("is-open",e.branchDropdownOpen)("is-focused",e.branchFocused)("is-invalid",e.branchControl.invalid&&e.branchControl.touched),l(3),y(" ",e.getSelectedBranchName()||""," "),l(),_("rotate",e.branchDropdownOpen),l(3),p("ngIf",e.branchControl.value),l(),p("ngIf",e.branchDropdownOpen),l(3),p("ngIf",e.branchControl.invalid&&e.branchControl.touched)}}var _e=class a{constructor(t){this.cdr=t}form;provinces=[];cities=[];branches=[];provinceChange=new k;cityChange=new k;provinceControl;cityControl;branchControl;provinceDropdownOpen=!1;cityDropdownOpen=!1;branchDropdownOpen=!1;provinceFocused=!1;cityFocused=!1;branchFocused=!1;provinceSearchTerm="";citySearchTerm="";branchSearchTerm="";destroy$=new Ie;documentClickListener;ngOnInit(){this.initializeControls(),this.setupValueChangeListeners(),this.setupDocumentClickListener()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.removeDocumentClickListener()}initializeControls(){this.provinceControl=this.form.get("province"),this.cityControl=this.form.get("city"),this.branchControl=this.form.get("branch"),this.provinceControl||(this.provinceControl=new ue("",S.required),this.form.addControl("province",this.provinceControl)),this.cityControl||(this.cityControl=new ue("",S.required),this.form.addControl("city",this.cityControl)),this.branchControl||(this.branchControl=new ue("",S.required),this.form.addControl("branch",this.branchControl))}setupValueChangeListeners(){this.provinceControl.valueChanges.pipe(Pe(this.destroy$),Se(),we(50)).subscribe(t=>{t||this.resetCityAndBranch()}),this.cityControl.valueChanges.pipe(Pe(this.destroy$),Se(),we(50)).subscribe(t=>{t||this.resetBranch()})}setupDocumentClickListener(){setTimeout(()=>{this.documentClickListener=this.onDocumentClick.bind(this),document.addEventListener("click",this.documentClickListener)})}removeDocumentClickListener(){this.documentClickListener&&document.removeEventListener("click",this.documentClickListener)}onDocumentClick(t){t.target.closest(".custom-select-wrapper")||(this.closeAllDropdowns(),this.cdr.markForCheck())}toggleDropdown(t,e){switch(e.stopPropagation(),t){case"province":this.cityDropdownOpen=!1,this.branchDropdownOpen=!1,this.provinceDropdownOpen=!this.provinceDropdownOpen,this.provinceSearchTerm="";break;case"city":this.provinceDropdownOpen=!1,this.branchDropdownOpen=!1,this.cityDropdownOpen=!this.cityDropdownOpen,this.citySearchTerm="";break;case"branch":this.provinceDropdownOpen=!1,this.cityDropdownOpen=!1,this.branchDropdownOpen=!this.branchDropdownOpen,this.branchSearchTerm="";break}this.cdr.markForCheck()}closeAllDropdowns(){this.provinceDropdownOpen=!1,this.cityDropdownOpen=!1,this.branchDropdownOpen=!1,this.cdr.markForCheck()}selectProvince(t,e){e.stopPropagation(),this.provinceControl.setValue(t.id),this.provinceControl.markAsTouched(),this.provinceDropdownOpen=!1,this.resetCityAndBranch(),this.provinceChange.emit(t),this.cdr.markForCheck()}selectCity(t,e){e.stopPropagation(),this.cityControl.setValue(t.id),this.cityControl.markAsTouched(),this.cityDropdownOpen=!1,this.resetBranch(),this.cityChange.emit(t),this.cdr.markForCheck()}selectBranch(t,e){e.stopPropagation(),this.branchControl.setValue(t.id),this.branchControl.markAsTouched(),this.branchDropdownOpen=!1,this.cdr.markForCheck()}clearSelection(t,e){switch(e.stopPropagation(),t){case"province":this.provinceControl.setValue(""),this.resetCityAndBranch(),this.provinceChange.emit(null);break;case"city":this.cityControl.setValue(""),this.resetBranch(),this.cityChange.emit(null);break;case"branch":this.branchControl.setValue("");break}this.cdr.markForCheck()}resetCityAndBranch(){this.cityControl.setValue("",{emitEvent:!1}),this.branchControl.setValue("",{emitEvent:!1}),this.citySearchTerm="",this.branchSearchTerm=""}resetBranch(){this.branchControl.setValue("",{emitEvent:!1}),this.branchSearchTerm=""}onSearch(t){this.cdr.markForCheck()}getFilteredProvinces(){if(!this.provinceSearchTerm)return this.provinces;let t=this.provinceSearchTerm.toLowerCase();return this.provinces.filter(e=>e.name.toLowerCase().includes(t))}getFilteredCities(){let t=this.provinceControl.value,e=this.cities.filter(n=>n.provinceId===t);if(this.citySearchTerm){let n=this.citySearchTerm.toLowerCase();e=e.filter(o=>o.name.toLowerCase().includes(n))}return e}getFilteredBranches(){let t=this.cityControl.value,e=this.branches.filter(n=>n.cityId===t);if(this.branchSearchTerm){let n=this.branchSearchTerm.toLowerCase();e=e.filter(o=>o.name.toLowerCase().includes(n))}return e}getSelectedProvinceName(){let t=this.provinceControl.value;return this.provinces.find(e=>e.id===t)?.name||""}getSelectedCityName(){let t=this.cityControl.value;return this.cities.find(e=>e.id===t)?.name||""}getSelectedBranchName(){let t=this.branchControl.value;return this.branches.find(e=>e.id===t)?.name||""}static \u0275fac=function(e){return new(e||a)(H(Oe))};static \u0275cmp=P({type:a,selectors:[["app-location-selector"]],inputs:{form:"form",provinces:"provinces",cities:"cities",branches:"branches"},outputs:{provinceChange:"provinceChange",cityChange:"cityChange"},decls:17,vars:17,consts:[["provinceSearchInput",""],["citySearchInput",""],["branchSearchInput",""],[1,"location-grid",3,"formGroup"],[1,"form-group","floating-label-group"],[1,"custom-select-wrapper"],[1,"custom-select"],["tabindex","0",1,"select-trigger",3,"click","focus","blur","keydown.enter","keydown.space","keydown.escape"],[1,"selected-value"],[1,"select-arrow"],["width","12","height","8","viewBox","0 0 12 8","fill","none"],["d","M1 1L6 6L11 1","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","button","class","clear-button","aria-label","Clear province",3,"click",4,"ngIf"],["class","dropdown-panel",4,"ngIf"],["for","province",1,"floating-label"],["class","error-message",4,"ngIf"],["class","form-group floating-label-group",4,"ngIf"],["type","button","aria-label","Clear province",1,"clear-button",3,"click"],[1,"dropdown-panel"],["class","search-box",4,"ngIf"],[1,"options-list"],["class","option-item","tabindex","0",3,"selected","click","keydown.enter",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"search-box"],["type","text","placeholder","Search provinces...",3,"ngModelChange","input","click","ngModel","ngModelOptions"],["tabindex","0",1,"option-item",3,"click","keydown.enter"],[1,"no-results"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],["type","button","class","clear-button","aria-label","Clear city",3,"click",4,"ngIf"],["for","city",1,"floating-label"],["type","button","aria-label","Clear city",1,"clear-button",3,"click"],["type","text","placeholder","Search cities...",3,"ngModelChange","input","click","ngModel","ngModelOptions"],["type","button","class","clear-button","aria-label","Clear branch",3,"click",4,"ngIf"],["for","branch",1,"floating-label"],["type","button","aria-label","Clear branch",1,"clear-button",3,"click"],["type","text","placeholder","Search branches...",3,"ngModelChange","input","click","ngModel","ngModelOptions"]],template:function(e,n){e&1&&(i(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7),g("click",function(c){return n.toggleDropdown("province",c)})("focus",function(){return n.provinceFocused=!0})("blur",function(){return n.provinceFocused=!1})("keydown.enter",function(c){return n.toggleDropdown("province",c)})("keydown.space",function(c){return n.toggleDropdown("province",c)})("keydown.escape",function(){return n.closeAllDropdowns()}),i(5,"span",8),s(6),r(),i(7,"span",9),N(),i(8,"svg",10),C(9,"path",11),r()(),h(10,tt,2,0,"button",12),r(),h(11,rt,5,3,"div",13),r()(),ne(),i(12,"label",14),s(13,"Select province *"),r(),h(14,at,3,0,"div",15),r(),h(15,ut,14,14,"div",16)(16,xt,14,14,"div",16),r()),e&2&&(p("formGroup",n.form),l(3),_("has-value",n.provinceControl.value)("is-open",n.provinceDropdownOpen)("is-focused",n.provinceFocused)("is-invalid",n.provinceControl.invalid&&n.provinceControl.touched),l(3),y(" ",n.getSelectedProvinceName()||""," "),l(),_("rotate",n.provinceDropdownOpen),l(3),p("ngIf",n.provinceControl.value),l(),p("ngIf",n.provinceDropdownOpen),l(3),p("ngIf",n.provinceControl.invalid&&n.provinceControl.touched),l(),p("ngIf",n.provinceControl.value),l(),p("ngIf",n.cityControl.value))},dependencies:[A,T,I,z,pe,me,Y,K,Ne,Be],styles:["[_nghost-%COMP%]{--DHAGreen: #016635;--DHALightGreen: #018947;--DHALightGreenLight: #ddebe4;--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHAErrorColor: #ea2127;--DHADangerColor: #c41e3a;--DHADangerColorLight: #ebcad0;--DHADisabledButtonGray: #e6e6e6;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHAOffBlack: rgb(42, 41, 41);--DHADisabledTextGray: #c4c4c4;--DHAGrayLight: gainsboro}.location-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem;width:100%}@media (min-width: 768px){.location-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:0;width:100%;min-width:0}.floating-label-group[_ngcontent-%COMP%]{position:relative;width:100%}.custom-select-wrapper[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{position:relative;width:100%;max-width:100%}.select-trigger[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%;max-width:100%;min-height:44px;padding:10px 40px 10px 12px;border:1px solid var(--DividerGray);border-radius:6px;background-color:#fff;cursor:pointer;transition:all .2s ease;outline:none;box-sizing:border-box}.select-trigger[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.custom-select.is-open[_ngcontent-%COMP%]   .select-trigger[_ngcontent-%COMP%], .select-trigger[_ngcontent-%COMP%]:focus{border-color:var(--DHAGreen);box-shadow:0 0 0 3px #0166351a}.custom-select.is-invalid[_ngcontent-%COMP%]   .select-trigger[_ngcontent-%COMP%]{border-color:var(--DHAErrorColor)}.custom-select.has-value[_ngcontent-%COMP%]   .select-trigger[_ngcontent-%COMP%], .custom-select.is-open[_ngcontent-%COMP%]   .select-trigger[_ngcontent-%COMP%], .custom-select.is-focused[_ngcontent-%COMP%]   .select-trigger[_ngcontent-%COMP%]{padding-top:18px;padding-bottom:16px}.selected-value[_ngcontent-%COMP%]{flex:1;color:#111827;font-size:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0}.custom-select[_ngcontent-%COMP%]:not(.has-value):not(.is-open)   .selected-value[_ngcontent-%COMP%]{color:transparent}.select-arrow[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);display:flex;align-items:center;justify-content:center;color:#6b7280;transition:transform .2s ease;pointer-events:none;flex-shrink:0}.select-arrow.rotate[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}.clear-button[_ngcontent-%COMP%]{position:absolute;right:36px;top:50%;transform:translateY(-50%);width:18px;height:18px;border:none;background:#e5e7eb;border-radius:50%;color:#6b7280;font-size:16px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;z-index:2;flex-shrink:0}.clear-button[_ngcontent-%COMP%]:hover{background:#d1d5db;color:#374151}.dropdown-panel[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);left:0;right:0;max-height:280px;background:#fff;border:1px solid #e5e7eb;border-radius:6px;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;z-index:1000;display:flex;flex-direction:column;overflow:hidden;box-sizing:border-box}.search-box[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid #e5e7eb;background:#f9fafb;flex-shrink:0}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:4px;font-size:14px;outline:none;transition:border-color .2s ease;box-sizing:border-box}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#3b82f6}.options-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:230px;flex:1}.option-item[_ngcontent-%COMP%]{padding:10px 12px;cursor:pointer;transition:background-color .15s ease;color:#374151;font-size:14px}.option-item[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.option-item.selected[_ngcontent-%COMP%]{background-color:#eff6ff;color:#2563eb;font-weight:500}.option-item[_ngcontent-%COMP%]:focus{outline:none;background-color:#f3f4f6}.no-results[_ngcontent-%COMP%]{padding:16px;text-align:center;color:#9ca3af;font-size:14px}.floating-label[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--DHATextGray);font-size:16px;font-weight:600;transition:all .2s ease;pointer-events:none;background:#fff;padding:0 4px;line-height:1;z-index:1}.custom-select-wrapper[_ngcontent-%COMP%]:has(.custom-select.has-value) ~ .floating-label[_ngcontent-%COMP%], .custom-select-wrapper[_ngcontent-%COMP%]:has(.custom-select.is-open) ~ .floating-label[_ngcontent-%COMP%], .custom-select-wrapper[_ngcontent-%COMP%]:has(.custom-select.is-focused) ~ .floating-label[_ngcontent-%COMP%]{top:0;left:8px;font-size:12px;color:var(--DHAGreen);font-weight:600}.custom-select-wrapper[_ngcontent-%COMP%]:has(.custom-select.is-invalid) ~ .floating-label[_ngcontent-%COMP%]{color:#ef4444}.custom-select-wrapper[_ngcontent-%COMP%]:has(.custom-select.is-invalid.has-value) ~ .floating-label[_ngcontent-%COMP%], .custom-select-wrapper[_ngcontent-%COMP%]:has(.custom-select.is-invalid.is-open) ~ .floating-label[_ngcontent-%COMP%], .custom-select-wrapper[_ngcontent-%COMP%]:has(.custom-select.is-invalid.is-focused) ~ .floating-label[_ngcontent-%COMP%]{color:#ef4444}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:6px;color:#ef4444;font-size:12px}.error-message[_ngcontent-%COMP%]   .fa-exclamation-circle[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]{display:block;position:relative;width:100%;max-width:100%}.options-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.options-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f9fafb}.options-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.options-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}"],changeDetection:0})};function Ct(a,t){if(a&1&&(i(0,"div",40)(1,"span",41),s(2,"ID Number"),r(),i(3,"span",42),s(4),r()()),a&2){let e=d().$implicit;l(4),v(e.idNumber)}}function yt(a,t){if(a&1&&(i(0,"div",47),s(1),r()),a&2){let e=t.$implicit;l(),y(" ",e.name," ")}}function Dt(a,t){if(a&1&&(i(0,"div",43)(1,"div",44),s(2,"Selected Services:"),r(),i(3,"div",45),h(4,yt,2,1,"div",46),r()()),a&2){let e=d().$implicit;l(4),p("ngForOf",e.selectedServices)}}function kt(a,t){a&1&&(i(0,"div",48)(1,"span",49),s(2,"No services selected"),r()())}function wt(a,t){a&1&&C(0,"hr")}function St(a,t){if(a&1&&(i(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"span",34),s(5),r(),i(6,"h4",35),s(7),r()(),h(8,Ct,5,1,"div",36),r(),h(9,Dt,5,1,"div",37)(10,kt,3,0,"div",38),r(),h(11,wt,1,0,"hr",39),r()),a&2){let e=t.$implicit,n=t.index,o=d(3);l(5),v(e.type),l(2),v(e.name),l(),p("ngIf",e.idNumber),l(),p("ngIf",e.selectedServices&&e.selectedServices.length>0),l(),p("ngIf",!e.selectedServices||e.selectedServices.length===0),l(),p("ngIf",n<o.bookingPersons.length-1)}}function Pt(a,t){if(a&1&&(i(0,"div",28),h(1,St,12,6,"div",29),r()),a&2){let e=d(2);l(),p("ngForOf",e.bookingPersons)}}function Ot(a,t){if(a&1&&(i(0,"div",47),s(1),r()),a&2){let e=t.$implicit;l(),y(" ",e.name," ")}}function At(a,t){if(a&1&&(i(0,"div",50)(1,"div",44),s(2,"Selected Services:"),r(),i(3,"div",51),h(4,Ot,2,1,"div",46),r()()),a&2){let e=d(2);l(4),p("ngForOf",e.selectedServices)}}function Mt(a,t){if(a&1){let e=x();i(0,"div",25)(1,"div",11),g("click",function(){m(e);let o=d();return u(o.toggleSection("selectedServices"))}),i(2,"h3"),s(3,"Applicant Details"),r(),i(4,"span",12),s(5,"\u25BC"),r()(),i(6,"div",13),h(7,Pt,2,1,"div",26)(8,At,5,1,"div",27),r()()}if(a&2){let e=d();l(4),_("expanded",e.selectedServicesExpanded),l(2),_("expanded",e.selectedServicesExpanded),l(),p("ngIf",e.bookingPersons&&e.bookingPersons.length>0),l(),p("ngIf",(!e.bookingPersons||e.bookingPersons.length===0)&&e.selectedServices&&e.selectedServices.length>0)}}var be=class a{constructor(t){this.fb=t;this.appointmentForm=this.fb.group({province:["",S.required],city:["",S.required],branch:["",S.required],startDate:["",S.required],endDate:["",S.required]}),this.today=new Date().toISOString().split("T")[0];let e=new Date;e.setDate(e.getDate()+30),this.maxDate=e.toISOString().split("T")[0]}selectedServices=[];stepTitles=[];bookingPersons=[];searchCriteria=null;formSubmitted=new k;goBackRequested=new k;appointmentForm;today;maxDate;selectedServicesExpanded=!0;locationExpanded=!1;dateRangeExpanded=!1;provinces=[{id:"gauteng",name:"Gauteng"},{id:"western-cape",name:"Western Cape"},{id:"kwazulu-natal",name:"KwaZulu-Natal"},{id:"eastern-cape",name:"Eastern Cape"},{id:"free-state",name:"Free State"},{id:"mpumalanga",name:"Mpumalanga"},{id:"limpopo",name:"Limpopo"},{id:"north-west",name:"North West"},{id:"northern-cape",name:"Northern Cape"}];cities=[{id:"johannesburg",name:"Johannesburg",provinceId:"gauteng"},{id:"pretoria-menlyn",name:"Pretoria Menlyn",provinceId:"gauteng"},{id:"pretoria",name:"Pretoria",provinceId:"gauteng"},{id:"soweto",name:"Soweto",provinceId:"gauteng"},{id:"springs",name:"Springs",provinceId:"gauteng"},{id:"vereeniging",name:"Vereeniging",provinceId:"gauteng"},{id:"alberton",name:"Alberton",provinceId:"gauteng"},{id:"benoni",name:"Benoni",provinceId:"gauteng"},{id:"brakpan",name:"Brakpan",provinceId:"gauteng"},{id:"boksburg",name:"Boksburg",provinceId:"gauteng"},{id:"carletonville",name:"Carletonville",provinceId:"gauteng"},{id:"edenvale",name:"Edenvale",provinceId:"gauteng"},{id:"ga-rankawa",name:"Ga-Rankuwa",provinceId:"gauteng"},{id:"heidelberg",name:"Heidelberg",provinceId:"gauteng"},{id:"kempton-park",name:"Kempton Park",provinceId:"gauteng"},{id:"mogale-city",name:"Mogale City",provinceId:"gauteng"},{id:"hammanskraal-temba",name:"Hammanskraal Temba",provinceId:"gauteng"},{id:"nigel",name:"Nigel",provinceId:"gauteng"},{id:"medium-office-randburg",name:"Medium Office Randburg",provinceId:"gauteng"},{id:"pretoria-north",name:"Pretoria North",provinceId:"gauteng"},{id:"johannesburg-metro-municipality",name:"Johannesburg Metro Municipality",provinceId:"gauteng"},{id:"vanderbijlpark",name:"Vanderbijlpark",provinceId:"gauteng"},{id:"tshwane",name:"Tshwane",provinceId:"gauteng"},{id:"randfontein",name:"Randfontein",provinceId:"gauteng"},{id:"centurion",name:"Centurion",provinceId:"gauteng"},{id:"mamelodi-east",name:"Mamelodi East",provinceId:"gauteng"},{id:"evaton",name:"Evaton",provinceId:"gauteng"},{id:"bronkhorstspruit",name:"Bronkhorstspruit",provinceId:"gauteng"},{id:"epping-goodwood",name:"Epping Goodwood",provinceId:"western-cape"},{id:"bellville",name:"Bellville",provinceId:"western-cape"},{id:"vredendal",name:"Vredendal",provinceId:"western-cape"},{id:"grabouw",name:"Grabouw",provinceId:"western-cape"},{id:"george",name:"George",provinceId:"western-cape"},{id:"cape-town",name:"Cape Town",provinceId:"western-cape"},{id:"paarl",name:"Paarl",provinceId:"western-cape"},{id:"beaufort-west",name:"Beaufort West",provinceId:"western-cape"},{id:"caledon",name:"Caledon",provinceId:"western-cape"},{id:"mitchells-plain",name:"Mitchells Plain",provinceId:"western-cape"},{id:"malmesbury",name:"Malmesbury",provinceId:"western-cape"},{id:"oudtshoorn",name:"Oudtshoorn",provinceId:"western-cape"},{id:"worcester",name:"Worcester",provinceId:"western-cape"},{id:"stellenbosch",name:"Stellenbosch",provinceId:"western-cape"},{id:"kwanonqaba",name:"Kwanonqaba",provinceId:"western-cape"},{id:"prince-albert",name:"Prince Albert",provinceId:"western-cape"},{id:"bredasdorp",name:"Bredasdorp",provinceId:"western-cape"},{id:"robertson",name:"Robertson",provinceId:"western-cape"},{id:"ceres",name:"Ceres",provinceId:"western-cape"},{id:"plettenburg-bay",name:"Plettenburg Bay",provinceId:"western-cape"},{id:"durban",name:"Durban",provinceId:"kwazulu-natal"},{id:"umhlanga",name:"Umhlanga",provinceId:"kwazulu-natal"},{id:"port-elizabeth",name:"Port Elizabeth",provinceId:"eastern-cape"},{id:"east-london",name:"East London",provinceId:"eastern-cape"},{id:"bloemfontein",name:"Bloemfontein",provinceId:"free-state"},{id:"nelspruit",name:"Nelspruit",provinceId:"mpumalanga"},{id:"polokwane",name:"Polokwane",provinceId:"limpopo"},{id:"mahikeng",name:"Mahikeng",provinceId:"north-west"},{id:"kimberley",name:"Kimberley",provinceId:"northern-cape"}];branches=[{id:"cresta",name:"Cresta",cityId:"johannesburg"},{id:"johannesburg",name:"Johannesburg",cityId:"johannesburg"},{id:"roodepoort",name:"Roodepoort",cityId:"johannesburg"},{id:"pretoria-menlyn",name:"Pretoria Menlyn",cityId:"pretoria-menlyn"},{id:"pretoria",name:"Pretoria",cityId:"pretoria"},{id:"soweto",name:"Soweto",cityId:"soweto"},{id:"springs",name:"Springs",cityId:"springs"},{id:"vereeniging",name:"Vereeniging",cityId:"vereeniging"},{id:"alberton",name:"Alberton",cityId:"alberton"},{id:"benoni",name:"Benoni",cityId:"benoni"},{id:"brakpan",name:"Brakpan",cityId:"brakpan"},{id:"boksburg",name:"Boksburg",cityId:"boksburg"},{id:"carletonville",name:"Carletonville",cityId:"carletonville"},{id:"edenvale",name:"Edenvale",cityId:"edenvale"},{id:"ga-rankawa",name:"Ga-Rankuwa",cityId:"ga-rankawa"},{id:"heidelberg",name:"Heidelberg",cityId:"heidelberg"},{id:"kempton-park",name:"Kempton Park",cityId:"kempton-park"},{id:"mogale-city",name:"Mogale City",cityId:"mogale-city"},{id:"hammanskraal-temba",name:"Hammanskraal Temba",cityId:"hammanskraal-temba"},{id:"nigel",name:"Nigel",cityId:"nigel"},{id:"medium-office-randburg",name:"Medium Office Randburg",cityId:"medium-office-randburg"},{id:"pretoria-north",name:"Pretoria North",cityId:"pretoria-north"},{id:"johannesburg-metro-municipality",name:"Johannesburg Metro Municipality",cityId:"johannesburg-metro-municipality"},{id:"vanderbijlpark",name:"Vanderbijlpark",cityId:"vanderbijlpark"},{id:"tshwane",name:"Tshwane",cityId:"tshwane"},{id:"randfontein",name:"Randfontein",cityId:"randfontein"},{id:"centurion",name:"Centurion",cityId:"centurion"},{id:"mamelodi-east",name:"Mamelodi East",cityId:"mamelodi-east"},{id:"evaton",name:"Evaton",cityId:"evaton"},{id:"bronkhorstspruit",name:"Bronkhorstspruit",cityId:"bronkhorstspruit"},{id:"cape-town",name:"Cape Town",cityId:"cape-town"},{id:"khayelitsha",name:"Khayelitsha",cityId:"cape-town"},{id:"nyanga",name:"Nyanga",cityId:"cape-town"},{id:"wynberg",name:"Wynberg",cityId:"cape-town"},{id:"somerset-west",name:"Somerset West",cityId:"cape-town"},{id:"vredenburg",name:"Vredenburg",cityId:"cape-town"},{id:"bellville",name:"Bellville",cityId:"bellville"},{id:"tygervalley",name:"Tygervalley",cityId:"bellville"},{id:"epping-goodwood",name:"Epping Goodwood",cityId:"epping-goodwood"},{id:"vredendal",name:"Vredendal",cityId:"vredendal"},{id:"grabouw",name:"Grabouw",cityId:"grabouw"},{id:"george",name:"George",cityId:"george"},{id:"paarl",name:"Paarl",cityId:"paarl"},{id:"beaufort-west",name:"Beaufort West",cityId:"beaufort-west"},{id:"caledon",name:"Caledon",cityId:"caledon"},{id:"mitchells-plain",name:"Mitchells Plain",cityId:"mitchells-plain"},{id:"malmesbury",name:"Malmesbury",cityId:"malmesbury"},{id:"oudtshoorn",name:"Oudtshoorn",cityId:"oudtshoorn"},{id:"worcester",name:"Worcester",cityId:"worcester"},{id:"stellenbosch",name:"Stellenbosch",cityId:"stellenbosch"},{id:"kwanonqaba",name:"Kwanonqaba",cityId:"kwanonqaba"},{id:"prince-albert",name:"Prince Albert",cityId:"prince-albert"},{id:"bredasdorp",name:"Bredasdorp",cityId:"bredasdorp"},{id:"robertson",name:"Robertson",cityId:"robertson"},{id:"ceres",name:"Ceres",cityId:"ceres"},{id:"plettenburg-bay",name:"Plettenburg Bay",cityId:"plettenburg-bay"},{id:"durban",name:"Durban",cityId:"durban"},{id:"umhlanga",name:"Umhlanga",cityId:"umhlanga"},{id:"port-elizabeth",name:"Port Elizabeth",cityId:"port-elizabeth"},{id:"east-london",name:"East London",cityId:"east-london"},{id:"bloemfontein",name:"Bloemfontein",cityId:"bloemfontein"},{id:"nelspruit",name:"Nelspruit",cityId:"nelspruit"},{id:"polokwane",name:"Polokwane",cityId:"polokwane"},{id:"mahikeng",name:"Mahikeng",cityId:"mahikeng"},{id:"kimberley",name:"Kimberley",cityId:"kimberley"}];ngOnInit(){window.scrollTo(0,0);let t=new Date;t.setDate(t.getDate()+30),this.appointmentForm.patchValue({endDate:t.toISOString().split("T")[0]}),this.prefillFormFromSearchCriteria()}ngOnChanges(t){t.searchCriteria&&!t.searchCriteria.firstChange&&this.prefillFormFromSearchCriteria()}prefillFormFromSearchCriteria(){if(this.searchCriteria){let t=new Date;t.setDate(t.getDate()+30),this.appointmentForm.patchValue({province:this.searchCriteria.branch?this.getProvinceFromBranch(this.searchCriteria.branch):"",city:this.searchCriteria.branch?this.getCityFromBranch(this.searchCriteria.branch):"",branch:this.searchCriteria.branch||"",startDate:this.searchCriteria.startDate||"",endDate:this.searchCriteria.endDate||t.toISOString().split("T")[0]}),this.searchCriteria.branch&&(this.locationExpanded=!0)}}get filteredCities(){let t=this.appointmentForm.get("province")?.value;return this.cities.filter(e=>e.provinceId===t)}get filteredBranches(){let t=this.appointmentForm.get("city")?.value;return this.branches.filter(e=>e.cityId===t)}getProvinceFromBranch(t){let e=this.branches.find(n=>n.id===t);if(e){let n=this.cities.find(o=>o.id===e.cityId);return n?n.provinceId:""}return""}getCityFromBranch(t){let e=this.branches.find(n=>n.id===t);return e?e.cityId:""}onProvinceChange(){this.appointmentForm.patchValue({city:"",branch:""}),this.appointmentForm.get("province")?.value&&(this.locationExpanded=!0)}onCityChange(){this.appointmentForm.patchValue({branch:""}),this.appointmentForm.get("city")?.value&&(this.locationExpanded=!0)}isFormValid(){return this.appointmentForm.valid&&this.selectedServices.length>0}onSubmit(){if(this.isFormValid()){let t=Q($({},this.appointmentForm.value),{selectedServices:this.selectedServices.map(e=>e.name)});this.formSubmitted.emit(t)}}goBack(){this.goBackRequested.emit()}toggleSection(t){switch(t){case"selectedServices":this.selectedServicesExpanded=!this.selectedServicesExpanded,this.locationExpanded=!1,this.dateRangeExpanded=!1;break;case"location":this.selectedServicesExpanded=!1,this.locationExpanded=!this.locationExpanded,this.dateRangeExpanded=!1;break;case"dateRange":this.selectedServicesExpanded=!1,this.locationExpanded=!1,this.dateRangeExpanded=!this.dateRangeExpanded;break}}expandAllSections(){this.selectedServicesExpanded=!0,this.locationExpanded=!0,this.dateRangeExpanded=!0}collapseAllSections(){this.selectedServicesExpanded=!1,this.locationExpanded=!1,this.dateRangeExpanded=!1}onDocumentClick(t){let e=t.target;if(!e||e.closest(".section-header")||e.closest("ng-select")||e.closest(".ng-select")||e.closest(".ng-dropdown-panel")||e.closest(".ng-option")||e.closest(".ng-clear-wrapper")||e.closest(".ng-input")||e.closest(".ng-value")||e.closest(".ng-value-container")||e.closest(".ng-arrow-wrapper")||e.closest("input, select, textarea, button"))return;e.closest("[data-section]")||(this.selectedServicesExpanded=!1,this.locationExpanded=!1,this.dateRangeExpanded=!1)}getStartDateValue(){let t=this.appointmentForm.get("startDate")?.value;return t?new Date(t):null}getEndDateValue(){let t=this.appointmentForm.get("endDate")?.value;return t?new Date(t):null}getMinDate(){return new Date}getMaxDate(){let t=new Date;return t.setDate(t.getDate()+30),t}getEndDateMinDate(){let t=this.appointmentForm.get("startDate")?.value;return t?new Date(t):new Date}getStartDateError(){let t=this.appointmentForm.get("startDate");return t?.invalid&&t?.touched?"Start date is required":""}getEndDateError(){let t=this.appointmentForm.get("endDate");return t?.invalid&&t?.touched?"End date is required":""}onStartDateChange(t){let e=t?this.formatDateForForm(t):"";this.appointmentForm.patchValue({startDate:e});let n=this.appointmentForm.get("endDate")?.value;n&&t&&new Date(n)<t&&this.appointmentForm.patchValue({endDate:e})}onEndDateChange(t){let e=t?this.formatDateForForm(t):"";this.appointmentForm.patchValue({endDate:e})}formatDateForForm(t){let e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${o}`}static \u0275fac=function(e){return new(e||a)(H(he))};static \u0275cmp=P({type:a,selectors:[["app-appointment-form"]],hostBindings:function(e,n){e&1&&g("click",function(c){return n.onDocumentClick(c)},!1,ee)},inputs:{selectedServices:"selectedServices",stepTitles:"stepTitles",bookingPersons:"bookingPersons",searchCriteria:"searchCriteria"},outputs:{formSubmitted:"formSubmitted",goBackRequested:"goBackRequested"},features:[V],decls:49,vars:27,consts:[[3,"currentStep","steps"],[1,"step-description"],["autocomplete","off",3,"ngSubmit","formGroup"],[1,"section-controls"],["type","button","title","Expand all sections",1,"btn-control",3,"click"],[1,"stacked-icons"],[1,"fa","fa-chevron-up"],[1,"fa","fa-chevron-down"],["type","button","title","Collapse all sections",1,"btn-control",3,"click"],["class","form-section collapsible","data-section","selectedServices",4,"ngIf"],["data-section","location",1,"form-section","collapsible"],["tabindex","0",1,"section-header",3,"click"],[1,"expand-icon"],[1,"section-content"],[1,"section-description"],[3,"provinceChange","cityChange","form","provinces","cities","branches"],[1,"location-grid"],["data-section","dateRange",1,"form-section","collapsible"],[1,"date-grid"],["label","Select from date *","placeholder","MM/DD/YYYY",3,"valueChange","value","minDate","maxDate","required","error"],["label","Select to date *","placeholder","MM/DD/YYYY",3,"valueChange","value","minDate","maxDate","required","error"],[1,"field-info"],[1,"button-group"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],["data-section","selectedServices",1,"form-section","collapsible"],["class","applicants-overview",4,"ngIf"],["class","legacy-services",4,"ngIf"],[1,"applicants-overview"],["class","card-separator",4,"ngFor","ngForOf"],[1,"card-separator"],[1,"applicant-card"],[1,"applicant-header","capitalised"],[1,"applicant-info"],[1,"applicant-type"],[1,"applicant-name"],["class","applicant-identifier",4,"ngIf"],["class","applicant-services",4,"ngIf"],["class","no-services",4,"ngIf"],[4,"ngIf"],[1,"applicant-identifier"],[1,"identifier-label"],[1,"identifier-value"],[1,"applicant-services"],[1,"services-label"],[1,"services-list"],["class","service-badge",4,"ngFor","ngForOf"],[1,"service-badge"],[1,"no-services"],[1,"no-services-text"],[1,"legacy-services"],[1,"selected-services-display"]],template:function(e,n){e&1&&(i(0,"app-form-page-layout",0)(1,"h2"),s(2,"Book A New Appointment"),r(),i(3,"h6",1),s(4," Select the branch location and time period for your appointment. "),r(),i(5,"form",2),g("ngSubmit",function(){return n.onSubmit()}),i(6,"div",3)(7,"button",4),g("click",function(){return n.expandAllSections()}),i(8,"span",5),C(9,"i",6)(10,"i",7),r(),s(11," Expand All "),r(),i(12,"button",8),g("click",function(){return n.collapseAllSections()}),i(13,"span",5),C(14,"i",7)(15,"i",6),r(),s(16," Collapse All "),r()(),h(17,Mt,9,6,"div",9),i(18,"div",10)(19,"div",11),g("click",function(){return n.toggleSection("location")}),i(20,"h3"),s(21,"Branch Selection"),r(),i(22,"span",12),s(23,"\u25BC"),r()(),i(24,"div",13)(25,"p",14),s(26,"Choose your preferred branch"),r(),i(27,"app-location-selector",15),g("provinceChange",function(){return n.onProvinceChange()})("cityChange",function(){return n.onCityChange()}),r(),C(28,"div",16),r()(),i(29,"div",17)(30,"div",11),g("click",function(){return n.toggleSection("dateRange")}),i(31,"h3"),s(32,"Select Booking Date Range"),r(),i(33,"span",12),s(34,"\u25BC"),r()(),i(35,"div",13)(36,"p",14),s(37," Choose when you'd like to book your appointment "),r(),i(38,"div",18)(39,"app-custom-date-input",19),g("valueChange",function(c){return n.onStartDateChange(c)}),r(),i(40,"app-custom-date-input",20),g("valueChange",function(c){return n.onEndDateChange(c)}),r(),i(41,"div",21)(42,"small"),s(43,"End date must be within 30 days from today"),r()()()()(),i(44,"div",22)(45,"button",23),g("click",function(){return n.goBack()}),s(46," Back "),r(),i(47,"button",24),s(48," Search "),r()()()()),e&2&&(p("currentStep",1)("steps",n.stepTitles),l(5),p("formGroup",n.appointmentForm),l(12),p("ngIf",n.selectedServices&&n.selectedServices.length>0),l(5),_("expanded",n.locationExpanded),l(2),_("expanded",n.locationExpanded),l(3),p("form",n.appointmentForm)("provinces",n.provinces)("cities",n.cities)("branches",n.branches),l(6),_("expanded",n.dateRangeExpanded),l(2),_("expanded",n.dateRangeExpanded),l(4),p("value",n.getStartDateValue())("minDate",n.getMinDate())("maxDate",n.getMaxDate())("required",!0)("error",n.getStartDateError()),l(),p("value",n.getEndDateValue())("minDate",n.getEndDateMinDate())("maxDate",n.getMaxDate())("required",!0)("error",n.getEndDateError()),l(7),p("disabled",!n.isFormValid()))},dependencies:[A,T,I,z,ge,Y,K,Re,R,ve,_e],styles:[`[_nghost-%COMP%]{--DHAGreen: #016635;--DHALightGreen: #018947;--DHALightGreenLight: #ddebe4;--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHAErrorColor: #ea2127;--DHADangerColor: #c41e3a;--DHADangerColorLight: #ebcad0;--DHADisabledButtonGray: #e6e6e6;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHAOffBlack: rgb(42, 41, 41);--DHADisabledTextGray: #c4c4c4;--DHAGrayLight: gainsboro}h2[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:30px;font-size:24px;font-weight:700;text-align:center}.step-description[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:16px;margin:0 0 30px;line-height:1.5;font-weight:400}.step-title[_ngcontent-%COMP%]{text-align:center;color:var(--DHAGreen);margin-bottom:30px;font-size:2rem;font-weight:600;margin-top:0}.form-section[_ngcontent-%COMP%]{margin-bottom:10px;background:var(--DHAOffWhite);border:1px solid var(--DHATextGray);border-radius:8px}.form-section.collapsible[_ngcontent-%COMP%]{padding:0}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;cursor:pointer;background:var(--DHAWhite);color:var(--DHAGreen);border-radius:8px;transition:background-color .3s ease}.section-header[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:var(--DHAGreen)}.section-header[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]{color:var(--DHAGreen)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHAOffBlack);margin:0;font-size:1.1rem;font-weight:600;transition:color .3s ease}.expand-icon[_ngcontent-%COMP%]{font-size:1.2rem;transition:transform .3s ease,color .3s ease;color:var(--DHAOffBlack)}.section-header[_ngcontent-%COMP%]:hover   .expand-icon[_ngcontent-%COMP%]{color:var(--DHAGreen)}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.section-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease,padding .3s ease;padding:0 25px}.section-content.expanded[_ngcontent-%COMP%]{max-height:1000px;padding:10px;overflow:visible;border-radius:8px}.form-section[_ngcontent-%COMP%]:not(.collapsible){padding:25px}.form-section[_ngcontent-%COMP%]:not(.collapsible)   h3[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:10px;font-size:1.3rem;font-weight:600}.section-description[_ngcontent-%COMP%]{color:var(--DHATextGray);margin-bottom:20px;font-size:1rem;margin-top:0}.section-controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-direction:row-reverse;gap:10px;margin-bottom:20px}.stacked-icons[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:var(--DHAGreen);font-size:8px}.btn-control[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid var(--DHAGreen);border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;background:var(--DHAWhite);color:var(--DHAGreen);display:flex;align-items:center;gap:8px}.btn-control[_ngcontent-%COMP%]:hover{background:var(--DHALightGreenLight);border-color:var(--DHALightGreenLight);transform:translateY(-1px)}.btn-control.expand-all[_ngcontent-%COMP%]{background:var(--DHAGreen)}.btn-control.collapse-all[_ngcontent-%COMP%]{background:var(--DHATextGrayDark)}.btn-control.collapse-all[_ngcontent-%COMP%]:hover{background:var(--DHAOffBlack)}.applicants-overview[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.applicant-card[_ngcontent-%COMP%]{border:2px solid transparent;border-radius:12px;transition:all .3s ease}.applicant-card[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px}.applicant-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid var(--DHABackGroundLightGray);row-gap:8px}.applicant-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.applicant-name[_ngcontent-%COMP%]{color:var(--DHAGreen);font-size:1.1rem;font-weight:600;margin:0}.applicant-type[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:10px;font-weight:400;background:var(--DHABackGroundLightGray);padding:4px 8px;border-radius:12px;display:inline-block;width:fit-content}.applicant-identifier[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:2px}.identifier-label[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:.8rem;font-weight:500;align-self:baseline}.identifier-value[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:.9rem;font-weight:600;font-family:monospace;background:var(--DHAOffWhite);padding:4px 8px;border-radius:6px;border:1px solid var(--DHABackGroundLightGray)}.applicant-services[_ngcontent-%COMP%]{margin-top:15px}.services-label[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:.9rem;font-weight:600;margin-bottom:10px}.services-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.no-services[_ngcontent-%COMP%]{margin-top:15px;text-align:center;padding:20px;background:var(--DHABackGroundLightGray);border-radius:8px;border:2px dashed var(--DHATextGray)}.no-services-text[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:.9rem;font-style:italic}.legacy-services[_ngcontent-%COMP%]{margin-bottom:20px}.selected-services-display[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.service-badge[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);padding:4px 8px;border-radius:12px;display:flex;align-items:center;gap:4px;font-size:10px;width:fit-content}.services-list[_ngcontent-%COMP%]{display:flex;gap:15px}.service-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:15px;padding:15px;background:var(--DHAWhite);border-radius:8px;border:2px solid transparent;transition:all .3s ease}.service-item[_ngcontent-%COMP%]:hover{border-color:var(--DHAOrange);transform:translateY(-2px);box-shadow:0 5px 15px #f3801f1a}.service-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;margin-top:2px}.service-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.checkmark[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid var(--DHAGreen);border-radius:4px;position:relative;transition:all .3s ease}.service-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background:var(--DHAGreen)}.service-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]:after{content:"\\2713";color:var(--DHAWhite);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:14px;font-weight:700}.service-details[_ngcontent-%COMP%]{flex:1}.service-name[_ngcontent-%COMP%]{font-weight:600;color:var(--DHAGreen);margin-bottom:5px;font-size:1.1rem}.service-description[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:.95rem;line-height:1.4}.location-grid[_ngcontent-%COMP%], .date-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;padding:10px 5px}.date-grid[_ngcontent-%COMP%]   app-custom-date-input[_ngcontent-%COMP%]{display:block}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.field-info[_ngcontent-%COMP%]{margin-top:5px}.field-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:12px;font-style:italic}.floating-input[_ngcontent-%COMP%]{padding:16px 12px;border:1px solid var(--DHAGrayLight);border-radius:6px;font-size:16px;transition:all .3s ease;background:var(--DHAWhite);width:100%;box-sizing:border-box}.floating-input[_ngcontent-%COMP%]:focus, .floating-input.has-value[_ngcontent-%COMP%]{padding:16px 12px}select.floating-input[_ngcontent-%COMP%]{padding-right:30px;appearance:none;-webkit-appearance:none;-moz-appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23949494' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 12px center;background-size:16px}.floating-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--DHAGreen);box-shadow:0 0 0 3px #0166351a}.floating-input[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed}.floating-label[_ngcontent-%COMP%]{position:absolute;top:16px;left:12px;font-weight:600;color:var(--DHATextGray);font-size:16px;pointer-events:none;transition:all .3s ease;background:var(--DHAWhite);padding:0 4px;z-index:1}.floating-input[_ngcontent-%COMP%]:focus + .floating-label[_ngcontent-%COMP%], .floating-input.has-value[_ngcontent-%COMP%] + .floating-label[_ngcontent-%COMP%]{top:-8px;left:8px;font-size:12px;color:var(--DHAGreen);font-weight:600}label[_ngcontent-%COMP%]:not(.floating-label){font-weight:600;color:var(--DHAGreen);margin-bottom:8px;font-size:1rem}select[_ngcontent-%COMP%]:not(.floating-input){padding:12px;border:2px solid var(--DHATextGray);border-radius:6px;font-size:16px;transition:all .3s ease;background:var(--DHAWhite)}select[_ngcontent-%COMP%]:not(.floating-input):focus{outline:none;border-color:var(--DHAGreen);box-shadow:0 0 0 3px #0166351a}select[_ngcontent-%COMP%]:not(.floating-input):disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:var(--DHAErrorColor);font-size:14px;margin-top:5px;font-weight:500}[_nghost-%COMP%]     .floating-input.ng-select{display:block;padding:0;border:none}[_nghost-%COMP%]     .floating-input.ng-select .ng-select-container{min-height:52px;border:1px solid var(--DHAGrayLight);border-radius:6px;background:var(--DHAWhite);padding:6px 8px;box-shadow:none}[_nghost-%COMP%]     .floating-input.ng-select.ng-select-focused .ng-select-container{border-color:var(--DHAGreen);box-shadow:0 0 0 3px #0166351a}.floating-label-group[_ngcontent-%COMP%]{position:relative}.floating-label[_ngcontent-%COMP%]{z-index:5}[_nghost-%COMP%]     .floating-input.ng-select .ng-select-container{position:relative;z-index:1;padding-top:14px}[_nghost-%COMP%]     .floating-input.ng-select .ng-select-container .ng-value-container{padding-top:6px}.floating-input.has-value[_ngcontent-%COMP%] + .floating-label[_ngcontent-%COMP%]{top:-8px;left:8px;font-size:12px;color:var(--DHAGreen);font-weight:600}[_nghost-%COMP%]     .floating-input.ng-select.ng-select-focused+.floating-label{top:-8px;left:8px;font-size:12px;color:var(--DHAGreen);font-weight:600}[_nghost-%COMP%]     .floating-input.ng-select{background-image:none!important}[_nghost-%COMP%]     .floating-input.ng-select .ng-arrow-wrapper{padding-right:10px}[_nghost-%COMP%]     .floating-input.ng-select .ng-arrow{border-color:var(--DHATextGray) transparent transparent;border-style:solid;border-width:6px 6px 0;transition:transform .2s ease}[_nghost-%COMP%]     .floating-input.ng-select.ng-select-opened .ng-arrow{transform:rotate(180deg)}.button-group[_ngcontent-%COMP%]{display:flex;gap:20px;margin-top:40px;justify-content:space-between}.button-group[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1;white-space:nowrap}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:15px 30px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:150px}.btn-primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAWhite);transform:translateY(-2px);color:var(--DHAGreen);border:1px solid var(--DHAGreen)}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:var(--DHATextGray);color:var(--DHAWhite)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHATextGrayDark);transform:translateY(-2px)}@media (max-width: 768px){h2[_ngcontent-%COMP%]{font-size:20px}.applicant-name[_ngcontent-%COMP%]{font-size:14px}.identifier-value[_ngcontent-%COMP%]{font-size:12px}.form-section[_ngcontent-%COMP%]{padding:20px 15px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .expand-icon[_ngcontent-%COMP%]{font-size:16px}.section-description[_ngcontent-%COMP%]{font-size:14px}.section-controls[_ngcontent-%COMP%]{gap:8px}.btn-control[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}.location-grid[_ngcontent-%COMP%], .date-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.button-group[_ngcontent-%COMP%]{gap:10px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;min-width:0;padding:15px 8px}}`]})};var xe=class a{mockSlots=[];branchData={provinces:[{id:"gauteng",name:"Gauteng"},{id:"western-cape",name:"Western Cape"},{id:"kwazulu-natal",name:"KwaZulu-Natal"},{id:"eastern-cape",name:"Eastern Cape"},{id:"free-state",name:"Free State"},{id:"mpumalanga",name:"Mpumalanga"},{id:"limpopo",name:"Limpopo"},{id:"north-west",name:"North West"},{id:"northern-cape",name:"Northern Cape"}],cities:[{id:"johannesburg",name:"Johannesburg",provinceId:"gauteng"},{id:"pretoria-menlyn",name:"Pretoria Menlyn",provinceId:"gauteng"},{id:"pretoria",name:"Pretoria",provinceId:"gauteng"},{id:"soweto",name:"Soweto",provinceId:"gauteng"},{id:"springs",name:"Springs",provinceId:"gauteng"},{id:"vereeniging",name:"Vereeniging",provinceId:"gauteng"},{id:"alberton",name:"Alberton",provinceId:"gauteng"},{id:"benoni",name:"Benoni",provinceId:"gauteng"},{id:"brakpan",name:"Brakpan",provinceId:"gauteng"},{id:"boksburg",name:"Boksburg",provinceId:"gauteng"},{id:"carletonville",name:"Carletonville",provinceId:"gauteng"},{id:"edenvale",name:"Edenvale",provinceId:"gauteng"},{id:"ga-rankawa",name:"Ga-Rankuwa",provinceId:"gauteng"},{id:"heidelberg",name:"Heidelberg",provinceId:"gauteng"},{id:"kempton-park",name:"Kempton Park",provinceId:"gauteng"},{id:"mogale-city",name:"Mogale City",provinceId:"gauteng"},{id:"hammanskraal-temba",name:"Hammanskraal Temba",provinceId:"gauteng"},{id:"nigel",name:"Nigel",provinceId:"gauteng"},{id:"medium-office-randburg",name:"Medium Office Randburg",provinceId:"gauteng"},{id:"pretoria-north",name:"Pretoria North",provinceId:"gauteng"},{id:"johannesburg-metro-municipality",name:"Johannesburg Metro Municipality",provinceId:"gauteng"},{id:"vanderbijlpark",name:"Vanderbijlpark",provinceId:"gauteng"},{id:"tshwane",name:"Tshwane",provinceId:"gauteng"},{id:"randfontein",name:"Randfontein",provinceId:"gauteng"},{id:"centurion",name:"Centurion",provinceId:"gauteng"},{id:"mamelodi-east",name:"Mamelodi East",provinceId:"gauteng"},{id:"evaton",name:"Evaton",provinceId:"gauteng"},{id:"bronkhorstspruit",name:"Bronkhorstspruit",provinceId:"gauteng"},{id:"epping-goodwood",name:"Epping Goodwood",provinceId:"western-cape"},{id:"bellville",name:"Bellville",provinceId:"western-cape"},{id:"vredendal",name:"Vredendal",provinceId:"western-cape"},{id:"grabouw",name:"Grabouw",provinceId:"western-cape"},{id:"george",name:"George",provinceId:"western-cape"},{id:"cape-town",name:"Cape Town",provinceId:"western-cape"},{id:"paarl",name:"Paarl",provinceId:"western-cape"},{id:"beaufort-west",name:"Beaufort West",provinceId:"western-cape"},{id:"caledon",name:"Caledon",provinceId:"western-cape"},{id:"mitchells-plain",name:"Mitchells Plain",provinceId:"western-cape"},{id:"malmesbury",name:"Malmesbury",provinceId:"western-cape"},{id:"oudtshoorn",name:"Oudtshoorn",provinceId:"western-cape"},{id:"worcester",name:"Worcester",provinceId:"western-cape"},{id:"stellenbosch",name:"Stellenbosch",provinceId:"western-cape"},{id:"kwanonqaba",name:"Kwanonqaba",provinceId:"western-cape"},{id:"prince-albert",name:"Prince Albert",provinceId:"western-cape"},{id:"bredasdorp",name:"Bredasdorp",provinceId:"western-cape"},{id:"robertson",name:"Robertson",provinceId:"western-cape"},{id:"ceres",name:"Ceres",provinceId:"western-cape"},{id:"plettenburg-bay",name:"Plettenburg Bay",provinceId:"western-cape"},{id:"durban",name:"Durban",provinceId:"kwazulu-natal"},{id:"umhlanga",name:"Umhlanga",provinceId:"kwazulu-natal"},{id:"port-elizabeth",name:"Port Elizabeth",provinceId:"eastern-cape"},{id:"east-london",name:"East London",provinceId:"eastern-cape"},{id:"bloemfontein",name:"Bloemfontein",provinceId:"free-state"},{id:"nelspruit",name:"Nelspruit",provinceId:"mpumalanga"},{id:"polokwane",name:"Polokwane",provinceId:"limpopo"},{id:"mahikeng",name:"Mahikeng",provinceId:"north-west"},{id:"kimberley",name:"Kimberley",provinceId:"northern-cape"}],branches:[{id:"cresta",name:"Cresta",cityId:"johannesburg"},{id:"johannesburg",name:"Johannesburg",cityId:"johannesburg"},{id:"roodepoort",name:"Roodepoort",cityId:"johannesburg"},{id:"pretoria-menlyn",name:"Pretoria Menlyn",cityId:"pretoria-menlyn"},{id:"pretoria",name:"Pretoria",cityId:"pretoria"},{id:"soweto",name:"Soweto",cityId:"soweto"},{id:"springs",name:"Springs",cityId:"springs"},{id:"vereeniging",name:"Vereeniging",cityId:"vereeniging"},{id:"alberton",name:"Alberton",cityId:"alberton"},{id:"benoni",name:"Benoni",cityId:"benoni"},{id:"brakpan",name:"Brakpan",cityId:"brakpan"},{id:"boksburg",name:"Boksburg",cityId:"boksburg"},{id:"carletonville",name:"Carletonville",cityId:"carletonville"},{id:"edenvale",name:"Edenvale",cityId:"edenvale"},{id:"ga-rankawa",name:"Ga-Rankuwa",cityId:"ga-rankawa"},{id:"heidelberg",name:"Heidelberg",cityId:"heidelberg"},{id:"kempton-park",name:"Kempton Park",cityId:"kempton-park"},{id:"mogale-city",name:"Mogale City",cityId:"mogale-city"},{id:"hammanskraal-temba",name:"Hammanskraal Temba",cityId:"hammanskraal-temba"},{id:"nigel",name:"Nigel",cityId:"nigel"},{id:"medium-office-randburg",name:"Medium Office Randburg",cityId:"medium-office-randburg"},{id:"pretoria-north",name:"Pretoria North",cityId:"pretoria-north"},{id:"johannesburg-metro-municipality",name:"Johannesburg Metro Municipality",cityId:"johannesburg-metro-municipality"},{id:"vanderbijlpark",name:"Vanderbijlpark",cityId:"vanderbijlpark"},{id:"tshwane",name:"Tshwane",cityId:"tshwane"},{id:"randfontein",name:"Randfontein",cityId:"randfontein"},{id:"centurion",name:"Centurion",cityId:"centurion"},{id:"mamelodi-east",name:"Mamelodi East",cityId:"mamelodi-east"},{id:"evaton",name:"Evaton",cityId:"evaton"},{id:"bronkhorstspruit",name:"Bronkhorstspruit",cityId:"bronkhorstspruit"},{id:"cape-town",name:"Cape Town",cityId:"cape-town"},{id:"khayelitsha",name:"Khayelitsha",cityId:"cape-town"},{id:"nyanga",name:"Nyanga",cityId:"cape-town"},{id:"wynberg",name:"Wynberg",cityId:"cape-town"},{id:"somerset-west",name:"Somerset West",cityId:"cape-town"},{id:"vredenburg",name:"Vredenburg",cityId:"cape-town"},{id:"bellville",name:"Bellville",cityId:"bellville"},{id:"tygervalley",name:"Tygervalley",cityId:"bellville"},{id:"epping-goodwood",name:"Epping Goodwood",cityId:"epping-goodwood"},{id:"vredendal",name:"Vredendal",cityId:"vredendal"},{id:"grabouw",name:"Grabouw",cityId:"grabouw"},{id:"george",name:"George",cityId:"george"},{id:"paarl",name:"Paarl",cityId:"paarl"},{id:"beaufort-west",name:"Beaufort West",cityId:"beaufort-west"},{id:"caledon",name:"Caledon",cityId:"caledon"},{id:"mitchells-plain",name:"Mitchells Plain",cityId:"mitchells-plain"},{id:"malmesbury",name:"Malmesbury",cityId:"malmesbury"},{id:"oudtshoorn",name:"Oudtshoorn",cityId:"oudtshoorn"},{id:"worcester",name:"Worcester",cityId:"worcester"},{id:"stellenbosch",name:"Stellenbosch",cityId:"stellenbosch"},{id:"kwanonqaba",name:"Kwanonqaba",cityId:"kwanonqaba"},{id:"prince-albert",name:"Prince Albert",cityId:"prince-albert"},{id:"bredasdorp",name:"Bredasdorp",cityId:"bredasdorp"},{id:"robertson",name:"Robertson",cityId:"robertson"},{id:"ceres",name:"Ceres",cityId:"ceres"},{id:"plettenburg-bay",name:"Plettenburg Bay",cityId:"plettenburg-bay"},{id:"durban",name:"Durban",cityId:"durban"},{id:"umhlanga",name:"Umhlanga",cityId:"umhlanga"},{id:"port-elizabeth",name:"Port Elizabeth",cityId:"port-elizabeth"},{id:"east-london",name:"East London",cityId:"east-london"},{id:"bloemfontein",name:"Bloemfontein",cityId:"bloemfontein"},{id:"nelspruit",name:"Nelspruit",cityId:"nelspruit"},{id:"polokwane",name:"Polokwane",cityId:"polokwane"},{id:"mahikeng",name:"Mahikeng",cityId:"mahikeng"},{id:"kimberley",name:"Kimberley",cityId:"kimberley"}]};branchesWithSlots=[];constructor(){this.initializeSlotGeneration()}searchAvailableSlots(t){return Z(this.filterSlots(t)).pipe(J(1e3))}searchAvailableSlotsWithAlternatives(t){let e=this.filterSlots(t);if(e.length>0)return Z({slots:e,alternatives:[]}).pipe(J(1e3));{let n=this.generateAlternativeSuggestions(t);return Z({slots:[],alternatives:n}).pipe(J(1e3))}}filterSlots(t){let e=new Date(t.startDate),n=new Date(t.endDate);return this.mockSlots.filter(o=>{let c=new Date(o.date),f=o.branch===t.branch,w=c>=e&&c<=n;return f&&w})}getTimeSlotsForDate(t){return[{time:"08:00",available:!1},{time:"08:30",available:!1},{time:"09:00",available:!1},{time:"09:30",available:!1},{time:"10:00",available:!1},{time:"10:30",available:!1},{time:"11:00",available:!1},{time:"11:30",available:!1},{time:"12:00",available:!1},{time:"13:00",available:!1},{time:"13:30",available:!1},{time:"14:00",available:!1},{time:"14:30",available:!1},{time:"15:00",available:!1},{time:"15:30",available:!1},{time:"16:00",available:!1}].map((n,o)=>({id:`${t}-${o}`,time:n.time,available:Math.random()>.7,date:t}))}bookSlot(t){return Z({success:!0,message:"Slot booked successfully!",bookingId:`DHA-${Date.now()}`}).pipe(J(1500))}getAvailableDates(t,e,n){let o=new Date(e),c=new Date(n),f=[];for(let w=new Date(o);w<=c;w.setDate(w.getDate()+1)){let M=w.toISOString().split("T")[0];this.mockSlots.some(O=>O.branch===t&&O.date===M)&&f.push(M)}return f}getBranchForProvince(t){return this.branchData.branches.filter(o=>this.branchData.cities.find(c=>c.id===o.cityId)?.provinceId===t).find(o=>this.branchesWithSlots.includes(o.id))?.id||null}getProvincesWithSlots(){return this.branchData.provinces.map(t=>t.id)}initializeSlotGeneration(){this.selectBranchesWithSlots(),this.generateProvinceSlots()}selectBranchesWithSlots(){this.branchesWithSlots=[],this.branchData.provinces.forEach(t=>{let e=this.branchData.branches.filter(f=>this.branchData.cities.find(w=>w.id===f.cityId)?.provinceId===t.id),n=Math.ceil(e.length*.6),c=[...e].sort(()=>Math.random()-.5).slice(0,n);this.branchesWithSlots.push(...c.map(f=>f.id))})}generateProvinceSlots(){let t=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00"],e=1e3;this.branchesWithSlots.forEach(n=>{for(let o=0;o<30;o++){let c=new Date;c.setDate(c.getDate()+o);let f=c.toISOString().split("T")[0],w=c.getDay();if(w===0||w===6)continue;let M=Math.random(),b;M<.1?b=1:M<.3?b=2:M<.6?b=3:M<.85?b=4:M<.95?b=5:b=6;let O=[...t].sort(()=>Math.random()-.5);for(let D=0;D<b;D++){let E=O[D];this.mockSlots.push({id:e.toString(),date:f,time:E,branch:n}),e++}}})}generateAlternativeSuggestions(t){let e=this.branchData.branches.find(D=>D.id===t.branch);if(!e)return[];let n=this.branchData.cities.find(D=>D.id===e.cityId),o=this.branchData.provinces.find(D=>D.id===n?.provinceId);if(!n||!o)return[];let c=[];this.branchData.branches.filter(D=>D.cityId===n.id&&D.id!==t.branch).forEach(D=>{let E=this.getAvailableSlotsCount(D.id,t.startDate,t.endDate);E>0&&c.push({branchId:D.id,branchName:D.name,cityName:n.name,provinceName:o.name,distance:"same-city",availableSlots:E,nextAvailableDate:this.getNextAvailableDate(D.id,t.startDate)})}),this.branchData.cities.filter(D=>D.provinceId===o.id&&D.id!==n.id).forEach(D=>{this.branchData.branches.filter(F=>F.cityId===D.id).forEach(F=>{let L=this.getAvailableSlotsCount(F.id,t.startDate,t.endDate);L>0&&c.push({branchId:F.id,branchName:F.name,cityName:D.name,provinceName:o.name,distance:"same-province",availableSlots:L,nextAvailableDate:this.getNextAvailableDate(F.id,t.startDate)})})});let M=this.getNeighboringProvinces(o.id),b=0;for(let D of M){if(b>=2)break;let E=this.branchData.provinces.find(L=>L.id===D);if(!E)continue;let F=this.branchData.cities.filter(L=>L.provinceId===D);for(let L of F){if(b>=2)break;let qe=this.branchData.branches.filter(q=>q.cityId===L.id);for(let q of qe){if(b>=2)break;let Te=this.getAvailableSlotsCount(q.id,t.startDate,t.endDate);Te>0&&(c.push({branchId:q.id,branchName:q.name,cityName:L.name,provinceName:E.name,distance:"neighboring-province",availableSlots:Te,nextAvailableDate:this.getNextAvailableDate(q.id,t.startDate)}),b++)}}}let O={"same-city":1,"same-province":2,"neighboring-province":3};return c.sort((D,E)=>{let F=O[D.distance]-O[E.distance];return F!==0?F:E.availableSlots-D.availableSlots}),c.slice(0,5)}getNeighboringProvinces(t){return{gauteng:["mpumalanga","free-state","north-west","limpopo"],"western-cape":["eastern-cape","northern-cape"],"kwazulu-natal":["free-state","eastern-cape","mpumalanga"],"eastern-cape":["western-cape","kwazulu-natal","free-state"],"free-state":["gauteng","kwazulu-natal","eastern-cape","north-west"],mpumalanga:["gauteng","kwazulu-natal","limpopo"],limpopo:["gauteng","mpumalanga","north-west"],"north-west":["gauteng","free-state","limpopo","northern-cape"],"northern-cape":["western-cape","north-west","free-state"]}[t]||[]}getAvailableSlotsCount(t,e,n){let o=new Date(e),c=new Date(n);return this.mockSlots.filter(f=>{let w=new Date(f.date);return f.branch===t&&w>=o&&w<=c}).length}getNextAvailableDate(t,e){let n=new Date(e),o=this.mockSlots.filter(c=>{let f=new Date(c.date);return c.branch===t&&f>n}).sort((c,f)=>new Date(c.date).getTime()-new Date(f.date).getTime());return o.length>0?o[0].date:void 0}static \u0275fac=function(e){return new(e||a)};static \u0275prov=X({token:a,factory:a.\u0275fac,providedIn:"root"})};function Et(a,t){a&1&&(i(0,"div",2),C(1,"div",3),i(2,"p"),s(3,"Searching for available slots..."),r()())}function Ft(a,t){a&1&&(i(0,"span",33),s(1," Same City "),r())}function Ht(a,t){a&1&&(i(0,"span",34),s(1," Same Province "),r())}function Bt(a,t){a&1&&(i(0,"span",35),s(1," Nearby Province "),r())}function Gt(a,t){if(a&1&&(i(0,"span",36),s(1),r()),a&2){let e=d().$implicit,n=d(3);l(),y(" Next: ",n.getFormattedDate(e.nextAvailableDate)," ")}}function Lt(a,t){if(a&1){let e=x();i(0,"div",20)(1,"div",21)(2,"div",22)(3,"h5"),s(4),r(),i(5,"p",23),s(6),r()(),i(7,"div",24),h(8,Ft,2,0,"span",25)(9,Ht,2,0,"span",26)(10,Bt,2,0,"span",27),r()(),i(11,"div",28)(12,"div",29)(13,"span",30),s(14),r(),h(15,Gt,2,1,"span",31),r()(),i(16,"button",32),g("click",function(){let o=m(e).$implicit,c=d(3);return u(c.selectAlternativeSuggestion(o))}),s(17," Select This Branch "),r()()}if(a&2){let e=t.$implicit;_("same-city",e.distance==="same-city")("same-province",e.distance==="same-province")("neighboring-province",e.distance==="neighboring-province"),l(4),v(e.branchName),l(2),B(" ",e.cityName,", ",e.provinceName," "),l(2),p("ngIf",e.distance==="same-city"),l(),p("ngIf",e.distance==="same-province"),l(),p("ngIf",e.distance==="neighboring-province"),l(4),y("",e.availableSlots," slots available"),l(),p("ngIf",e.nextAvailableDate)}}function Vt(a,t){if(a&1&&(i(0,"div",16)(1,"h4"),s(2,"\u{1F4CD} Alternative Locations Available"),r(),i(3,"p",17),s(4," We found available slots at these nearby branches: "),r(),i(5,"div",18),h(6,Lt,18,14,"div",19),r()()),a&2){let e=d(2);l(6),p("ngForOf",e.alternativeSuggestions)}}function Nt(a,t){if(a&1){let e=x();i(0,"app-form-page-layout",4)(1,"h3"),s(2,"No Available Slots Found"),r(),i(3,"p"),s(4," We couldn't find any available appointment slots for your selected criteria. "),C(5,"br")(6,"br"),s(7,"Try a different branch, edit your search or try again later. "),r(),C(8,"hr",5),h(9,Vt,7,1,"div",6),C(10,"hr",5),i(11,"div",7)(12,"h3"),s(13,"Booking Summary"),r(),i(14,"div",8)(15,"div",9)(16,"span",10),s(17,"\u{1F4CD} Branch:"),r(),i(18,"span",11),s(19),r()(),i(20,"div",9)(21,"span",10),s(22,"\u{1F4C5} Date Range:"),r(),i(23,"span",11),s(24),r()()(),i(25,"button",12),g("click",function(){m(e);let o=d();return u(o.editSearch())}),i(26,"div",13),C(27,"span",14),i(28,"span",15),s(29,"Edit Search"),r()()()()()}if(a&2){let e=d();p("currentStep",2)("steps",e.stepTitles),l(9),p("ngIf",e.alternativeSuggestions.length>0),l(10),v(e.getBranchDisplayName()),l(5),v(e.getDateRangeDisplay())}}function zt(a,t){if(a&1){let e=x();i(0,"div",53),g("click",function(){let o=m(e).$implicit,c=d(3);return u(c.selectSlot(o))}),i(1,"div",54),s(2),r(),i(3,"div",55)(4,"span",56),s(5,"from"),r(),i(6,"span",57),s(7),r()()()}if(a&2){let e=t.$implicit,n=d(3);l(2),v(n.getFormattedTime(e.time)),l(5),v(n.getTimeRange(e.time))}}function Rt(a,t){if(a&1){let e=x();i(0,"div",43)(1,"div",44),g("click",function(){let o=m(e).$implicit,c=d(2);return u(c.toggleDayGroup(o.date))}),i(2,"div",45)(3,"span",46),s(4),r(),i(5,"span",47),s(6),r()(),i(7,"div",48)(8,"span",30),s(9),r(),i(10,"span",49),s(11," \u25BC "),r()()(),i(12,"div",50)(13,"div",51),h(14,zt,8,2,"div",52),r()()()}if(a&2){let e=t.$implicit,n=d(2);l(4),v(n.getFormattedDayName(e.date)),l(2),v(n.getFormattedDate(e.date)),l(3),y("",e.slots.length," slots"),l(),_("expanded",e.isExpanded),l(2),_("expanded",e.isExpanded),l(2),p("ngForOf",e.slots)}}function Wt(a,t){if(a&1){let e=x();i(0,"div",58)(1,"button",59),g("click",function(){m(e);let o=d(2);return u(o.previousPage())}),s(2," \u2190 Previous "),r(),i(3,"span",60),s(4),r(),i(5,"button",59),g("click",function(){m(e);let o=d(2);return u(o.nextPage())}),s(6," Next \u2192 "),r()()}if(a&2){let e=d(2);l(),p("disabled",e.currentPage===0),l(3),B(" Page ",e.currentPage+1," of ",e.getTotalPages()," "),l(),p("disabled",e.currentPage>=e.getTotalPages()-1)}}function jt(a,t){if(a&1){let e=x();i(0,"app-form-page-layout",4)(1,"div",7)(2,"h3"),s(3,"Booking Summary"),r(),i(4,"div",8)(5,"div",9)(6,"span",10),s(7,"\u{1F4CD} Branch:"),r(),i(8,"span",11),s(9),r()(),i(10,"div",9)(11,"span",10),s(12,"\u{1F4C5} Date Range:"),r(),i(13,"span",11),s(14),r()()(),i(15,"button",12),g("click",function(){m(e);let o=d();return u(o.editSearch())}),i(16,"div",13)(17,"span",15),s(18,"Edit Search"),r()()(),C(19,"hr",5),r(),i(20,"div",37)(21,"div",38)(22,"h3"),s(23,"Available Appointment Slots"),r(),i(24,"div",39)(25,"div",30),s(26),r()()(),i(27,"div",40),h(28,Rt,15,8,"div",41),r(),h(29,Wt,7,4,"div",42),r()()}if(a&2){let e=d();p("currentStep",2)("steps",e.stepTitles),l(9),v(e.getBranchDisplayName()),l(5),v(e.getDateRangeDisplay()),l(12),B(" ",e.getTotalSlotsCount()," slots found across ",e.getUniqueDaysCount()," days "),l(2),p("ngForOf",e.getPaginatedDayGroups()),l(),p("ngIf",e.getTotalPages()>1)}}var Ce=class a{constructor(t,e){this.slotService=t;this.router=e}searchCriteria=null;stepTitles=["Services","Details","Timeslots","Confirm"];editSearchRequested=new k;slotSelected=new k;alternativeBranchSelected=new k;availableSlots=[];alternativeSuggestions=[];isLoading=!1;noSlotsAvailable=!1;currentPage=0;slotsPerPage=5;expandedDays=new Set;provinces=[{id:"gauteng",name:"Gauteng"},{id:"western-cape",name:"Western Cape"},{id:"kwazulu-natal",name:"KwaZulu-Natal"},{id:"eastern-cape",name:"Eastern Cape"},{id:"free-state",name:"Free State"},{id:"mpumalanga",name:"Mpumalanga"},{id:"limpopo",name:"Limpopo"},{id:"north-west",name:"North West"},{id:"northern-cape",name:"Northern Cape"}];cities=[{id:"johannesburg",name:"Johannesburg",provinceId:"gauteng"},{id:"pretoria-menlyn",name:"Pretoria Menlyn",provinceId:"gauteng"},{id:"pretoria",name:"Pretoria",provinceId:"gauteng"},{id:"soweto",name:"Soweto",provinceId:"gauteng"},{id:"springs",name:"Springs",provinceId:"gauteng"},{id:"vereeniging",name:"Vereeniging",provinceId:"gauteng"},{id:"alberton",name:"Alberton",provinceId:"gauteng"},{id:"benoni",name:"Benoni",provinceId:"gauteng"},{id:"brakpan",name:"Brakpan",provinceId:"gauteng"},{id:"boksburg",name:"Boksburg",provinceId:"gauteng"},{id:"carletonville",name:"Carletonville",provinceId:"gauteng"},{id:"edenvale",name:"Edenvale",provinceId:"gauteng"},{id:"ga-rankawa",name:"Ga-Rankuwa",provinceId:"gauteng"},{id:"heidelberg",name:"Heidelberg",provinceId:"gauteng"},{id:"kempton-park",name:"Kempton Park",provinceId:"gauteng"},{id:"mogale-city",name:"Mogale City",provinceId:"gauteng"},{id:"hammanskraal-temba",name:"Hammanskraal Temba",provinceId:"gauteng"},{id:"nigel",name:"Nigel",provinceId:"gauteng"},{id:"medium-office-randburg",name:"Medium Office Randburg",provinceId:"gauteng"},{id:"pretoria-north",name:"Pretoria North",provinceId:"gauteng"},{id:"johannesburg-metro-municipality",name:"Johannesburg Metro Municipality",provinceId:"gauteng"},{id:"vanderbijlpark",name:"Vanderbijlpark",provinceId:"gauteng"},{id:"tshwane",name:"Tshwane",provinceId:"gauteng"},{id:"randfontein",name:"Randfontein",provinceId:"gauteng"},{id:"centurion",name:"Centurion",provinceId:"gauteng"},{id:"mamelodi-east",name:"Mamelodi East",provinceId:"gauteng"},{id:"evaton",name:"Evaton",provinceId:"gauteng"},{id:"bronkhorstspruit",name:"Bronkhorstspruit",provinceId:"gauteng"},{id:"epping-goodwood",name:"Epping Goodwood",provinceId:"western-cape"},{id:"bellville",name:"Bellville",provinceId:"western-cape"},{id:"vredendal",name:"Vredendal",provinceId:"western-cape"},{id:"grabouw",name:"Grabouw",provinceId:"western-cape"},{id:"george",name:"George",provinceId:"western-cape"},{id:"cape-town",name:"Cape Town",provinceId:"western-cape"},{id:"paarl",name:"Paarl",provinceId:"western-cape"},{id:"beaufort-west",name:"Beaufort West",provinceId:"western-cape"},{id:"caledon",name:"Caledon",provinceId:"western-cape"},{id:"mitchells-plain",name:"Mitchells Plain",provinceId:"western-cape"},{id:"malmesbury",name:"Malmesbury",provinceId:"western-cape"},{id:"oudtshoorn",name:"Oudtshoorn",provinceId:"western-cape"},{id:"worcester",name:"Worcester",provinceId:"western-cape"},{id:"stellenbosch",name:"Stellenbosch",provinceId:"western-cape"},{id:"kwanonqaba",name:"Kwanonqaba",provinceId:"western-cape"},{id:"prince-albert",name:"Prince Albert",provinceId:"western-cape"},{id:"bredasdorp",name:"Bredasdorp",provinceId:"western-cape"},{id:"robertson",name:"Robertson",provinceId:"western-cape"},{id:"ceres",name:"Ceres",provinceId:"western-cape"},{id:"plettenburg-bay",name:"Plettenburg Bay",provinceId:"western-cape"},{id:"durban",name:"Durban",provinceId:"kwazulu-natal"},{id:"umhlanga",name:"Umhlanga",provinceId:"kwazulu-natal"},{id:"port-elizabeth",name:"Port Elizabeth",provinceId:"eastern-cape"},{id:"east-london",name:"East London",provinceId:"eastern-cape"},{id:"bloemfontein",name:"Bloemfontein",provinceId:"free-state"},{id:"nelspruit",name:"Nelspruit",provinceId:"mpumalanga"},{id:"polokwane",name:"Polokwane",provinceId:"limpopo"},{id:"mahikeng",name:"Mahikeng",provinceId:"north-west"},{id:"kimberley",name:"Kimberley",provinceId:"northern-cape"}];branches=[{id:"cresta",name:"Cresta",cityId:"johannesburg"},{id:"johannesburg",name:"Johannesburg",cityId:"johannesburg"},{id:"roodepoort",name:"Roodepoort",cityId:"johannesburg"},{id:"pretoria-menlyn",name:"Pretoria Menlyn",cityId:"pretoria-menlyn"},{id:"pretoria",name:"Pretoria",cityId:"pretoria"},{id:"soweto",name:"Soweto",cityId:"soweto"},{id:"springs",name:"Springs",cityId:"springs"},{id:"vereeniging",name:"Vereeniging",cityId:"vereeniging"},{id:"alberton",name:"Alberton",cityId:"alberton"},{id:"benoni",name:"Benoni",cityId:"benoni"},{id:"brakpan",name:"Brakpan",cityId:"brakpan"},{id:"boksburg",name:"Boksburg",cityId:"boksburg"},{id:"carletonville",name:"Carletonville",cityId:"carletonville"},{id:"edenvale",name:"Edenvale",cityId:"edenvale"},{id:"ga-rankawa",name:"Ga-Rankuwa",cityId:"ga-rankawa"},{id:"heidelberg",name:"Heidelberg",cityId:"heidelberg"},{id:"kempton-park",name:"Kempton Park",cityId:"kempton-park"},{id:"mogale-city",name:"Mogale City",cityId:"mogale-city"},{id:"hammanskraal-temba",name:"Hammanskraal Temba",cityId:"hammanskraal-temba"},{id:"nigel",name:"Nigel",cityId:"nigel"},{id:"medium-office-randburg",name:"Medium Office Randburg",cityId:"medium-office-randburg"},{id:"pretoria-north",name:"Pretoria North",cityId:"pretoria-north"},{id:"johannesburg-metro-municipality",name:"Johannesburg Metro Municipality",cityId:"johannesburg-metro-municipality"},{id:"vanderbijlpark",name:"Vanderbijlpark",cityId:"vanderbijlpark"},{id:"tshwane",name:"Tshwane",cityId:"tshwane"},{id:"randfontein",name:"Randfontein",cityId:"randfontein"},{id:"centurion",name:"Centurion",cityId:"centurion"},{id:"mamelodi-east",name:"Mamelodi East",cityId:"mamelodi-east"},{id:"evaton",name:"Evaton",cityId:"evaton"},{id:"bronkhorstspruit",name:"Bronkhorstspruit",cityId:"bronkhorstspruit"},{id:"cape-town",name:"Cape Town",cityId:"cape-town"},{id:"khayelitsha",name:"Khayelitsha",cityId:"cape-town"},{id:"nyanga",name:"Nyanga",cityId:"cape-town"},{id:"wynberg",name:"Wynberg",cityId:"cape-town"},{id:"somerset-west",name:"Somerset West",cityId:"cape-town"},{id:"vredenburg",name:"Vredenburg",cityId:"cape-town"},{id:"bellville",name:"Bellville",cityId:"bellville"},{id:"tygervalley",name:"Tygervalley",cityId:"bellville"},{id:"epping-goodwood",name:"Epping Goodwood",cityId:"epping-goodwood"},{id:"vredendal",name:"Vredendal",cityId:"vredendal"},{id:"grabouw",name:"Grabouw",cityId:"grabouw"},{id:"george",name:"George",cityId:"george"},{id:"paarl",name:"Paarl",cityId:"paarl"},{id:"beaufort-west",name:"Beaufort West",cityId:"beaufort-west"},{id:"caledon",name:"Caledon",cityId:"caledon"},{id:"mitchells-plain",name:"Mitchells Plain",cityId:"mitchells-plain"},{id:"malmesbury",name:"Malmesbury",cityId:"malmesbury"},{id:"oudtshoorn",name:"Oudtshoorn",cityId:"oudtshoorn"},{id:"worcester",name:"Worcester",cityId:"worcester"},{id:"stellenbosch",name:"Stellenbosch",cityId:"stellenbosch"},{id:"kwanonqaba",name:"Kwanonqaba",cityId:"kwanonqaba"},{id:"prince-albert",name:"Prince Albert",cityId:"prince-albert"},{id:"bredasdorp",name:"Bredasdorp",cityId:"bredasdorp"},{id:"robertson",name:"Robertson",cityId:"robertson"},{id:"ceres",name:"Ceres",cityId:"ceres"},{id:"plettenburg-bay",name:"Plettenburg Bay",cityId:"plettenburg-bay"},{id:"durban",name:"Durban",cityId:"durban"},{id:"umhlanga",name:"Umhlanga",cityId:"umhlanga"},{id:"port-elizabeth",name:"Port Elizabeth",cityId:"port-elizabeth"},{id:"east-london",name:"East London",cityId:"east-london"},{id:"bloemfontein",name:"Bloemfontein",cityId:"bloemfontein"},{id:"nelspruit",name:"Nelspruit",cityId:"nelspruit"},{id:"polokwane",name:"Polokwane",cityId:"polokwane"},{id:"mahikeng",name:"Mahikeng",cityId:"mahikeng"},{id:"kimberley",name:"Kimberley",cityId:"kimberley"}];ngOnInit(){this.searchCriteria&&this.searchSlots()}ngOnChanges(t){t.searchCriteria&&this.searchCriteria&&this.searchSlots()}searchSlots(){this.searchCriteria&&(this.isLoading=!0,this.noSlotsAvailable=!1,this.alternativeSuggestions=[],this.slotService.searchAvailableSlotsWithAlternatives(this.searchCriteria).subscribe({next:t=>{this.availableSlots=t.slots,this.alternativeSuggestions=t.alternatives,this.isLoading=!1,this.noSlotsAvailable=this.availableSlots.length===0},error:t=>{console.error("Error searching slots:",t),this.isLoading=!1,this.noSlotsAvailable=!0,this.alternativeSuggestions=[]}}))}getBranchDisplayName(){if(!this.searchCriteria?.branch)return"N/A";let t=this.branches.find(o=>o.id===this.searchCriteria.branch);if(!t)return"N/A";let e=this.cities.find(o=>o.id===t.cityId);if(!e)return t.name;let n=this.provinces.find(o=>o.id===e.provinceId);return n?`${n.name} \u2192 ${e.name} \u2192 ${t.name}`:`${e.name} - ${t.name}`}getDateRangeDisplay(){if(!this.searchCriteria)return"N/A";let t=new Date(this.searchCriteria.startDate),e=new Date(this.searchCriteria.endDate),n=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short"}),o=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}),c=n.formatToParts(t),f=o.formatToParts(e),w=`${c.find(b=>b.type==="day").value} ${c.find(b=>b.type==="month").value}`,M=`${f.find(b=>b.type==="day").value} ${f.find(b=>b.type==="month").value} ${f.find(b=>b.type==="year").value}`;return`${w} to ${M}`}getTotalSlotsCount(){return this.availableSlots.length}getUniqueDaysCount(){return new Set(this.availableSlots.map(e=>e.date)).size}getPaginatedDayGroups(){let t=this.groupSlotsByDay(),e=this.currentPage*this.slotsPerPage,n=e+this.slotsPerPage;return t.slice(e,n)}getTotalPages(){let t=this.groupSlotsByDay();return Math.ceil(t.length/this.slotsPerPage)}groupSlotsByDay(){let t=this.availableSlots.reduce((e,n)=>(e[n.date]||(e[n.date]=[]),e[n.date].push(n),e),{});return Object.keys(t).sort().map(e=>({date:e,slots:t[e].sort((n,o)=>n.time.localeCompare(o.time)),isExpanded:this.expandedDays.has(e)}))}getFormattedDayName(t){try{return new Date(t).toLocaleDateString("en-ZA",{weekday:"long"})}catch{return"Unknown"}}getFormattedDate(t){try{let e=new Date(t),o=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).formatToParts(e);return`${o.find(f=>f.type==="day").value} ${o.find(f=>f.type==="month").value} ${o.find(f=>f.type==="year").value}`}catch{return"Unknown"}}getFormattedTime(t){try{let[e,n]=t.split(":"),o=new Date;return o.setHours(parseInt(e),parseInt(n)),o.toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return t}}getTimeRange(t){try{let[e,n]=t.split(":"),o=new Date;o.setHours(parseInt(e),parseInt(n));let c=new Date(o);c.setHours(o.getHours()+1);let f=o.toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1}),w=c.toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${f} to ${w}`}catch{return t}}toggleDayGroup(t){this.expandedDays.has(t)?this.expandedDays.delete(t):this.expandedDays.add(t)}selectSlot(t){this.slotSelected.emit(t)}editSearch(){this.editSearchRequested.emit()}previousPage(){this.currentPage>0&&this.currentPage--}nextPage(){let t=this.getTotalPages();this.currentPage<t-1&&this.currentPage++}selectAlternativeSuggestion(t){this.alternativeBranchSelected.emit(t.branchId)}static \u0275fac=function(e){return new(e||a)(H(xe),H(de))};static \u0275cmp=P({type:a,selectors:[["app-appointment-results"]],inputs:{searchCriteria:"searchCriteria",stepTitles:"stepTitles"},outputs:{editSearchRequested:"editSearchRequested",slotSelected:"slotSelected",alternativeBranchSelected:"alternativeBranchSelected"},features:[V],decls:3,vars:3,consts:[["class","loading-container",4,"ngIf"],[3,"currentStep","steps",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[3,"currentStep","steps"],[1,"summary-divider"],["class","alternative-suggestions",4,"ngIf"],[1,"booking-summary"],[1,"summary-grid"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],["type","button","title","Add an accompanying applicant to this booking",1,"action-btn","std",3,"click"],[1,"btn-contents"],[1,"btn-icon"],[1,"btn-text"],[1,"alternative-suggestions"],[1,"suggestions-intro"],[1,"suggestions-list"],["class","suggestion-card",3,"same-city","same-province","neighboring-province",4,"ngFor","ngForOf"],[1,"suggestion-card"],[1,"suggestion-header"],[1,"suggestion-location"],[1,"location-details"],[1,"suggestion-badge"],["class","badge same-city-badge",4,"ngIf"],["class","badge same-province-badge",4,"ngIf"],["class","badge neighboring-badge",4,"ngIf"],[1,"suggestion-details"],[1,"availability-info"],[1,"slots-count"],["class","next-date",4,"ngIf"],["type","button",1,"btn-select-alternative",3,"click"],[1,"badge","same-city-badge"],[1,"badge","same-province-badge"],[1,"badge","neighboring-badge"],[1,"next-date"],[1,"slots-container"],[1,"slots-header"],[1,"slots-header-right"],[1,"slots-grouped"],["class","day-group",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],[1,"day-group"],[1,"day-header",3,"click"],[1,"day-info"],[1,"day-name"],[1,"day-date"],[1,"day-stats"],[1,"expand-icon"],[1,"day-slots"],[1,"slots-grid"],["class","slot-card",3,"click",4,"ngFor","ngForOf"],[1,"slot-card",3,"click"],[1,"slot-time"],[1,"slot-info"],[1,"slot-label"],[1,"slot-time-range"],[1,"pagination"],["type","button",1,"pagination-btn",3,"click","disabled"],[1,"pagination-info"]],template:function(e,n){e&1&&h(0,Et,4,0,"div",0)(1,Nt,30,5,"app-form-page-layout",1)(2,jt,30,8,"app-form-page-layout",1),e&2&&(p("ngIf",n.isLoading),l(),p("ngIf",!n.isLoading&&n.noSlotsAvailable),l(),p("ngIf",!n.isLoading&&!n.noSlotsAvailable&&n.availableSlots.length>0))},dependencies:[A,T,I,z,R],styles:["[_nghost-%COMP%]{--DHAGreen: #016635;--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHAErrorColor: #ea2127;--DHADisabledButtonGray: #e6e6e6;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHAOffBlack: rgb(42, 41, 41);--DHADisabledTextGray: #c4c4c4;--DHAGrayLight: gainsboro;--form-width: 600px;--step-form-gap: 20px;--mobile-form-height: 600px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center;background:linear-gradient(135deg,var(--DHAOffWhite) 0%,#e8f5e8 100%);padding-top:73px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid var(--DHABackGroundLightGray);border-top:4px solid var(--DHAGreen);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:16px;margin:0}h3[_ngcontent-%COMP%]{color:var(--DHAOrange);margin-bottom:15px;font-size:1.5rem;text-align:center}p[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);margin-bottom:30px;line-height:1.5;text-align:center}.summary-divider[_ngcontent-%COMP%]{border:none;height:1px;background:var(--DHABackGroundLightGray);margin:30px 0}.booking-summary[_ngcontent-%COMP%]{background:var(--DHAOffWhite);border-radius:8px;padding:20px;border:1px solid var(--DHABackGroundLightGray);margin-bottom:20px}.booking-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:15px;margin-top:0;font-size:1.2rem;text-align:left}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px;margin-bottom:20px}.summary-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.summary-label[_ngcontent-%COMP%]{font-size:12px;color:var(--DHATextGray);font-weight:500}.summary-value[_ngcontent-%COMP%]{font-size:14px;color:var(--DHAOffBlack);font-weight:600;word-break:break-word}.action-btn[_ngcontent-%COMP%]{border:none;border-radius:6px;padding:12px 20px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;width:100%}.action-btn.std[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite)}.action-btn.std[_ngcontent-%COMP%]:hover{background:var(--DHAOffBlack);transform:translateY(-1px)}.btn-contents[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.btn-icon[_ngcontent-%COMP%]{font-size:16px}.btn-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.slots-container[_ngcontent-%COMP%]{background:var(--DHAWhite);border-radius:8px;border:1px solid var(--DHABackGroundLightGray);overflow:hidden}.slots-header[_ngcontent-%COMP%]{background:var(--DHAOffWhite);padding:20px;border-bottom:1px solid var(--DHABackGroundLightGray);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}.slots-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHAGreen);margin:0;font-size:1.2rem;font-weight:600}.slots-count[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:14px;font-weight:500}.slots-grouped[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.day-group[_ngcontent-%COMP%]{border-bottom:1px solid var(--DHABackGroundLightGray)}.day-group[_ngcontent-%COMP%]:last-child{border-bottom:none}.day-header[_ngcontent-%COMP%]{background:var(--DHAWhite);padding:15px 20px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color .2s ease}.day-header[_ngcontent-%COMP%]:hover{background:var(--DHAOffWhite)}.day-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.day-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--DHAOffBlack)}.day-date[_ngcontent-%COMP%]{font-size:12px;color:var(--DHATextGray)}.day-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.expand-icon[_ngcontent-%COMP%]{font-size:12px;color:var(--DHATextGray);transition:transform .2s ease}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.day-slots[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease}.day-slots.expanded[_ngcontent-%COMP%]{max-height:500px}.slots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;padding:20px;background:var(--DHAOffWhite)}.slot-card[_ngcontent-%COMP%]{background:var(--DHAWhite);border:1px solid var(--DHABackGroundLightGray);border-radius:8px;padding:15px;cursor:pointer;transition:all .2s ease;text-align:center}.slot-card[_ngcontent-%COMP%]:hover{border-color:var(--DHAGreen);transform:translateY(-2px);box-shadow:0 4px 12px #01663526}.slot-time[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--DHAGreen);margin-bottom:5px}.slot-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.slot-label[_ngcontent-%COMP%]{font-size:10px;color:var(--DHATextGray);text-transform:uppercase;letter-spacing:.5px}.slot-time-range[_ngcontent-%COMP%]{font-size:12px;color:var(--DHATextGrayDark);font-weight:500}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:var(--DHAOffWhite);border-top:1px solid var(--DHABackGroundLightGray)}.pagination-btn[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);border:none;border-radius:6px;padding:8px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAOffBlack);transform:translateY(-1px)}.pagination-btn[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed;transform:none}.pagination-info[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:14px;font-weight:500}@media (max-width: 768px){.loading-container[_ngcontent-%COMP%]{padding:24px 0}h3[_ngcontent-%COMP%]{font-size:1.3rem}.booking-summary[_ngcontent-%COMP%]{padding:15px}.booking-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.summary-grid[_ngcontent-%COMP%]{gap:10px}.action-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}.slots-header[_ngcontent-%COMP%]{padding:15px;flex-direction:column;align-items:flex-start;gap:8px}.slots-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.day-header[_ngcontent-%COMP%]{padding:12px 15px}.slots-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:15px;gap:10px}.slot-card[_ngcontent-%COMP%]{padding:12px}.pagination[_ngcontent-%COMP%]{padding:15px;flex-direction:column;gap:10px}.pagination-btn[_ngcontent-%COMP%]{width:100%}}.alternative-suggestions[_ngcontent-%COMP%]{margin:20px 0;border-radius:12px}.alternative-suggestions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--DHAGreen);margin:0 0 10px;font-size:1.2rem;font-weight:600}.suggestions-intro[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);margin:0 0 20px;font-size:.95rem}.suggestions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.suggestion-card[_ngcontent-%COMP%]{background:#fff;border:2px solid var(--DHABackGroundLightGray);border-radius:10px;padding:20px;transition:all .3s ease;position:relative;overflow:hidden}.suggestion-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a}.suggestion-card.same-city[_ngcontent-%COMP%]{border-color:var(--DHAGreen);background:linear-gradient(135deg,#f8f9fa,#0166350d)}.suggestion-card.same-province[_ngcontent-%COMP%]{border-color:var(--DHAOrange);background:linear-gradient(135deg,#f8f9fa,#f3801f0d)}.suggestion-card.neighboring-province[_ngcontent-%COMP%]{border-color:var(--DHATextGray);background:linear-gradient(135deg,#f8f9fa,#9494940d)}.suggestion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px}.suggestion-location[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:var(--DHAGreen);margin:0 0 5px;font-size:1.1rem;font-weight:600}.location-details[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);margin:0;font-size:.9rem}.suggestion-badge[_ngcontent-%COMP%]{flex-shrink:0}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.same-city-badge[_ngcontent-%COMP%]{background:var(--DHAGreen);color:#fff}.same-province-badge[_ngcontent-%COMP%]{background:var(--DHAOrange);color:#fff}.neighboring-badge[_ngcontent-%COMP%]{background:var(--DHATextGray);color:#fff}.suggestion-details[_ngcontent-%COMP%]{margin-bottom:15px}.availability-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.slots-count[_ngcontent-%COMP%]{color:var(--DHAGreen);font-weight:600;font-size:.95rem}.next-date[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:.85rem}.btn-select-alternative[_ngcontent-%COMP%]{background:var(--DHAGreen);color:#fff;border:none;border-radius:8px;padding:12px 24px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s ease;width:100%}.btn-select-alternative[_ngcontent-%COMP%]:hover{background:var(--DHALightGreen);color:var(--DHAGreen);text-decoration:underline;transform:translateY(-1px)}@media (max-width: 768px){.alternative-suggestions[_ngcontent-%COMP%]{margin:15px 0}.suggestion-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.suggestion-badge[_ngcontent-%COMP%]{align-self:flex-start}.availability-info[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}}"]})};function qt(a,t){if(a&1&&(i(0,"div",20),s(1),r()),a&2){let e=t.$implicit;l(),y(" ",e.name," ")}}function $t(a,t){a&1&&(i(0,"div",21),s(1," No services selected "),r())}function Ut(a,t){if(a&1&&(i(0,"div",16)(1,"h4"),s(2),r(),i(3,"div",17),h(4,qt,2,1,"div",18)(5,$t,2,0,"div",19),r()()),a&2){let e=t.$implicit;l(2),B("",e.name," (",e.type,")"),l(2),p("ngForOf",e.selectedServices),l(),p("ngIf",!e.selectedServices||e.selectedServices.length===0)}}var ye=class a{stepTitles=["Services","Details","Timeslots","Confirm"];personalData=null;bookingPersons=[];selectedSlot=null;branchDisplayName="";backToResults=new k;confirmBooking=new k;getFormattedDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-ZA",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}}onBackToResults(){this.backToResults.emit()}onConfirmBooking(){this.confirmBooking.emit()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=P({type:a,selectors:[["app-confirm-booking"]],inputs:{stepTitles:"stepTitles",personalData:"personalData",bookingPersons:"bookingPersons",selectedSlot:"selectedSlot",branchDisplayName:"branchDisplayName"},outputs:{backToResults:"backToResults",confirmBooking:"confirmBooking"},decls:67,vars:11,consts:[[3,"currentStep","steps"],[1,"step-title"],[1,"confirm-description"],[1,"section-grid"],[1,"section"],[1,"booking-section-title"],[1,"booking-section"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"services-summary"],["class","person-services",4,"ngFor","ngForOf"],[1,"confirm-actions"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary",3,"click"],[1,"person-services"],[1,"services-list"],["class","service-item",4,"ngFor","ngForOf"],["class","no-services",4,"ngIf"],[1,"service-item"],[1,"no-services"]],template:function(e,n){e&1&&(i(0,"app-form-page-layout",0)(1,"h2",1),s(2,"Confirm Your Booking"),r(),i(3,"p",2),s(4," Please review all details before confirming your appointment booking. "),r(),i(5,"div",3)(6,"div",4)(7,"h3",5),s(8,"Personal Information"),r(),i(9,"div",6)(10,"div",7)(11,"div",8)(12,"span",9),s(13,"Full Name:"),r(),i(14,"span",10),s(15),r()(),i(16,"div",8)(17,"span",9),s(18,"ID Number:"),r(),i(19,"span",10),s(20),r()(),i(21,"div",8)(22,"span",9),s(23,"Phone:"),r(),i(24,"span",10),s(25),r()(),i(26,"div",8)(27,"span",9),s(28,"Email:"),r(),i(29,"span",10),s(30),r()()()()(),i(31,"div",4)(32,"h3",5),s(33,"Booking Details"),r(),i(34,"div",6)(35,"div",7)(36,"div",8)(37,"span",9),s(38,"Branch:"),r(),i(39,"span",10),s(40),r()(),i(41,"div",8)(42,"span",9),s(43,"Appointment Date:"),r(),i(44,"span",10),s(45),r()(),i(46,"div",8)(47,"span",9),s(48,"Appointment Time:"),r(),i(49,"span",10),s(50),r()(),i(51,"div",8)(52,"span",9),s(53,"Total Applicants:"),r(),i(54,"span",10),s(55),r()()()()(),i(56,"div",4)(57,"h3",5),s(58,"Selected Services"),r(),i(59,"div",6)(60,"div",11),h(61,Ut,6,4,"div",12),r()()()(),i(62,"div",13)(63,"button",14),g("click",function(){return n.onBackToResults()}),s(64," \u2190 Back "),r(),i(65,"button",15),g("click",function(){return n.onConfirmBooking()}),s(66," Confirm "),r()()()),e&2&&(p("currentStep",3)("steps",n.stepTitles),l(15),v((n.personalData==null?null:n.personalData.forenames)+" "+(n.personalData==null?null:n.personalData.lastName)||"N/A"),l(5),v((n.personalData==null?null:n.personalData.idNumber)||"N/A"),l(5),v((n.personalData==null?null:n.personalData.phone)||"N/A"),l(5),v((n.personalData==null?null:n.personalData.email)||"N/A"),l(10),v(n.branchDisplayName),l(5),v(n.getFormattedDate(n.selectedSlot==null?null:n.selectedSlot.date)),l(5),v((n.selectedSlot==null?null:n.selectedSlot.time)||"N/A"),l(5),v(n.bookingPersons.length),l(6),p("ngForOf",n.bookingPersons))},dependencies:[A,T,I,R],styles:["[_nghost-%COMP%]{--DHAGreen: #016635;--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHAErrorColor: #ea2127;--DHADisabledButtonGray: #e6e6e6;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHAOffBlack: rgb(42, 41, 41);--DHADisabledTextGray: #c4c4c4}.step-title[_ngcontent-%COMP%]{text-align:center;color:var(--DHAGreen);margin-bottom:30px;font-size:2rem;font-weight:600;margin-top:0}.confirm-description[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:16px;margin:0 0 30px;line-height:1.5;font-weight:400}.section-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.booking-section[_ngcontent-%COMP%]{padding:12px;background:var(--DHAOffWhite);border-radius:6px;border:1px solid var(--DHABackGroundLightGray)}.booking-section-title[_ngcontent-%COMP%]{color:var(--DHAOffBlack);font-size:14px;font-weight:600;margin-bottom:8px;margin-top:0}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:8px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.info-label[_ngcontent-%COMP%]{font-size:10px;color:var(--DHATextGray);font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:12px;color:var(--DHATextGrayDark);font-weight:600;word-break:break-word}.services-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.person-services[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);margin-bottom:4px;margin-top:0;font-size:12px;font-weight:600}.services-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.service-item[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);padding:4px 8px;border-radius:12px;font-size:10px;font-weight:500;white-space:nowrap}.no-services[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:10px;font-style:italic}.confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;margin-top:20px;padding-top:16px;border-top:1px solid var(--DHABackGroundLightGray)}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{flex:1;padding:12px 20px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;text-align:center}.btn-primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite)}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--DHAOffBlack);transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]{background:var(--DHATextGrayDark);color:var(--DHAWhite)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHAOffBlack);transform:translateY(-1px)}@media (max-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%}.step-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:20px}}"]})};function Yt(a,t){a&1&&(N(),i(0,"svg",41),C(1,"rect",42),r())}function Kt(a,t){a&1&&(i(0,"button",43),s(1," \xD7 "),r())}function Qt(a,t){a&1&&(i(0,"div",44)(1,"span"),s(2,"No services selected"),r()())}function Zt(a,t){if(a&1){let e=x();i(0,"div",45)(1,"span"),s(2),r(),i(3,"button",46),g("click",function(){let o=m(e).$implicit,c=d().index,f=d(2);return u(f.onRemoveServiceFromPerson(c,o))}),s(4," \xD7 "),r()()}if(a&2){let e=t.$implicit;l(2),v(e.name)}}function Jt(a,t){if(a&1){let e=x();i(0,"div",26),g("click",function(){let o=m(e).index,c=d(2);return u(c.onApplicantCardClick(o))}),h(1,Yt,2,0,"svg",27),i(2,"div",28)(3,"div",29)(4,"span",30),s(5),r(),i(6,"span",31),s(7),r()(),i(8,"div",32),g("click",function(){let o=m(e).index,c=d(2);return u(c.showRemoveConfirmation(o))}),h(9,Kt,2,0,"button",33),r()(),i(10,"div",34)(11,"div",35)(12,"span",36),s(13,"Required Services:"),r(),i(14,"button",37),g("click",function(){let o=m(e).index,c=d(2);return u(c.onEditPersonServices(o))}),s(15),r()(),i(16,"div",38),h(17,Qt,3,0,"div",39)(18,Zt,5,1,"div",40),r()()()}if(a&2){let e=t.$implicit,n=d(2);_("primary-applicant",e.type==="Main Applicant")("delete-mode-highlight",n.isDeleteMode&&e.type!=="Main Applicant"),l(),p("ngIf",n.isDeleteMode&&e.type!=="Main Applicant"),l(4),B("",e.name," (",e.type,")"),l(2),v(e.idNumber),l(2),p("ngIf",n.bookingPersons.length>1&&e.type!=="Main Applicant"),l(6),y(" ",e.selectedServices.length===0?"Add Services":"Edit Services"," "),l(2),p("ngIf",e.selectedServices.length===0),l(),p("ngForOf",e.selectedServices)}}function Xt(a,t){if(a&1&&(i(0,"div",24),h(1,Jt,19,12,"div",25),r()),a&2){let e=d();l(),p("ngForOf",e.bookingPersons)}}var De=class a{stepTitles=["Services","Details","Timeslots","Confirm"];bookingPersons=[];showRemoveModal=!1;applicantToRemoveIndex=-1;isDeleteMode=!1;goBack=new k;proceedToLocation=new k;addPersonToBooking=new k;removePersonFromBooking=new k;clearAllPersons=new k;removeSpecificPerson=new k;editPersonServices=new k;removeServiceFromPerson=new k;ngOnChanges(t){t.bookingPersons&&!t.bookingPersons.firstChange&&this.resetDeleteMode(),this.isDeleteMode&&this.bookingPersons.length<=1&&this.resetDeleteMode()}hasAnyServicesSelected(){return this.bookingPersons.length>0&&this.bookingPersons.every(t=>t.selectedServices.length>0)}onGoBack(){this.goBack.emit()}onProceedToLocation(){this.proceedToLocation.emit()}onAddPersonToBooking(){this.resetDeleteMode(),this.addPersonToBooking.emit()}onRemovePersonFromBooking(){this.removePersonFromBooking.emit()}onClearAllPersons(){this.resetDeleteMode(),this.clearAllPersons.emit()}onRemoveSpecificPerson(t){this.removeSpecificPerson.emit(t)}onEditPersonServices(t){this.editPersonServices.emit(t)}onRemoveServiceFromPerson(t,e){this.removeServiceFromPerson.emit({personIndex:t,service:e})}showRemoveConfirmation(t){this.applicantToRemoveIndex=t,this.showRemoveModal=!0}closeRemoveModal(){this.showRemoveModal=!1,this.applicantToRemoveIndex=-1}confirmRemoveApplicant(){this.applicantToRemoveIndex>=0&&(this.removeSpecificPerson.emit(this.applicantToRemoveIndex),this.closeRemoveModal(),this.resetDeleteMode())}getApplicantToRemove(){return this.applicantToRemoveIndex>=0&&this.applicantToRemoveIndex<this.bookingPersons.length?this.bookingPersons[this.applicantToRemoveIndex]:null}toggleDeleteMode(){this.isDeleteMode=!this.isDeleteMode,this.isDeleteMode||this.closeRemoveModal()}resetDeleteMode(){this.isDeleteMode=!1,this.closeRemoveModal()}onApplicantCardClick(t){let e=this.bookingPersons[t];this.isDeleteMode&&e.type!=="Main Applicant"&&this.showRemoveConfirmation(t)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=P({type:a,selectors:[["app-booking-preview"]],inputs:{stepTitles:"stepTitles",bookingPersons:"bookingPersons"},outputs:{goBack:"goBack",proceedToLocation:"proceedToLocation",addPersonToBooking:"addPersonToBooking",removePersonFromBooking:"removePersonFromBooking",clearAllPersons:"clearAllPersons",removeSpecificPerson:"removeSpecificPerson",editPersonServices:"editPersonServices",removeServiceFromPerson:"removeServiceFromPerson"},features:[V],decls:51,vars:17,consts:[[3,"currentStep","steps"],[1,"step-title"],[1,"card-wrapper"],[1,"step-description"],[1,"add-applicant-menu"],[1,"header-info"],[1,"header-description"],[1,"applicants-header"],[1,"header-actions"],["type","button","title","Add an accompanying applicant to this booking",1,"action-btn","std",3,"click"],[1,"fas","fa-plus-circle"],[1,"btn-text"],["type","button",3,"click","disabled","title"],["type","button","title","Remove all additional applicants from this booking",1,"action-btn","danger",3,"click","disabled"],[1,"registered-applicants"],[1,"applicants-list"],["class","applicants-grid",4,"ngIf"],[1,"action-buttons"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary",3,"click","disabled"],["title","Remove Applicant","cancelText","Cancel","confirmText","Remove",3,"modalClosed","cancelClicked","confirmClicked","isOpen","closeOnOverlayClick","closeOnEscape","confirmDisabled"],[1,"remove-applicant-content"],[1,"warning-icon"],[1,"remove-details"],[1,"applicants-grid"],["class","applicant-card",3,"primary-applicant","delete-mode-highlight","click",4,"ngFor","ngForOf"],[1,"applicant-card",3,"click"],["class","wave-border","preserveAspectRatio","none",4,"ngIf"],[1,"applicant-header"],[1,"applicant-info"],[1,"applicant-name"],[1,"applicant-type"],[1,"touch-target",3,"click"],["type","button","class","remove-applicant-btn","title","Remove this applicant",4,"ngIf"],[1,"applicant-services"],[1,"services-header"],[1,"services-label"],["type","button","title","Edit services for this applicant",1,"edit-services-btn",3,"click"],[1,"person-services-preview"],["class","no-services",4,"ngIf"],["class","service-badge",4,"ngFor","ngForOf"],["preserveAspectRatio","none",1,"wave-border"],["x","0","y","0","width","100%","height","100%","rx","12","ry","12",1,"wave-path"],["type","button","title","Remove this applicant",1,"remove-applicant-btn"],[1,"no-services"],[1,"service-badge"],["type","button","title","Remove this service",1,"remove-service-btn",3,"click"]],template:function(e,n){if(e&1&&(i(0,"app-form-page-layout",0)(1,"h2",1),s(2,"Select Required Services"),r(),i(3,"div",2)(4,"h6",3),s(5),r(),i(6,"div",4)(7,"div",5)(8,"p",6),s(9," Manage additional applicants for this booking "),r()(),i(10,"div",7)(11,"div",8)(12,"button",9),g("click",function(){return n.onAddPersonToBooking()}),C(13,"span",10),i(14,"span",11),s(15,"Add Applicant"),r()(),i(16,"button",12),g("click",function(){return n.toggleDeleteMode()}),i(17,"span",11),s(18),r()(),i(19,"button",13),g("click",function(){return n.onClearAllPersons()}),i(20,"span",11),s(21,"Clear All"),r()()()()(),i(22,"div",14)(23,"p",6),s(24," Select required services for each applicant "),r(),i(25,"div",15),h(26,Xt,2,1,"div",16),r()(),i(27,"div",17)(28,"button",18),g("click",function(){return n.onGoBack()}),s(29," Back "),r(),i(30,"button",19),g("click",function(){return n.onProceedToLocation()}),s(31," Continue "),r()()()(),i(32,"app-ios-modal",20),g("modalClosed",function(){return n.closeRemoveModal()})("cancelClicked",function(){return n.closeRemoveModal()})("confirmClicked",function(){return n.confirmRemoveApplicant()}),i(33,"div",21)(34,"div",22),s(35,"\u26A0\uFE0F"),r(),i(36,"h3"),s(37),r(),i(38,"p"),s(39,"Are you sure you want to remove this applicant from your booking?"),r(),i(40,"div",23)(41,"p")(42,"strong"),s(43,"This will:"),r()(),i(44,"ul")(45,"li"),s(46),r(),i(47,"li"),s(48,"Delete all their selected services"),r(),i(49,"li"),s(50,"This action cannot be undone"),r()()()()()),e&2){let o,c;p("currentStep",0)("steps",n.stepTitles),l(5),y(" Manage booking applicants and their required services (",n.bookingPersons.length,") "),l(11),U("action-btn danger"+(n.isDeleteMode?" delete-mode-active":"")),p("disabled",n.bookingPersons.length<=1)("title",n.isDeleteMode?"Exit delete mode":"Remove an additional applicant from this booking"),l(2),v(n.isDeleteMode?"Exit Delete Mode":"Remove"),l(),p("disabled",n.bookingPersons.length<=1),l(7),p("ngIf",n.bookingPersons.length>0),l(4),p("disabled",!n.hasAnyServicesSelected()),l(2),p("isOpen",n.showRemoveModal)("closeOnOverlayClick",!0)("closeOnEscape",!0)("confirmDisabled",!1),l(5),y("Remove ",(o=n.getApplicantToRemove())==null?null:o.name,"?"),l(9),y("Remove ",(c=n.getApplicantToRemove())==null?null:c.name," from the booking")}},dependencies:[A,T,I,R,te],styles:["[_nghost-%COMP%]{--DHAGreen: #016635;--DHALightGreen: #018947;--DHALightGreenLight: #ddebe4;--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHAErrorColor: #ea2127;--DHADangerColor: #c41e3a;--DHADangerColorLight: #ebcad0;--DHADisabledButtonGray: #e6e6e6;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHAOffBlack: rgb(42, 41, 41);--DHADisabledTextGray: #c4c4c4}.card-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.step-description[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:16px;margin:0;line-height:1.5;font-weight:400}.step-title[_ngcontent-%COMP%]{text-align:center;color:var(--DHAGreen);margin-bottom:30px;font-size:2rem;font-weight:600;margin-top:0}.applicants-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.applicant-card[_ngcontent-%COMP%]{background:var(--DHAWhite);border:1px solid var(--DHABackGroundLightGray);border-radius:8px;padding:16px;box-shadow:0 2px 4px #0000000d}.applicant-card.primary-applicant[_ngcontent-%COMP%]{border-color:var(--DHAGreen);background:linear-gradient(135deg,#f8f9fa,#e8f5e8b8)}.applicant-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.applicant-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.applicant-name[_ngcontent-%COMP%]{font-weight:600;color:var(--DHATextGrayDark);font-size:14px}.applicant-type[_ngcontent-%COMP%]{font-size:12px;color:var(--DHATextGray)}.remove-applicant-btn[_ngcontent-%COMP%]{background:var(--DHAWhite);color:var(--DHADangerColor);border:none;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:24px;font-weight:700;transition:all .2s ease;margin-bottom:10.5px}.remove-applicant-btn[_ngcontent-%COMP%]:hover{background:#c41e3a;border:1px solid var(--DHADangerColor);transform:scale(1.1);color:var(--DHAWhite)}.applicant-services[_ngcontent-%COMP%]{border-top:1px solid var(--DHABackGroundLightGray);padding-top:12px}.services-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.services-label[_ngcontent-%COMP%]{font-size:12px;color:var(--DHATextGrayDark);font-weight:500}.edit-services-btn[_ngcontent-%COMP%]{background:none;color:var(--DHAGreen);border:none;padding:8px 16px;border-radius:4px;font-size:12px;font-weight:600;cursor:pointer;transition:all .3s ease;text-decoration:underline;text-underline-offset:2px}.edit-services-btn[_ngcontent-%COMP%]:hover{color:var(--DHALightGreen);background:#01894721}.person-services-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.no-services[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:12px;font-style:italic;padding:8px 0}.service-badge[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);border-radius:12px;padding:4px 8px;font-size:10px;font-weight:500;display:flex;align-items:center;gap:4px}.remove-service-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--DHAWhite);cursor:pointer;font-size:12px;font-weight:700;padding:0;width:16px;height:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.remove-service-btn[_ngcontent-%COMP%]:hover{background:#fff3}.header-description[_ngcontent-%COMP%]{color:var(--DHAOffBlack);font-size:16px;margin:0 0 12px;font-weight:600}.header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{border:none;border-radius:6px;padding:8px 12px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:4px;touch-action:manipulation}.action-btn.std[_ngcontent-%COMP%]{color:var(--DHAGreen);border:1px solid var(--DHAGreen);background:var(--DHAWhite)}.action-btn[_ngcontent-%COMP%]:first-child{margin-right:auto}.action-btn[_ngcontent-%COMP%]:nth-child(2), .action-btn[_ngcontent-%COMP%]:nth-child(3){flex:0;text-align:center}.action-btn.std[_ngcontent-%COMP%]:hover:not(:disabled){color:var(--DHALightGreen);background:#ddebe4;border-color:#ddebe4;transform:translateY(-1px)}.action-btn.white[_ngcontent-%COMP%]{background:var(--DHAWhite);color:var(--DHATextGrayDark);border:1px solid var(--DHABackGroundLightGray)}.action-btn.danger[_ngcontent-%COMP%]{background:var(--DHADangerColorLight);color:var(--DHADangerColor);border:1px solid var(--DHADangerColor)}.action-btn.danger[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHADangerColor);border-color:var(--DHADangerColor);transform:translateY(-1px);color:var(--DHAWhite)}.action-btn.danger[_ngcontent-%COMP%]:active:not(:disabled){background:var(--DHADangerColor);border-color:var(--DHADangerColor);transform:translateY(0);color:var(--DHAWhite)}.action-btn.danger.delete-mode-active[_ngcontent-%COMP%]{background:var(--DHADangerColor);color:var(--DHAWhite);border-color:var(--DHADangerColor)}.action-btn.danger.delete-mode-active[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHADangerColor);color:var(--DHAWhite);border-color:var(--DHADangerColor);transform:translateY(-1px)}.action-btn.white[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAOffWhite);border-color:var(--DHATextGray)}.action-btn[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);border:1px solid var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed;transform:none}.btn-text[_ngcontent-%COMP%]{font-size:12px;font-weight:500;white-space:nowrap}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;padding-top:16px;border-top:1px solid var(--DHABackGroundLightGray)}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{flex:1;padding:12px 20px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;text-align:center}.btn-primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAOffBlack);transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed;transform:none}.btn-secondary[_ngcontent-%COMP%]{background:var(--DHATextGrayDark);color:var(--DHAWhite)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHAOffBlack);transform:translateY(-1px)}@media (max-width: 768px){.step-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:20px}.header-description[_ngcontent-%COMP%]{font-size:14px;max-width:none}.applicant-header[_ngcontent-%COMP%]{gap:8px}.remove-applicant-btn[_ngcontent-%COMP%]{align-self:flex-end;margin-left:24px}.action-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.action-btn[_ngcontent-%COMP%]:nth-child(2), .action-btn[_ngcontent-%COMP%]:nth-child(3){flex:1;text-align:center}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%}}@media (hover: none) and (pointer: coarse){.action-btn.danger[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHADangerColorLight);color:var(--DHADangerColor);transform:none;border-color:var(--DHADangerColor)}.action-btn.danger.delete-mode-active[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHADangerColor);color:var(--DHAWhite);transform:none;border-color:var(--DHADangerColor)}.action-btn.std[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAWhite);color:var(--DHAGreen);transform:none;border-color:var(--DHAGreen)}.action-btn.white[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAWhite);color:var(--DHATextGrayDark);transform:none;border-color:var(--DHABackGroundLightGray)}}.remove-applicant-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.warning-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:20px}.remove-applicant-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHAGreen);font-size:1.5rem;margin-bottom:15px;font-weight:600}.remove-applicant-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:1rem;line-height:1.5;margin-bottom:20px}.remove-details[_ngcontent-%COMP%]{background:var(--DHAOffWhite);border-radius:8px;padding:15px;margin-top:20px;text-align:left}.remove-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:600;color:var(--DHAGreen)}.remove-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px;color:var(--DHATextGrayDark)}.remove-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;font-size:.9rem}.wave-border[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:calc(100% + 4px);height:calc(100% + 4px);pointer-events:none;border-radius:10px;z-index:1;overflow:hidden}.wave-path[_ngcontent-%COMP%]{fill:none;stroke:var(--DHADangerColor);stroke-width:3px;filter:drop-shadow(0 0 6px var(--DHADangerColorLight)) drop-shadow(0 0 12px var(--DHADangerColor));stroke-dasharray:15 5;stroke-dashoffset:0;animation:_ngcontent-%COMP%_waveMove 1.5s linear infinite;transform-origin:center}@keyframes _ngcontent-%COMP%_waveMove{0%{stroke-dashoffset:0}to{stroke-dashoffset:-20}}.delete-mode-highlight[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:all .3s ease}.delete-mode-highlight[_ngcontent-%COMP%]:hover{transform:scale(1.02)}"]})};var ke=class a{static instance;cleanupCallbacks=[];constructor(){return a.instance||(a.instance=this,this.setupGlobalCleanup()),a.instance}registerCleanup(t){this.cleanupCallbacks.push(t)}unregisterCleanup(t){let e=this.cleanupCallbacks.indexOf(t);e>-1&&this.cleanupCallbacks.splice(e,1)}forceCleanupAll(){this.cleanupCallbacks.forEach(t=>{try{t()}catch(e){console.warn("Error during modal cleanup:",e)}}),this.restoreBodyStyles()}restoreBodyStyles(){document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.classList.remove("modal-open")}setupGlobalCleanup(){document.addEventListener("visibilitychange",()=>{document.hidden&&this.forceCleanupAll()}),window.addEventListener("beforeunload",()=>{this.forceCleanupAll()}),window.addEventListener("popstate",()=>{this.forceCleanupAll()}),window.addEventListener("error",()=>{this.forceCleanupAll()}),window.addEventListener("unhandledrejection",()=>{this.forceCleanupAll()})}isBodyLocked(){return document.body.style.overflow==="hidden"||document.body.style.position==="fixed"||document.body.classList.contains("modal-open")}static emergencyCleanup(){new a().forceCleanupAll()}static \u0275fac=function(e){return new(e||a)};static \u0275prov=X({token:a,factory:a.\u0275fac,providedIn:"root"})};function tn(a,t){if(a&1){let e=x();i(0,"app-booking-preview",22),g("goBack",function(){m(e);let o=d();return u(o.goBack())})("proceedToLocation",function(){m(e);let o=d();return u(o.proceedToLocation())})("addPersonToBooking",function(){m(e);let o=d();return u(o.addPersonToBooking())})("removePersonFromBooking",function(){m(e);let o=d();return u(o.removePersonFromBooking())})("clearAllPersons",function(){m(e);let o=d();return u(o.clearAllPersons())})("removeSpecificPerson",function(o){m(e);let c=d();return u(c.removeSpecificPerson(o))})("editPersonServices",function(o){m(e);let c=d();return u(c.editPersonServices(o))})("removeServiceFromPerson",function(o){m(e);let c=d();return u(c.removeServiceFromPerson(o.personIndex,o.service))}),r()}if(a&2){let e=d();p("stepTitles",e.stepTitles)("bookingPersons",e.bookingPersons)}}function nn(a,t){a&1&&(i(0,"div"),s(1," ID number is required "),r())}function on(a,t){a&1&&(i(0,"div"),s(1," ID number must be exactly 13 digits "),r())}function rn(a,t){if(a&1&&(i(0,"div",27),h(1,nn,2,0,"div",17)(2,on,2,0,"div",17),r()),a&2){let e,n,o=d(2);l(),p("ngIf",(e=o.addApplicantForm.get("idNumber"))==null||e.errors==null?null:e.errors.required),l(),p("ngIf",(n=o.addApplicantForm.get("idNumber"))==null||n.errors==null?null:n.errors.pattern)}}function an(a,t){if(a&1&&(i(0,"div",23),C(1,"input",24),i(2,"label",25),s(3,"ID Number *"),r(),h(4,rn,3,2,"div",26),r()),a&2){let e,n,o=d();l(),_("has-value",(e=o.addApplicantForm.get("idNumber"))==null?null:e.value),l(3),p("ngIf",((n=o.addApplicantForm.get("idNumber"))==null?null:n.invalid)&&((n=o.addApplicantForm.get("idNumber"))==null?null:n.touched))}}function sn(a,t){a&1&&(i(0,"div"),s(1," Passport number is required "),r())}function ln(a,t){a&1&&(i(0,"div"),s(1," Please enter a valid passport number "),r())}function cn(a,t){if(a&1&&(i(0,"div",27),h(1,sn,2,0,"div",17)(2,ln,2,0,"div",17),r()),a&2){let e,n,o=d(2);l(),p("ngIf",(e=o.addApplicantForm.get("passportNumber"))==null||e.errors==null?null:e.errors.required),l(),p("ngIf",(n=o.addApplicantForm.get("passportNumber"))==null||n.errors==null?null:n.errors.pattern)}}function dn(a,t){if(a&1&&(i(0,"div",23),C(1,"input",28),i(2,"label",29),s(3,"Passport Number *"),r(),h(4,cn,3,2,"div",26),r()),a&2){let e,n,o=d();l(),_("has-value",(e=o.addApplicantForm.get("passportNumber"))==null?null:e.value),l(3),p("ngIf",((n=o.addApplicantForm.get("passportNumber"))==null?null:n.invalid)&&((n=o.addApplicantForm.get("passportNumber"))==null?null:n.touched))}}function pn(a,t){a&1&&(i(0,"div"),s(1," Forenames are required "),r())}function mn(a,t){a&1&&(i(0,"div"),s(1," Forenames must be at least 2 characters "),r())}function un(a,t){if(a&1&&(i(0,"div",27),h(1,pn,2,0,"div",17)(2,mn,2,0,"div",17),r()),a&2){let e,n,o=d(2);l(),p("ngIf",(e=o.addApplicantForm.get("forenames"))==null||e.errors==null?null:e.errors.required),l(),p("ngIf",(n=o.addApplicantForm.get("forenames"))==null||n.errors==null?null:n.errors.minlength)}}function gn(a,t){a&1&&(i(0,"div"),s(1," Last name is required "),r())}function hn(a,t){a&1&&(i(0,"div"),s(1," Last name must be at least 2 characters "),r())}function fn(a,t){if(a&1&&(i(0,"div",27),h(1,gn,2,0,"div",17)(2,hn,2,0,"div",17),r()),a&2){let e,n,o=d(2);l(),p("ngIf",(e=o.addApplicantForm.get("lastName"))==null||e.errors==null?null:e.errors.required),l(),p("ngIf",(n=o.addApplicantForm.get("lastName"))==null||n.errors==null?null:n.errors.minlength)}}function vn(a,t){if(a&1&&(i(0,"div")(1,"div",23),C(2,"input",30),i(3,"label",31),s(4,"Forenames *"),r(),h(5,un,3,2,"div",26),r(),i(6,"div",23),C(7,"input",32),i(8,"label",33),s(9,"Last Name *"),r(),h(10,fn,3,2,"div",26),r()()),a&2){let e,n,o,c,f=d();l(2),_("has-value",(e=f.addApplicantForm.get("forenames"))==null?null:e.value),l(3),p("ngIf",((n=f.addApplicantForm.get("forenames"))==null?null:n.invalid)&&((n=f.addApplicantForm.get("forenames"))==null?null:n.touched)),l(2),_("has-value",(o=f.addApplicantForm.get("lastName"))==null?null:o.value),l(3),p("ngIf",((c=f.addApplicantForm.get("lastName"))==null?null:c.invalid)&&((c=f.addApplicantForm.get("lastName"))==null?null:c.touched))}}function _n(a,t){if(a&1){let e=x();i(0,"div",45),g("click",function(){let o=m(e).$implicit,c=d(2);return u(c.togglePersonService(o.id))}),i(1,"label",46)(2,"input",47),g("change",function(){let o=m(e).$implicit,c=d(2);return u(c.togglePersonService(o.id))}),r(),C(3,"span",48),r(),i(4,"div",49)(5,"div",50),s(6),r(),i(7,"div",51),s(8),r()()()}if(a&2){let e=t.$implicit;l(2),p("checked",e.checked),l(4),v(e.name),l(2),y(" ",e.description," ")}}function bn(a,t){if(a&1){let e=x();i(0,"div",34),g("click",function(){m(e);let o=d();return u(o.closePersonServiceModal())}),i(1,"div",35),g("click",function(o){return m(e),u(o.stopPropagation())}),i(2,"div",36)(3,"h3"),s(4),r(),i(5,"button",37),g("click",function(){m(e);let o=d();return u(o.closePersonServiceModal())}),s(6," \xD7 "),r()(),i(7,"div",38)(8,"p",39),s(9," Choose the services required for this applicant: "),r(),i(10,"div",40),h(11,_n,9,3,"div",41),r()(),i(12,"div",42)(13,"button",43),g("click",function(){m(e);let o=d();return u(o.closePersonServiceModal())}),s(14," Cancel "),r(),i(15,"button",44),g("click",function(){m(e);let o=d();return u(o.savePersonServices())}),s(16," Save "),r()()()()}if(a&2){let e=d();l(4),y(" Select Services for ",e.bookingPersons[e.currentPersonIndex].name.split(" ")[0]," "),l(7),p("ngForOf",e.tempPersonServices)}}function xn(a,t){if(a&1){let e=x();i(0,"app-appointment-form",52),g("formSubmitted",function(o){m(e);let c=d();return u(c.onFormSubmitted(o))})("goBackRequested",function(){m(e);let o=d();return u(o.onAppointmentFormBackRequested())}),r()}if(a&2){let e=d();p("stepTitles",e.stepTitles)("selectedServices",e.selectedServices)("bookingPersons",e.bookingPersons)("searchCriteria",e.searchCriteria)}}function Cn(a,t){if(a&1){let e=x();i(0,"app-appointment-results",53),g("editSearchRequested",function(){m(e);let o=d();return u(o.onEditSearchRequested())})("slotSelected",function(o){m(e);let c=d();return u(c.onSlotSelected(o))})("alternativeBranchSelected",function(o){m(e);let c=d();return u(c.onAlternativeBranchSelected(o))}),r()}if(a&2){let e=d();p("stepTitles",e.stepTitles)("searchCriteria",e.searchCriteria)}}function yn(a,t){if(a&1){let e=x();i(0,"app-confirm-booking",54),g("backToResults",function(){m(e);let o=d();return u(o.goBackToResults())})("confirmBooking",function(){m(e);let o=d();return u(o.confirmBooking())}),r()}if(a&2){let e=d();p("stepTitles",e.stepTitles)("personalData",e.personalData)("bookingPersons",e.bookingPersons)("selectedSlot",e.selectedSlot)("branchDisplayName",e.getBranchDisplayName())}}function Dn(a,t){if(a&1&&(i(0,"div",88)(1,"span",50),s(2),r(),i(3,"span",89),s(4),r()()),a&2){let e=t.$implicit,n=d(3);l(2),v(e.name),l(2),v(n.getServicePriceDescription(e))}}function kn(a,t){if(a&1&&(i(0,"div",83)(1,"div",84)(2,"span",85),s(3),r(),i(4,"span",86),s(5),r()(),i(6,"div",40),h(7,Dn,5,2,"div",87),r()()),a&2){let e=t.$implicit;l(3),B("",e.name," (",e.type,")"),l(2),v(e.idNumber),l(2),p("ngForOf",e.selectedServices)}}function wn(a,t){if(a&1&&(i(0,"div",94)(1,"span",50),s(2),r(),i(3,"span",89),s(4),r()()),a&2){let e=t.$implicit,n=d(3);l(2),v(e.name),l(2),v(n.getServicePriceDescription(e))}}function Sn(a,t){if(a&1&&(i(0,"div",90)(1,"div",91),s(2),r(),i(3,"div",92),h(4,wn,5,2,"div",93),r()()),a&2){let e=t.$implicit;l(2),v(e.name),l(2),p("ngForOf",e.selectedServices)}}function Pn(a,t){if(a&1){let e=x();i(0,"div",34),g("click",function(){m(e);let o=d();return u(o.closeBookingSuccessModal())}),i(1,"div",55),g("click",function(o){return m(e),u(o.stopPropagation())}),i(2,"div",36)(3,"h3"),s(4,"Booking Confirmed Successfully!"),r(),i(5,"button",37),g("click",function(){m(e);let o=d();return u(o.closeBookingSuccessModal())}),s(6," \xD7 "),r()(),i(7,"div",56)(8,"div",57)(9,"div",58),s(10,"Your Booking Reference"),r(),i(11,"div",59)(12,"div",60),s(13),r(),i(14,"button",61),g("click",function(){m(e);let o=d();return u(o.copyBookingReference())}),C(15,"i"),s(16),r()(),i(17,"div",62),s(18," Please save this reference number for your records "),r()(),i(19,"div",63)(20,"div",64)(21,"div",65),g("click",function(){m(e);let o=d();return u(o.toggleSection("appointment"))}),i(22,"span",66),s(23,"\u{1F4C5} Appointment Details"),r(),i(24,"span",67),s(25,"\u25BC"),r()(),i(26,"div",68)(27,"div",69)(28,"div",70)(29,"label"),s(30,"Branch"),r(),i(31,"span"),s(32),r()(),i(33,"div",70)(34,"label"),s(35,"Appointment Date"),r(),i(36,"span"),s(37),r()(),i(38,"div",70)(39,"label"),s(40,"Appointment Time"),r(),i(41,"span"),s(42),r()(),i(43,"div",70)(44,"label"),s(45,"Duration"),r(),i(46,"span"),s(47,"1 Hour"),r()()()()(),i(48,"div",64)(49,"div",65),g("click",function(){m(e);let o=d();return u(o.toggleSection("personal"))}),i(50,"span",66),s(51,"\u{1F464} Personal Information"),r(),i(52,"span",67),s(53,"\u25BC"),r()(),i(54,"div",68)(55,"div",69)(56,"div",70)(57,"label"),s(58,"Full Name"),r(),i(59,"span"),s(60),r()(),i(61,"div",70)(62,"label"),s(63,"ID Number"),r(),i(64,"span"),s(65),r()(),i(66,"div",70)(67,"label"),s(68,"Email"),r(),i(69,"span"),s(70),r()(),i(71,"div",70)(72,"label"),s(73,"Phone"),r(),i(74,"span"),s(75),r()()()()(),i(76,"div",64)(77,"div",65),g("click",function(){m(e);let o=d();return u(o.toggleSection("applicants"))}),i(78,"span",66),s(79),r(),i(80,"span",67),s(81,"\u25BC"),r()(),i(82,"div",68)(83,"div",71),h(84,kn,8,4,"div",72),r()()(),i(85,"div",64)(86,"div",65),g("click",function(){m(e);let o=d();return u(o.toggleSection("summary"))}),i(87,"span",66),s(88,"\u{1F4B0} Booking Summary"),r(),i(89,"span",67),s(90,"\u25BC"),r()(),i(91,"div",68)(92,"div",73)(93,"div",74)(94,"h4",75),s(95,"Service Breakdown"),r(),i(96,"div",76),h(97,Sn,5,2,"div",77),r()(),i(98,"div",78)(99,"div",79)(100,"span",80),s(101,"Total Services"),r(),i(102,"span",81),s(103),r()(),i(104,"div",82)(105,"span",80),s(106,"Total Amount"),r(),i(107,"span",81),s(108),r()(),i(109,"div",79)(110,"span",80),s(111,"Booking Date"),r(),i(112,"span",81),s(113),r()()()()()()()(),i(114,"div",42)(115,"button",44),g("click",function(){m(e);let o=d();return u(o.closeBookingSuccessModal())}),s(116," Done "),r()()()()}if(a&2){let e=d();l(13),v(e.bookingReference),l(),U("copy-button"+(e.isCopied?" copied":"")),l(),U(e.copyButtonIcon),l(),y(" ",e.copyButtonText," "),l(8),_("expanded",e.expandedSections.appointment),l(2),_("expanded",e.expandedSections.appointment),l(6),v(e.getBranchDisplayName()),l(5),v(e.getFormattedDate(e.selectedSlot==null?null:e.selectedSlot.date)),l(5),v((e.selectedSlot==null?null:e.selectedSlot.time)||"N/A"),l(10),_("expanded",e.expandedSections.personal),l(2),_("expanded",e.expandedSections.personal),l(6),B("",e.personalData==null?null:e.personalData.forenames," ",e.personalData==null?null:e.personalData.lastName,""),l(5),v(e.personalData==null?null:e.personalData.idNumber),l(5),v(e.personalData==null?null:e.personalData.email),l(5),v(e.personalData==null?null:e.personalData.phone),l(4),y("\u{1F465} Applicants & Services (",e.bookingPersons.length,")"),l(),_("expanded",e.expandedSections.applicants),l(2),_("expanded",e.expandedSections.applicants),l(2),p("ngForOf",e.bookingPersons),l(5),_("expanded",e.expandedSections.summary),l(2),_("expanded",e.expandedSections.summary),l(6),p("ngForOf",e.bookingPersons),l(6),v(e.getTotalServices()),l(5),y("R",e.getTotalAmount(),""),l(5),v(e.getFormattedDate(e.getCurrentDate()))}}var je=class a{constructor(t,e,n){this.router=t;this.fb=e;this.modalCleanupService=n;this.addApplicantForm=this.fb.group({applicantType:["",S.required],validationType:["",S.required],idNumber:[""],passportNumber:[""],forenames:[""],lastName:[""]})}currentStep="preview";stepTitles=["Services","Details","Timeslots","Confirm"];showServiceModal=!1;showBookingSuccessModal=!1;bookingReference="";copyButtonText="Copy";copyButtonIcon="fas fa-clone";isCopied=!1;expandedSections={appointment:!0,personal:!1,applicants:!1,summary:!1};searchCriteria=null;selectedSlot=null;personalData=null;selectedServices=[];bookingPersons=[];showPersonServiceModal=!1;currentPersonIndex=-1;tempPersonServices=[];showAddApplicantModal=!1;addApplicantForm;availableServices=[{id:"id-card",name:"Smart ID Card Application",description:"Apply for a new South African smart ID card (Free for first time, R140 for replacement)",checked:!1,price:140},{id:"passport",name:"Passport Application",description:"Apply for a new South African passport (R600 for 32 pages, R1200 for 48 pages)",checked:!1,price:600},{id:"ehome-affairs",name:"eHomeAffairs Application",description:"Schedule an appointment for your eHomeAffairs application (Prepaid - R0)",checked:!1,price:0},{id:"collection",name:"Collection of ID or Passport",description:"Collect your smart ID or Passport (Prepaid - R0)",checked:!1,price:0}];closeBookingSuccessModal(){this.showBookingSuccessModal=!1,this.router.navigate(["/menu"])}generateBookingReference(){let t=Date.now().toString(36).toUpperCase(),e=Math.random().toString(36).substring(2,8).toUpperCase();return`DHA-${t}-${e}`}copyBookingReference(){this.bookingReference&&navigator.clipboard.writeText(this.bookingReference).then(()=>{this.showCopySuccess(),console.log("Booking reference copied to clipboard")}).catch(t=>{console.error("Failed to copy booking reference: ",t),this.fallbackCopyTextToClipboard(this.bookingReference)})}showCopySuccess(){this.copyButtonText="Copied!",this.copyButtonIcon="fas fa-check",this.isCopied=!0,setTimeout(()=>{this.copyButtonText="Copy",this.copyButtonIcon="fas fa-clone",this.isCopied=!1},2e3)}fallbackCopyTextToClipboard(t){let e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),this.showCopySuccess(),console.log("Booking reference copied to clipboard (fallback)")}catch(n){console.error("Fallback copy failed: ",n)}document.body.removeChild(e)}toggleSection(t){this.expandedSections[t]=!this.expandedSections[t]}getTotalServices(){return this.bookingPersons.reduce((t,e)=>t+e.selectedServices.length,0)}getTotalAmount(){return this.bookingPersons.reduce((t,e)=>t+e.selectedServices.reduce((n,o)=>n+this.getServicePrice(o),0),0)}getServicePrice(t){switch(t.id){case"passport":return 600;case"id-card":return 140;case"ehome-affairs":return 0;case"collection":return 0;default:return t.price||0}}getServicePriceDescription(t){switch(t.id){case"passport":return"R600 (32 pages) / R1200 (48 pages)";case"id-card":return"R140 (replacement) / Free (first time)";case"ehome-affairs":return"R0 (prepaid)";case"collection":return"R0 (prepaid)";default:return`R${t.price||0}`}}getCurrentDate(){return new Date().toISOString()}capitaliseWords(t){return t?t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):""}ngOnInit(){window.scrollTo(0,0),this.modalCleanupService.registerCleanup(()=>this.cleanupAllModals());let t=sessionStorage.getItem("personalData");t?(this.personalData=JSON.parse(t),this.bookingPersons=[{id:"self",name:`${this.capitaliseWords(this.personalData.forenames)} ${this.capitaliseWords(this.personalData.lastName)}`,type:"Main Applicant",idNumber:this.personalData.idNumber,selectedServices:[...this.selectedServices]}]):this.router.navigate(["/menu"]);let e=sessionStorage.getItem("selectedServices");e&&(this.selectedServices=JSON.parse(e),this.updateAvailableServices())}ngOnDestroy(){this.cleanupAllModals(),this.modalCleanupService.unregisterCleanup(()=>this.cleanupAllModals())}cleanupAllModals(){this.showAddApplicantModal=!1,this.showServiceModal=!1,this.showPersonServiceModal=!1,this.restoreBodyStyles()}restoreBodyStyles(){te.forceCleanup()}openServiceModal(){this.showServiceModal=!0}closeServiceModal(){this.showServiceModal=!1}toggleService(t){t.checked=!t.checked}saveServices(){this.selectedServices=this.availableServices.filter(t=>t.checked),sessionStorage.setItem("selectedServices",JSON.stringify(this.selectedServices)),this.closeServiceModal()}removeService(t){this.selectedServices=this.selectedServices.filter(n=>n.id!==t.id);let e=this.availableServices.find(n=>n.id===t.id);e&&(e.checked=!1),sessionStorage.setItem("selectedServices",JSON.stringify(this.selectedServices))}updateAvailableServices(){this.availableServices.forEach(t=>{t.checked=this.selectedServices.some(e=>e.id===t.id)})}proceedToLocation(){this.selectedServices=[],this.bookingPersons.forEach(t=>{t.selectedServices.forEach(e=>{this.selectedServices.some(n=>n.id===e.id)||this.selectedServices.push(e)})}),this.currentStep="form",window.scrollTo(0,0)}onFormSubmitted(t){this.searchCriteria={branch:t.branch,startDate:t.startDate,endDate:t.endDate,services:this.selectedServices.map(e=>e.name)},this.currentStep="results",window.scrollTo(0,0)}onEditSearchRequested(){this.currentStep="form",window.scrollTo(0,0)}onAppointmentFormBackRequested(){this.currentStep="preview"}onSlotSelected(t){this.selectedSlot=t,this.currentStep="confirm",window.scrollTo(0,0)}onAlternativeBranchSelected(t){this.searchCriteria&&(this.searchCriteria=Q($({},this.searchCriteria),{branch:t}),this.currentStep="results",window.scrollTo(0,0))}goBackToResults(){this.currentStep="results",window.scrollTo(0,0)}confirmBooking(){this.clearExistingAppointments();let t={id:this.personalData.idNumber,personalData:this.personalData,selectedSlot:this.selectedSlot,bookingPersons:this.bookingPersons,searchCriteria:this.searchCriteria,confirmedAt:new Date().toISOString()};sessionStorage.setItem("confirmedAppointment",JSON.stringify(t)),sessionStorage.setItem(`appointment_${this.personalData.idNumber}`,JSON.stringify(t)),this.bookingReference=this.generateBookingReference(),this.showBookingSuccessModal=!0}clearExistingAppointments(){sessionStorage.removeItem("confirmedAppointment"),this.personalData?.idNumber&&sessionStorage.removeItem(`appointment_${this.personalData.idNumber}`)}getFormattedDate(t){return t?new Date(t).toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"}getBranchDisplayName(){if(!this.searchCriteria?.branch)return"N/A";let t=this.searchCriteria.branch;return t==="ct-tygervalley-main"?"Tygervalley Main Branch":t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())}goBack(){this.router.navigate(["/menu"])}goHome(){this.router.navigate(["/"])}getBookingStep(){return this.currentStep==="preview"?0:this.currentStep==="form"?1:0}addPersonToBooking(){this.addApplicantForm.reset(),this.showAddApplicantModal=!0}removePersonFromBooking(){if(this.bookingPersons.length<=1)return;let t=this.bookingPersons.map((o,c)=>`${c+1}. ${o.name} (${o.type})`).join(`
`),e=prompt(`Select person to remove:
${t}

Enter number (1-${this.bookingPersons.length}):`),n=parseInt(e||"0")-1;n>=0&&n<this.bookingPersons.length&&this.bookingPersons.splice(n,1)}removeSpecificPerson(t){this.bookingPersons.length>1&&t>=0&&t<this.bookingPersons.length&&this.bookingPersons.splice(t,1)}clearAllPersons(){this.bookingPersons.length<=1||confirm("Are you sure you want to remove all additional applicants from this booking?")&&(this.bookingPersons=this.bookingPersons.filter(t=>t.type==="Main Applicant"))}editPersonServices(t){let e=this.bookingPersons[t];if(!e)return;let n=this.availableServices.map(o=>Q($({},o),{checked:e.selectedServices.some(c=>c.id===o.id)}));this.showPersonServiceModal=!0,this.currentPersonIndex=t,this.tempPersonServices=[...n]}savePersonServices(){if(this.currentPersonIndex>=0&&this.currentPersonIndex<this.bookingPersons.length){let t=this.tempPersonServices.filter(e=>e.checked);this.bookingPersons[this.currentPersonIndex].selectedServices=t}this.closePersonServiceModal()}closePersonServiceModal(){this.showPersonServiceModal=!1,this.currentPersonIndex=-1,this.tempPersonServices=[]}togglePersonService(t){let e=this.tempPersonServices.find(n=>n.id===t);e&&(e.checked=!e.checked)}removeServiceFromPerson(t,e){if(t>=0&&t<this.bookingPersons.length){let n=this.bookingPersons[t];n.selectedServices=n.selectedServices.filter(o=>o.id!==e.id)}}hasAnyServicesSelected(){return this.bookingPersons.length>0&&this.bookingPersons.every(t=>t.selectedServices.length>0)}closeAddApplicantModal(){this.showAddApplicantModal=!1,this.addApplicantForm.reset()}onValidationTypeChange(t){this.addApplicantForm.get("idNumber")?.setValue(""),this.addApplicantForm.get("passportNumber")?.setValue(""),this.addApplicantForm.get("forenames")?.setValue(""),this.addApplicantForm.get("lastName")?.setValue(""),this.addApplicantForm.get("idNumber")?.clearValidators(),this.addApplicantForm.get("passportNumber")?.clearValidators(),this.addApplicantForm.get("forenames")?.clearValidators(),this.addApplicantForm.get("lastName")?.clearValidators(),t==="id"?this.addApplicantForm.get("idNumber")?.setValidators([S.required,S.pattern(/^\d{13}$/)]):t==="passport"?this.addApplicantForm.get("passportNumber")?.setValidators([S.required,S.pattern(/^[A-Z0-9]{6,12}$/)]):t==="names"&&(this.addApplicantForm.get("forenames")?.setValidators([S.required,S.minLength(2)]),this.addApplicantForm.get("lastName")?.setValidators([S.required,S.minLength(2)])),this.addApplicantForm.get("idNumber")?.updateValueAndValidity(),this.addApplicantForm.get("passportNumber")?.updateValueAndValidity(),this.addApplicantForm.get("forenames")?.updateValueAndValidity(),this.addApplicantForm.get("lastName")?.updateValueAndValidity()}isValidationTypeSelected(t){return this.addApplicantForm.get("validationType")?.value===t}saveNewApplicant(){if(this.addApplicantForm.valid){let t=this.addApplicantForm.value,e,n;t.validationType==="id"?(e=t.idNumber,n=t.idNumber):t.validationType==="passport"?(e=t.passportNumber,n=void 0):t.validationType==="names"?(e=`${t.forenames} ${t.lastName}`.trim(),n=void 0):(e="Unknown",n=void 0);let o={id:Date.now().toString(),name:this.capitaliseWords(e),type:t.applicantType,idNumber:n,selectedServices:[]};this.bookingPersons.push(o),this.closeAddApplicantModal()}}static \u0275fac=function(e){return new(e||a)(H(de),H(he),H(ke))};static \u0275cmp=P({type:a,selectors:[["app-book-service"]],decls:50,vars:14,consts:[[1,"book-service-container"],[1,"main-content"],[3,"stepTitles","bookingPersons","goBack","proceedToLocation","addPersonToBooking","removePersonFromBooking","clearAllPersons","removeSpecificPerson","editPersonServices","removeServiceFromPerson",4,"ngIf"],["title","Add New Applicant","cancelText","Cancel","confirmText","Add",3,"modalClosed","cancelClicked","confirmClicked","isOpen","closeOnOverlayClick","closeOnEscape","confirmDisabled"],["autocomplete","off",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"radio-group"],[1,"radio-option"],["type","radio","formControlName","applicantType","value","Child","name","applicantType"],[1,"radio-label"],["type","radio","formControlName","applicantType","value","Friend","name","applicantType"],["type","radio","formControlName","applicantType","value","Family Member","name","applicantType"],["type","radio","formControlName","applicantType","value","Other","name","applicantType"],["type","radio","formControlName","validationType","value","id","name","validationType",3,"change"],["type","radio","formControlName","validationType","value","passport","name","validationType",3,"change"],["type","radio","formControlName","validationType","value","names","name","validationType",3,"change"],["class","form-group floating-label-group",4,"ngIf"],[4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"stepTitles","selectedServices","bookingPersons","searchCriteria","formSubmitted","goBackRequested",4,"ngIf"],[3,"stepTitles","searchCriteria","editSearchRequested","slotSelected","alternativeBranchSelected",4,"ngIf"],[3,"stepTitles","personalData","bookingPersons","selectedSlot","branchDisplayName","backToResults","confirmBooking",4,"ngIf"],[3,"goBack","proceedToLocation","addPersonToBooking","removePersonFromBooking","clearAllPersons","removeSpecificPerson","editPersonServices","removeServiceFromPerson","stepTitles","bookingPersons"],[1,"form-group","floating-label-group"],["type","text","id","idNumber","formControlName","idNumber","maxlength","13","autocomplete","username",1,"floating-input"],["for","idNumber",1,"floating-label"],["class","error-message",4,"ngIf"],[1,"error-message"],["type","text","id","passportNumber","formControlName","passportNumber","maxlength","12","autocomplete","off",1,"floating-input"],["for","passportNumber",1,"floating-label"],["type","text","id","forenames","formControlName","forenames","autocomplete","given-name",1,"floating-input"],["for","forenames",1,"floating-label"],["type","text","id","lastName","formControlName","lastName","autocomplete","family-name",1,"floating-input"],["for","lastName",1,"floating-label"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["type","button",1,"modal-close",3,"click"],[1,"modal-body"],[1,"modal-description"],[1,"services-list"],["class","service-item",3,"click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary",3,"click"],[1,"service-item",3,"click"],[1,"service-checkbox"],["type","checkbox",3,"change","checked"],[1,"checkmark"],[1,"service-details"],[1,"service-name"],[1,"service-description"],[3,"formSubmitted","goBackRequested","stepTitles","selectedServices","bookingPersons","searchCriteria"],[3,"editSearchRequested","slotSelected","alternativeBranchSelected","stepTitles","searchCriteria"],[3,"backToResults","confirmBooking","stepTitles","personalData","bookingPersons","selectedSlot","branchDisplayName"],[1,"modal-content","booking-success-modal",3,"click"],[1,"modal-body","confirmed"],[1,"booking-reference-section"],[1,"reference-label"],[1,"reference-number-container"],[1,"reference-number"],["title","Copy booking reference","aria-label","Copy booking reference to clipboard",3,"click"],[1,"reference-note"],[1,"expandable-sections"],[1,"expandable-section"],[1,"section-header",3,"click"],[1,"section-title"],[1,"expand-icon"],[1,"section-content"],[1,"details-grid"],[1,"detail-item"],[1,"applicants-list"],["class","applicant-item",4,"ngFor","ngForOf"],[1,"summary-details"],[1,"service-breakdown"],[1,"breakdown-title"],[1,"breakdown-list"],["class","person-breakdown",4,"ngFor","ngForOf"],[1,"summary-totals"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"summary-item","total-amount"],[1,"applicant-item"],[1,"applicant-header"],[1,"applicant-name"],[1,"applicant-id"],["class","service-item",4,"ngFor","ngForOf"],[1,"service-item"],[1,"service-price"],[1,"person-breakdown"],[1,"person-name"],[1,"person-services"],["class","service-breakdown-item",4,"ngFor","ngForOf"],[1,"service-breakdown-item"]],template:function(e,n){e&1&&(i(0,"div",0),C(1,"app-navbar"),i(2,"div",1),h(3,tn,1,2,"app-booking-preview",2),i(4,"app-ios-modal",3),g("modalClosed",function(){return n.closeAddApplicantModal()})("cancelClicked",function(){return n.closeAddApplicantModal()})("confirmClicked",function(){return n.saveNewApplicant()}),i(5,"form",4),g("ngSubmit",function(){return n.saveNewApplicant()}),i(6,"div",5)(7,"label"),s(8,"Applicant Type *"),r(),i(9,"div",6)(10,"label",7),C(11,"input",8),i(12,"span",9),s(13,"Child"),r()(),i(14,"label",7),C(15,"input",10),i(16,"span",9),s(17,"Friend"),r()(),i(18,"label",7),C(19,"input",11),i(20,"span",9),s(21,"Family Member"),r()(),i(22,"label",7),C(23,"input",12),i(24,"span",9),s(25,"Other"),r()()()(),i(26,"div",5)(27,"label"),s(28,"Validation Method *"),r(),i(29,"div",6)(30,"label",7)(31,"input",13),g("change",function(){return n.onValidationTypeChange("id")}),r(),i(32,"span",9),s(33,"ID Number"),r()(),i(34,"label",7)(35,"input",14),g("change",function(){return n.onValidationTypeChange("passport")}),r(),i(36,"span",9),s(37,"Passport Number"),r()(),i(38,"label",7)(39,"input",15),g("change",function(){return n.onValidationTypeChange("names")}),r(),i(40,"span",9),s(41,"Full Names"),r()()()(),h(42,an,5,3,"div",16)(43,dn,5,3,"div",16)(44,vn,11,6,"div",17),r()(),h(45,bn,17,2,"div",18)(46,xn,1,4,"app-appointment-form",19)(47,Cn,1,2,"app-appointment-results",20)(48,yn,1,5,"app-confirm-booking",21)(49,Pn,117,36,"div",18),r()()),e&2&&(l(3),p("ngIf",n.currentStep==="preview"),l(),p("isOpen",n.showAddApplicantModal)("closeOnOverlayClick",!0)("closeOnEscape",!0)("confirmDisabled",n.addApplicantForm.invalid),l(),p("formGroup",n.addApplicantForm),l(37),p("ngIf",n.isValidationTypeSelected("id")),l(),p("ngIf",n.isValidationTypeSelected("passport")),l(),p("ngIf",n.isValidationTypeSelected("names")),l(),p("ngIf",n.showPersonServiceModal),l(),p("ngIf",n.currentStep==="form"),l(),p("ngIf",n.currentStep==="results"),l(),p("ngIf",n.currentStep==="confirm"),l(),p("ngIf",n.showBookingSuccessModal))},dependencies:[A,T,I,z,ge,pe,Ge,me,Y,Ve,K,Le,be,Ce,ze,te,ye,De],styles:['[_nghost-%COMP%]{--DHAGreen: #016635;--DHAHoverGreen: rgb(1, 73, 38);--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHALightOrangeLight: rgba(243, 126, 31, .2);--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHAErrorColor: #ea2127;--DHADisabledButtonGray: #e6e6e6;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHAOffBlack: rgb(51, 51, 51);--DHADisabledTextGray: #c4c4c4}.book-service-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,var(--DHAOffWhite) 0%,#e8f5e8 100%)}.top-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:#f5f5f5;border-bottom:2px solid var(--DHAGreen);z-index:1000;display:flex;align-items:center;padding:0 20px;box-shadow:0 2px 10px #0000001a}.top-bar-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:1200px;margin:0 auto;padding:20px}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.logo-icon[_ngcontent-%COMP%]{height:60px;width:auto;object-fit:contain}.logo-text[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--DHATextGrayDark)}.btn-home-top[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);border:none;padding:8px 16px;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-home-top[_ngcontent-%COMP%]:hover{background:var(--DHAOrange);transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;min-height:calc(100vh - 73px);width:100vw;box-sizing:border-box}.preview-description[_ngcontent-%COMP%]{color:var(--DHATextGray);text-align:center;margin-bottom:20px;font-size:14px}.user-details-section[_ngcontent-%COMP%], .services-section[_ngcontent-%COMP%]{margin-bottom:20px}.user-details-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .services-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:12px;margin-bottom:10px;border-bottom:1px solid var(--DHAGreen);padding-bottom:6px}.details-grid[_ngcontent-%COMP%]{display:grid;gap:8px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid var(--DHABackGroundLightGray)}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--DHATextGrayDark);font-size:12px}.detail-value[_ngcontent-%COMP%]{color:var(--DHAGreen);font-weight:500;font-size:10px;text-align:right;word-break:break-all}.services-preview[_ngcontent-%COMP%]{background:var(--DHAOffWhite);border:1px solid var(--DHABackGroundLightGray);border-radius:8px;padding:15px}.no-services[_ngcontent-%COMP%]{text-align:center;color:var(--DHATextGray);margin-bottom:10px;font-size:13px}.services-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.service-badge[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);padding:2px 8px;border-radius:16px;display:flex;align-items:center;gap:6px;font-size:10px}.service-badge[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--DHAWhite);font-size:18px;cursor:pointer;padding:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .2s}.service-badge[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#fff3}.btn-add-service[_ngcontent-%COMP%]{background:none;color:var(--DHAOrange);border:none;padding:8px 16px 0;border-radius:0;font-size:13px;font-weight:500;cursor:pointer;transition:all .3s ease;width:auto;display:block;margin:0 auto;text-decoration:underline;text-underline-offset:4px}.btn-add-service[_ngcontent-%COMP%]:hover{color:var(--DHALightOrange);text-decoration-thickness:2px}.applicants-list[_ngcontent-%COMP%]{border-radius:12px}.applicants-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;gap:8px;padding-bottom:20px;border-bottom:1px solid var(--DHABackGroundLightGray)}.header-info[_ngcontent-%COMP%]{flex:1;min-width:0}.header-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:18px;margin-bottom:8px;font-weight:600;line-height:1.3;margin-top:0}h6[_ngcontent-%COMP%]{font-size:16px;color:var(--DHATextGray);font-weight:400;margin-bottom:30px;margin-top:10px}.header-description[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:13px;margin:0;line-height:1.5;max-width:400px;font-weight:600}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.action-btn[_ngcontent-%COMP%]{background:var(--DHAOffWhite);border:1px solid var(--DHABackGroundLightGray);color:var(--DHATextGrayDark);padding:10px 16px;border-radius:8px;font-size:12px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;min-width:0;height:44px;white-space:nowrap;justify-content:center;flex:1}.action-btn.std[_ngcontent-%COMP%]{background:var(--DHAWhite);color:var(--DHATextGrayDark);border-color:var(--DHABackGroundLightGray)}.action-btn.std[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHABackGroundLightGray);color:var(--DHATextGrayDark);border-color:var(--DHABackGroundLightGray)}.action-btn.primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);border-color:var(--DHAGreen)}.action-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAHoverGreen);border-color:var(--DHAHoverGreen)}.action-btn.secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHABackGroundLightGray);border-color:var(--DHAGreen);color:var(--DHAGreen)}.action-btn.danger[_ngcontent-%COMP%]{color:var(--DHARed);border-color:var(--DHARed)}.action-btn.danger[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHARed);color:var(--DHAWhite)}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-icon[_ngcontent-%COMP%]{font-size:14px;white-space:nowrap}.btn-text[_ngcontent-%COMP%]{font-size:12px;font-weight:500;white-space:normal}.book-service-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .confirm-booking-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:calc(100vh - 73px);padding:20px;background:linear-gradient(135deg,var(--DHAOffWhite) 0%,#e8f5e8 100%);width:100vw;box-sizing:border-box}.booking-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:8px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:6px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:8px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;padding:8px;background:var(--DHAWhite);border-radius:4px;border:1px solid var(--DHABackGroundLightGray)}.info-label[_ngcontent-%COMP%]{font-weight:600;color:var(--DHATextGrayDark);font-size:10px;text-transform:uppercase;letter-spacing:.2px}.info-value[_ngcontent-%COMP%]{color:var(--DHAGreen);font-weight:600;font-size:11px;word-break:break-word}.services-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.person-services[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:4px;font-size:12px;font-weight:600}.services-summary[_ngcontent-%COMP%]   .services-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.services-summary[_ngcontent-%COMP%]   .service-item[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);padding:3px 6px;border-radius:12px;font-size:10px;font-weight:500}.no-services[_ngcontent-%COMP%]{color:var(--DHATextGray);font-style:italic;font-size:10px}.confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;margin-top:16px;padding-top:12px;border-top:1px solid var(--DHABackGroundLightGray)}.btn-secondary[_ngcontent-%COMP%]{background:var(--DHATextGray);color:var(--DHAWhite);border:none;border-radius:10px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;flex:1}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHATextGrayDark);transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);border:none;border-radius:8px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;flex:1;min-width:150px}.confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;margin-top:40px;padding-top:30px;border-top:2px solid var(--DHABackGroundLightGray)}@media (max-width: 768px){.applicants-header[_ngcontent-%COMP%]{align-items:stretch;gap:8px;padding-bottom:15px}.header-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px}.header-description[_ngcontent-%COMP%]{font-size:14px;max-width:none}.header-actions[_ngcontent-%COMP%]{justify-content:stretch;gap:10px}.applicant-card[_ngcontent-%COMP%]{padding:8px}.applicant-services[_ngcontent-%COMP%]{padding-top:8px}.services-header[_ngcontent-%COMP%]{margin-bottom:6px}.action-btn[_ngcontent-%COMP%]{min-width:0;height:44px}.logo-icon[_ngcontent-%COMP%]{height:32px}.btn-home-top[_ngcontent-%COMP%]{padding:15px 12px;font-size:12px}}@media (max-width: 480px){.action-btn[_ngcontent-%COMP%]{width:100%}}.applicants-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.applicant-card[_ngcontent-%COMP%]{background:var(--DHAWhite);border:1px solid var(--DHABackGroundLightGray);border-radius:10px;padding:8px;transition:all .3s ease}.applicant-card[_ngcontent-%COMP%]:hover{border-color:var(--DHAGreen);box-shadow:0 2px 8px #0166351a}.applicant-card.primary-applicant[_ngcontent-%COMP%]{box-shadow:0 2px 8p xrgba(248,170,24,.36);background:linear-gradient(135deg,var(--DHAOffWhite) 0%,var(--DHAWhite) 100%)}.card-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.registered-applicants[_ngcontent-%COMP%]{border-bottom:1px solid var(--DHABackGroundLightGray);padding-bottom:20px}.applicant-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.applicant-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.applicant-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--DHATextGrayDark)}.applicant-type[_ngcontent-%COMP%]{font-size:11px;color:var(--DHATextGray);font-style:italic;text-transform:capitalize}.remove-applicant-btn[_ngcontent-%COMP%]{background:var(--DHARed);color:var(--DHAWhite);border:none;border-radius:50%;width:24px;height:24px;font-size:14px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.remove-applicant-btn[_ngcontent-%COMP%]:hover{background:var(--DHAMaroon);transform:scale(1.1)}.applicant-services[_ngcontent-%COMP%]{border-top:1px solid var(--DHABackGroundLightGray);padding-top:12px}.services-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.services-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:var(--DHATextGrayDark)}.edit-services-btn[_ngcontent-%COMP%]{background:none;color:var(--DHAOrange);border:none;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:500;cursor:pointer;transition:all .3s ease;text-decoration:underline;text-underline-offset:2px}.edit-services-btn[_ngcontent-%COMP%]:hover{color:var(--DHALightOrange);background:#f3801f1a}.person-services-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.person-services-preview[_ngcontent-%COMP%]   .service-badge[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);padding:4px 8px;border-radius:12px;display:flex;align-items:center;gap:4px;font-size:10px}.person-services-preview[_ngcontent-%COMP%]   .remove-service-btn[_ngcontent-%COMP%]{background:#fff3;color:var(--DHAWhite);border:none;border-radius:50%;width:16px;height:16px;font-size:10px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.person-services-preview[_ngcontent-%COMP%]   .remove-service-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.person-services-preview[_ngcontent-%COMP%]   .no-services[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:11px;font-style:italic}.radio-group[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;padding:8px 12px;border-radius:6px;transition:all .3s ease;border:1px solid transparent}.radio-option[_ngcontent-%COMP%]:hover{background:var(--DHABackGroundLightGray);border-color:var(--DHAGreen)}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;width:16px;height:16px;accent-color:var(--DHAGreen)}.radio-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--DHATextGrayDark)}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.floating-label){display:block;font-weight:600;color:var(--DHATextGrayDark);font-size:14px;margin-bottom:8px}.floating-label-group[_ngcontent-%COMP%]{position:relative;margin-top:10px;margin-bottom:20px}.floating-input[_ngcontent-%COMP%]{width:100%;padding:16px 12px;border:1px solid var(--DHATextGray);border-radius:6px;font-size:16px;transition:all .3s ease;box-sizing:border-box;background:var(--DHAWhite)}.floating-input[_ngcontent-%COMP%]:focus, .floating-input.has-value[_ngcontent-%COMP%]{padding:16px 12px}.floating-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--DHAGreen);box-shadow:0 0 0 3px #0166351a}.floating-label[_ngcontent-%COMP%]{position:absolute;top:16px;left:12px;font-weight:600;color:var(--DHATextGray);font-size:14px;pointer-events:none;transition:all .3s ease;background:var(--DHAWhite);padding:0 4px;z-index:1}.floating-input[_ngcontent-%COMP%]:focus + .floating-label[_ngcontent-%COMP%], .floating-input.has-value[_ngcontent-%COMP%] + .floating-label[_ngcontent-%COMP%]{top:-8px;left:8px;font-size:12px;color:var(--DHAGreen);font-weight:600}.error-message[_ngcontent-%COMP%]{color:var(--DHARed);font-size:12px;margin-top:4px;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{flex:1;padding:15px 30px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:0}.btn-primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAWhite);transform:translateY(-2px);color:var(--DHAGreen);border:1px solid var(--DHAGreen)}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:var(--DHATextGrayDark);color:var(--DHAWhite)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHAOffBlack)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:var(--DHAWhite);border-radius:12px;max-width:500px;width:100%;max-height:calc(var(--vh, 1vh) * 80);display:flex;flex-direction:column;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid var(--DHABackGroundLightGray)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);margin:0;font-size:20px}.modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:var(--DHATextGray);padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .2s}.modal-close[_ngcontent-%COMP%]:hover{background:var(--DHABackGroundLightGray)}.modal-body[_ngcontent-%COMP%]{padding:20px;flex:1;overflow-y:auto;min-height:0}.modal-body.confirmed[_ngcontent-%COMP%]{padding:0;flex:1;overflow-y:auto;min-height:0}.modal-description[_ngcontent-%COMP%]{color:var(--DHATextGray);margin-bottom:20px;font-size:14px}.modal-body[_ngcontent-%COMP%]   .services-list[_ngcontent-%COMP%]{display:grid;gap:15px}.modal-body[_ngcontent-%COMP%]   .service-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:15px;border:1px solid var(--DHABackGroundLightGray);border-radius:8px;transition:all .2s;background:var(--DHAWhite);cursor:pointer}.modal-body[_ngcontent-%COMP%]   .service-item[_ngcontent-%COMP%]:hover{border-color:var(--DHAGreen);background:var(--DHAOffWhite);transform:translateY(-1px);box-shadow:0 2px 8px #0166351a}.modal-body[_ngcontent-%COMP%]   .service-checkbox[_ngcontent-%COMP%]{position:relative;margin-top:2px}.modal-body[_ngcontent-%COMP%]   .service-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute}.modal-body[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid var(--DHATextGray);border-radius:4px;display:block;position:relative;transition:all .2s}.modal-body[_ngcontent-%COMP%]   .service-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background:var(--DHAGreen);border-color:var(--DHAGreen)}.modal-body[_ngcontent-%COMP%]   .service-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--DHAWhite);font-size:12px;font-weight:700}.modal-body[_ngcontent-%COMP%]   .service-details[_ngcontent-%COMP%]{flex:1}.modal-body[_ngcontent-%COMP%]   .service-details[_ngcontent-%COMP%]   .service-name[_ngcontent-%COMP%]{font-weight:600;color:var(--DHAGreen);margin-bottom:4px;font-size:16px}.modal-body[_ngcontent-%COMP%]   .service-details[_ngcontent-%COMP%]   .service-description[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:14px;line-height:1.4}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:15px;padding:20px;border-top:1px solid var(--DHABackGroundLightGray);flex-shrink:0}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{flex:1;padding:15px 30px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:150px}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:var(--DHATextGrayDark);color:var(--DHAWhite)}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHAOffBlack)}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite)}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAWhite);transform:translateY(-2px);color:var(--DHAGreen);border:1px solid var(--DHAGreen)}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding:0}.booking-preview-container[_ngcontent-%COMP%]{box-sizing:border-box}.booking-preview-card[_ngcontent-%COMP%]{padding:20px;min-width:unset;width:100%;overflow-x:hidden;box-sizing:border-box;-webkit-overflow-scrolling:touch;scroll-behavior:smooth}.booking-preview-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.action-buttons[_ngcontent-%COMP%]{gap:10px}.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-height:calc(var(--vh, 1vh) * 80);max-width:90vw}.modal-footer[_ngcontent-%COMP%]{gap:10px}.book-service-container[_ngcontent-%COMP%]   .confirm-booking-card[_ngcontent-%COMP%]{background:var(--DHAWhite);border-radius:8px;padding:12px;box-shadow:0 4px 12px #0000000f;border:1px solid var(--DHABackGroundLightGray);max-width:500px;width:100%;box-sizing:border-box;margin:0 auto}.book-service-container[_ngcontent-%COMP%]   .confirm-booking-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:4px;font-size:16px;font-weight:600;text-align:center}.book-service-container[_ngcontent-%COMP%]   .confirm-description[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);text-align:center;margin-bottom:16px;font-size:12px;line-height:1.3}.book-service-container[_ngcontent-%COMP%]   .booking-section[_ngcontent-%COMP%]{margin-bottom:12px;padding:12px;background:var(--DHAOffWhite);border-radius:6px;border:1px solid var(--DHABackGroundLightGray)}.booking-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:8px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:6px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:8px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;padding:8px;background:var(--DHAWhite);border-radius:4px;border:1px solid var(--DHABackGroundLightGray)}.info-label[_ngcontent-%COMP%]{font-weight:600;color:var(--DHATextGrayDark);font-size:10px;text-transform:uppercase;letter-spacing:.2px}.info-value[_ngcontent-%COMP%]{color:var(--DHAGreen);font-weight:600;font-size:11px;word-break:break-word}.services-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.person-services[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:4px;font-size:12px;font-weight:600}.services-summary[_ngcontent-%COMP%]   .services-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.services-summary[_ngcontent-%COMP%]   .service-item[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite);padding:3px 6px;border-radius:12px;font-size:10px;font-weight:500}.no-services[_ngcontent-%COMP%]{color:var(--DHATextGray);font-style:italic;font-size:10px}.confirm-actions[_ngcontent-%COMP%]{gap:8px;margin-top:16px;padding-top:12px;border-top:1px solid var(--DHABackGroundLightGray)}.btn-secondary[_ngcontent-%COMP%]{background:var(--DHATextGray);color:var(--DHAWhite);border:none;border-radius:10px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;flex:1}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHATextGrayDark);transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--DHAGreen) 0%,#018a3a 100%);color:var(--DHAWhite);border:none;border-radius:10px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;flex:1}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAWhite);color:var(--DHAGreen);border:1px solid var(--DHAGreen);transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed;box-shadow:none}.booking-preview-content-wrapper[_ngcontent-%COMP%]{padding:0 8px;max-width:100%;box-sizing:border-box}.book-service-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .confirm-booking-container[_ngcontent-%COMP%]{padding:16px 12px;min-height:calc(100vh - 120px)}.confirm-booking-card[_ngcontent-%COMP%]{padding:20px;height:600px;overflow-y:auto;-webkit-overflow-scrolling:touch}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.applicant-header[_ngcontent-%COMP%]{margin-bottom:8px}.applicant-services[_ngcontent-%COMP%]{padding-top:8px}.services-header[_ngcontent-ng-c3851277952][_ngcontent-%COMP%]{margin-bottom:6px}.radio-group[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;min-width:0;padding:15px 8px}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{min-width:0}.btn-text[_ngcontent-%COMP%]{font-size:10px}@media (max-width: 480px){.book-service-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .confirm-booking-container[_ngcontent-%COMP%]{padding:8px 6px}}}.booking-success-modal[_ngcontent-%COMP%]{max-width:600px;max-height:80vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{text-align:center;padding:20px 20px 10px;border-bottom:1px solid var(--DHABackGroundLightGray)}.success-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:10px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHAGreen);margin:0;font-size:1.2rem;font-weight:600}.booking-reference-section[_ngcontent-%COMP%]{color:#fff;padding:20px;margin:20px;border-radius:12px;text-align:center;background-color:var(--DHAOffWhite)}.reference-label[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9;margin-bottom:8px;color:var(--DHAOffBlack)}.reference-number-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:8px}.reference-number[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;font-family:Courier New,monospace;letter-spacing:2px;color:var(--DHAOrange);margin:0}.copy-button[_ngcontent-%COMP%]{background:var(--DHAOffWhite);color:var(--DHAOffBlack);border:none;border-radius:8px;padding:8px 12px;cursor:pointer;font-size:1rem;transition:all .2s ease;display:flex;gap:4px;align-items:center;justify-content:center;min-width:40px;height:40px;font-weight:500}.copy-button.copied[_ngcontent-%COMP%]{background:var(--DHAGreen);color:#fff}.copy-button[_ngcontent-%COMP%]:hover{background:var(--DHALightOrangeLight);transform:translateY(-1px);box-shadow:0 4px 8px #0003}.copy-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #0003}.copy-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.reference-note[_ngcontent-%COMP%]{font-size:.8rem;opacity:.8;color:var(--DHATextGray)}.expandable-sections[_ngcontent-%COMP%]{padding:0 20px 20px}.expandable-section[_ngcontent-%COMP%]{border:1px solid var(--DHABackGroundLightGray);border-radius:8px;margin-bottom:12px;overflow:hidden}.section-header[_ngcontent-%COMP%]{background:var(--DHAOffWhite);padding:15px 20px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color .3s ease;border-bottom:1px solid var(--DHABackGroundLightGray)}.section-header[_ngcontent-%COMP%]:hover{background:var(--DHABackGroundLightGray)}.section-title[_ngcontent-%COMP%]{font-weight:600;color:var(--DHAGreen);font-size:1rem}.expand-icon[_ngcontent-%COMP%]{transition:transform .3s ease;color:var(--DHATextGray);font-size:.8rem}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.section-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease}.section-content.expanded[_ngcontent-%COMP%]{max-height:500px}.details-grid[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:1fr 1fr;gap:15px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--DHATextGray);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem;color:var(--DHATextGrayDark);font-weight:500}.applicants-list[_ngcontent-%COMP%]{padding:20px}.applicant-item[_ngcontent-%COMP%]{background:var(--DHAOffWhite);border-radius:8px;padding:15px;margin-bottom:12px;border:1px solid var(--DHABackGroundLightGray)}.applicant-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid var(--DHABackGroundLightGray)}.applicant-name[_ngcontent-%COMP%]{font-weight:600;color:var(--DHAGreen)}.applicant-id[_ngcontent-%COMP%]{font-size:.8rem;color:var(--DHATextGray);font-family:Courier New,monospace}.services-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.service-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:6px 0;gap:8px}.service-name[_ngcontent-%COMP%]{font-size:.9rem;color:var(--DHATextGrayDark);flex:1}.service-price[_ngcontent-%COMP%]{font-weight:600;color:var(--DHAGreen);font-size:.8rem;text-align:right;white-space:nowrap}.summary-details[_ngcontent-%COMP%]{padding:20px}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--DHABackGroundLightGray)}.summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--DHATextGray);font-weight:500}.summary-value[_ngcontent-%COMP%]{font-weight:600;color:var(--DHAGreen);font-size:1rem}.summary-item.total-amount[_ngcontent-%COMP%]{border-top:2px solid var(--DHAGreen);margin-top:12px;padding-top:12px;font-size:1.1rem}.service-breakdown[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid var(--DHABackGroundLightGray)}.breakdown-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--DHAGreen);margin-bottom:12px}.person-breakdown[_ngcontent-%COMP%]{margin-bottom:12px;padding:8px 0}.person-name[_ngcontent-%COMP%]{font-weight:600;color:var(--DHATextGrayDark);margin-bottom:6px;font-size:.9rem}.person-services[_ngcontent-%COMP%]{margin-left:12px}.service-breakdown-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:4px 0;font-size:.85rem;gap:8px}.service-breakdown-item[_ngcontent-%COMP%]   .service-name[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);flex:1}.service-breakdown-item[_ngcontent-%COMP%]   .service-price[_ngcontent-%COMP%]{font-weight:600;color:var(--DHAGreen);text-align:right;font-size:.8rem;white-space:nowrap}.modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid var(--DHABackGroundLightGray);text-align:center}@media (max-width: 768px){.booking-success-modal[_ngcontent-%COMP%]{max-width:95vw;margin:10px}.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.reference-number-container[_ngcontent-%COMP%]{gap:8px}.reference-number[_ngcontent-%COMP%]{font-size:1.4rem}.copy-button[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:6px 10px}.copy-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.applicant-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}}@media (max-width: 480px){.reference-number-container[_ngcontent-%COMP%]{gap:6px}.reference-number[_ngcontent-%COMP%]{font-size:1rem}.copy-button[_ngcontent-%COMP%]{min-width:32px;height:32px;padding:4px 8px}.copy-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}}']})};export{je as BookServiceComponent};
