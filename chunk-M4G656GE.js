import{a as V}from"./chunk-KTRVXKLR.js";import{a as N}from"./chunk-O455IOFO.js";import{a as B}from"./chunk-547XFIIC.js";import{a as k,b as O,c as w,d as G,f as I,h as T,i as E,n as F,p as z}from"./chunk-2QYUIGVR.js";import"./chunk-ZI7LECHX.js";import{$a as S,Fa as i,Ga as y,H as v,I as x,Ia as M,Z as l,a as f,aa as b,ab as A,b as D,ea as P,eb as H,ia as _,ma as p,oa as C,ta as e,ua as t,va as m,wa as h,xa as g,ya as d}from"./chunk-EJPCYNLR.js";function L(s,r){s&1&&(e(0,"div",20),m(1,"span",21),i(2," Forenames are required "),t())}function Y(s,r){s&1&&(e(0,"div",20),m(1,"span",21),i(2," Last name is required "),t())}function R(s,r){if(s&1){let n=h();e(0,"div",6)(1,"h2"),i(2,"Verify Personal Information"),t(),e(3,"p",7),i(4," Please enter your personal details, we will verify them against DHA records "),t(),e(5,"form",8),g("ngSubmit",function(){v(n);let a=d();return x(a.onVerificationSubmit())}),e(6,"div",9)(7,"div",10)(8,"small"),i(9,"ID number from previous step"),t()(),m(10,"input",11),t(),e(11,"div",9),m(12,"input",12),e(13,"label",13),i(14,"Forenames *"),t(),_(15,L,3,0,"div",14),t(),e(16,"div",9),m(17,"input",15),e(18,"label",16),i(19,"Last Name *"),t(),_(20,Y,3,0,"div",14),t(),e(21,"div",17)(22,"button",18),g("click",function(){v(n);let a=d();return x(a.showSignOutConfirmation())}),i(23," \u2190 Sign Out "),t(),e(24,"button",19),i(25," Verify "),t()()()()}if(s&2){let n,o,a,u,c=d();l(5),p("formGroup",c.verificationForm),l(5),p("value",(c.authData==null?null:c.authData.idNumber)||""),l(2),C("has-value",(n=c.verificationForm.get("forenames"))==null?null:n.value),l(3),p("ngIf",((o=c.verificationForm.get("forenames"))==null?null:o.invalid)&&((o=c.verificationForm.get("forenames"))==null?null:o.touched)),l(2),C("has-value",(a=c.verificationForm.get("lastName"))==null?null:a.value),l(3),p("ngIf",((u=c.verificationForm.get("lastName"))==null?null:u.invalid)&&((u=c.verificationForm.get("lastName"))==null?null:u.touched)),l(4),p("disabled",c.verificationForm.invalid)}}function j(s,r){if(s&1){let n=h();e(0,"div",6)(1,"div",22)(2,"h2"),i(3,"Verification Successful!"),t(),e(4,"p",23),i(5," Your personal details have been successfully verified against DHA records. "),t()(),e(6,"div",24)(7,"h3"),i(8,"Verified Details"),t(),e(9,"div",25)(10,"div",26)(11,"label"),i(12,"ID Number:"),t(),e(13,"span",27),i(14),t()(),e(15,"div",26)(16,"label"),i(17,"Full Name:"),t(),e(18,"span",27),i(19),t()()()(),e(20,"div",17)(21,"button",28),g("click",function(){v(n);let a=d();return x(a.proceedToContact())}),i(22," Continue "),t()()()}if(s&2){let n,o=d();l(14),y(o.authData==null?null:o.authData.idNumber),l(5),M("",(n=o.verificationForm.get("forenames"))==null?null:n.value," ",(n=o.verificationForm.get("lastName"))==null?null:n.value,"")}}var W=class s{constructor(r,n,o){this.fb=r;this.router=n;this.bookingService=o;this.verificationForm=this.fb.group({forenames:["",O.required],lastName:["",O.required]})}verificationForm;authData;currentStep=1;stepTitles=["Sign In","Personal Info","Contact Info","Book Service"];showSignOutModal=!1;capitaliseWords(r){return r?r.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):""}ngOnInit(){let r=sessionStorage.getItem("authData");r?this.authData=JSON.parse(r):this.router.navigate(["/authenticate"]),window.scrollTo(0,0),["forenames","lastName"].forEach(n=>{this.verificationForm.get(n)?.valueChanges.subscribe(o=>{if(o){let a=this.capitaliseWords(o);o!==a&&this.verificationForm.get(n)?.setValue(a,{emitEvent:!1})}})})}onVerificationSubmit(){if(this.verificationForm.valid){let r=D(f({},this.verificationForm.value),{forenames:this.capitaliseWords(this.verificationForm.value.forenames),lastName:this.capitaliseWords(this.verificationForm.value.lastName)}),n=f(f({},this.authData),r);console.log(n),sessionStorage.setItem("verificationData",JSON.stringify(n)),this.currentStep=2}}proceedToContact(){this.router.navigate(["/contact-info"])}goBackToVerification(){this.currentStep=1}goBack(){this.currentStep===1?this.router.navigate(["/authenticate"]):this.currentStep===2&&this.goBackToVerification()}getProgressStep(){return this.currentStep===1||this.currentStep===2?1:this.currentStep===3?2:1}showSignOutConfirmation(){this.showSignOutModal=!0}closeSignOutModal(){this.showSignOutModal=!1}confirmSignOut(){this.bookingService.clearAllData(),this.showSignOutModal=!1,this.router.navigate(["/authenticate"])}static \u0275fac=function(n){return new(n||s)(b(F),b(H),b(V))};static \u0275cmp=P({type:s,selectors:[["app-personal-info"]],decls:22,vars:8,consts:[[3,"currentStep","steps"],["class","step-section",4,"ngIf"],["title","Confirm Sign Out","cancelText","Cancel","confirmText","Sign Out",3,"modalClosed","cancelClicked","confirmClicked","isOpen","closeOnOverlayClick","closeOnEscape","confirmDisabled"],[1,"sign-out-content"],[1,"warning-icon"],[1,"sign-out-details"],[1,"step-section"],[1,"step-description"],["autocomplete","on",3,"ngSubmit","formGroup"],[1,"form-group","floating-label-group"],[1,"field-info"],["type","text","id","idNumber","disabled","","readonly","",1,"floating-input","has-value",3,"value"],["type","text","id","forenames","formControlName","forenames","autocomplete","given-name",1,"floating-input"],["for","forenames",1,"floating-label"],["class","error-message",4,"ngIf"],["type","text","id","lastName","formControlName","lastName","autocomplete","family-name",1,"floating-input"],["for","lastName",1,"floating-label"],[1,"button-group"],["type","button",1,"btn-sign-out",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"success-message"],[1,"success-description"],[1,"verified-details-preview"],[1,"details-grid"],[1,"detail-item"],[1,"detail-value"],["type","button",1,"btn-primary",3,"click"]],template:function(n,o){n&1&&(e(0,"app-form-page-layout",0),_(1,R,26,9,"div",1)(2,j,23,3,"div",1),t(),e(3,"app-ios-modal",2),g("modalClosed",function(){return o.closeSignOutModal()})("cancelClicked",function(){return o.closeSignOutModal()})("confirmClicked",function(){return o.confirmSignOut()}),e(4,"div",3)(5,"div",4),i(6,"\u26A0\uFE0F"),t(),e(7,"h3"),i(8,"Are you sure you want to sign out?"),t(),e(9,"p"),i(10," This will clear all your session data and you'll need to authenticate again. "),t(),e(11,"div",5)(12,"p")(13,"strong"),i(14,"This will:"),t()(),e(15,"ul")(16,"li"),i(17,"Clear your personal information"),t(),e(18,"li"),i(19,"Remove any saved appointments"),t(),e(20,"li"),i(21,"Sign you out of the system"),t()()()()()),n&2&&(p("currentStep",o.getProgressStep())("steps",o.stepTitles),l(),p("ngIf",o.currentStep===1),l(),p("ngIf",o.currentStep===2),l(),p("isOpen",o.showSignOutModal)("closeOnOverlayClick",!0)("closeOnEscape",!0)("confirmDisabled",!1))},dependencies:[A,S,z,I,k,w,G,T,E,N,B],styles:["[_nghost-%COMP%]{--DHAGreen: #016635;--DHAOrange: #f3801f;--DHALightOrange: #f8ab18;--DHARed: #ea2127;--DHABrown: #9e5c26;--DHAApache: #ddc16a;--DHALaser: #caac6c;--DHAMaroon: #711d12;--DHAWhite: #ffffff;--DHAOffWhite: #fbfbfb;--DHABlack: #000000;--DHAOffBlack: rgb(51, 51, 51);--DHATextGray: #949494;--DHATextGrayDark: #5a5a5a;--DHAErrorColor: #ea2127;--DHADisabledButtonGray: #e6e6e6;--DHABackGroundLightGray: #f4f4f4;--DividerGray: #949494;--DHADisabledTextGray: #c4c4c4}*[_ngcontent-%COMP%]{box-sizing:border-box}h2[_ngcontent-%COMP%]{text-align:center;color:var(--DHAGreen);margin-bottom:30px;font-size:2rem;font-weight:600;margin-top:0}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.floating-label-group[_ngcontent-%COMP%]{position:relative;margin-top:10px;margin-bottom:20px}.floating-input[_ngcontent-%COMP%]{width:100%;padding:16px 12px;border:1px solid var(--DividerGray);border-radius:6px;font-size:16px;transition:all .3s ease;box-sizing:border-box;background:var(--DHAWhite)}.floating-input[_ngcontent-%COMP%]:focus{padding:8px 12px}.floating-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--DHAGreen);box-shadow:0 0 0 3px #0166351a}.floating-input[_ngcontent-%COMP%]:disabled{background-color:var(--DHABackGroundLightGray);cursor:not-allowed;color:var(--DHADisabledTextGray);border-color:var(--DividerGray)}.floating-label[_ngcontent-%COMP%]{position:absolute;top:16px;left:12px;font-weight:600;color:var(--DHATextGray);font-size:16px;pointer-events:none;transition:all .3s ease;background:var(--DHAWhite);padding:0 4px;z-index:1}.floating-input[_ngcontent-%COMP%]:focus + .floating-label[_ngcontent-%COMP%], .floating-input.has-value[_ngcontent-%COMP%] + .floating-label[_ngcontent-%COMP%]{top:-8px;left:8px;font-size:12px;color:var(--DHAGreen);font-weight:600}label[_ngcontent-%COMP%]:not(.floating-label){display:block;margin-bottom:8px;font-weight:600;color:var(--DHATextGrayDark)}.form-control[_ngcontent-%COMP%]:not(.floating-input){width:100%;padding:12px;border:1px solid var(--DividerGray);border-radius:6px;font-size:16px;transition:border-color .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:not(.floating-input):focus{outline:none;border-color:var(--DHAGreen);box-sizing:border-box}.form-control[_ngcontent-%COMP%]:not(.floating-input):disabled{background-color:var(--DHABackGroundLightGray);cursor:not-allowed;color:var(--DHADisabledTextGray);border-color:var(--DividerGray);box-sizing:border-box}.floating-input[_ngcontent-%COMP%]:focus, .floating-input.has-value[_ngcontent-%COMP%]{padding:16px 12px}.error-message[_ngcontent-%COMP%]{color:var(--DHAErrorColor);font-size:14px;margin-top:5px}.field-info[_ngcontent-%COMP%]{margin-top:5px}.field-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:12px;font-style:italic}.step-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.step-description[_ngcontent-%COMP%]{color:var(--DHATextGray);font-size:16px;margin-bottom:30px;line-height:1.5}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.success-message[_ngcontent-%COMP%]{text-align:center;margin:0 0 30px;padding:20px;background:linear-gradient(135deg,#e8f5e8,#f0f8f0);border-radius:12px;border:2px solid var(--DHAGreen)}.success-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px;animation:_ngcontent-%COMP%_bounce .6s ease-in-out}.success-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--DHAGreen);margin-bottom:10px;font-size:24px}.success-description[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:16px;margin:0;line-height:1.5}.verified-details-preview[_ngcontent-%COMP%]{background:var(--DHAOffWhite);border:1px solid var(--DHABackGroundLightGray);border-radius:8px;padding:20px;margin-bottom:30px}.verified-details-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);margin-bottom:15px;font-size:18px;font-weight:600}.details-grid[_ngcontent-%COMP%]{display:grid;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid var(--DHABackGroundLightGray)}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--DHATextGrayDark);font-size:14px}.detail-value[_ngcontent-%COMP%]{color:var(--DHAGreen);font-weight:500;font-size:14px;text-align:right;overflow-wrap:break-word}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.button-group[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:30px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{flex:1;padding:15px 30px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:150px}.btn-primary[_ngcontent-%COMP%]{background:var(--DHAGreen);color:var(--DHAWhite)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--DHAWhite);transform:translateY(-2px);color:var(--DHAGreen);border:1px solid var(--DHAGreen)}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--DHADisabledButtonGray);color:var(--DHADisabledTextGray);cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:var(--DHATextGrayDark);color:var(--DHAWhite)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--DHAOffBlack)}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding:15px}input[_ngcontent-%COMP%]{font-size:14px}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-control[_ngcontent-%COMP%]{padding:10px;font-size:16px}.button-group[_ngcontent-%COMP%]{gap:10px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:12px;min-width:0}}.btn-sign-out[_ngcontent-%COMP%]{background:#e74c3c;color:var(--DHAWhite);border:none;border-radius:8px;padding:12px 30px;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease}.btn-sign-out[_ngcontent-%COMP%]:hover{background:#c0392b;transform:translateY(-2px);box-shadow:0 8px 25px #e74c3c4d}.sign-out-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.warning-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:20px}.sign-out-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--DHAGreen);font-size:1.5rem;margin-bottom:15px;font-weight:600}.sign-out-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--DHATextGrayDark);font-size:1rem;line-height:1.5;margin-bottom:20px}.sign-out-details[_ngcontent-%COMP%]{background:var(--DHAOffWhite);border-radius:8px;padding:15px;margin-top:20px;text-align:left}.sign-out-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:600;color:var(--DHAGreen)}.sign-out-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px;color:var(--DHATextGrayDark)}.sign-out-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;font-size:.9rem}"]})};export{W as PersonalInfoComponent};
