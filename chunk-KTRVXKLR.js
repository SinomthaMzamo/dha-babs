import{d as r,f as s,y as l}from"./chunk-EJPCYNLR.js";var u=class o{authDataSubject=new s(null);personalDataSubject=new s(null);bookingDataSubject=new s(null);authData$=this.authDataSubject.asObservable();personalData$=this.personalDataSubject.asObservable();bookingData$=this.bookingDataSubject.asObservable();constructor(){this.loadFromSessionStorage()}setAuthData(t){this.authDataSubject.next(t),sessionStorage.setItem("authData",JSON.stringify(t))}getAuthData(){return this.authDataSubject.value}setPersonalData(t){this.personalDataSubject.next(t),sessionStorage.setItem("personalData",JSON.stringify(t))}getPersonalData(){return this.personalDataSubject.value}setBookingData(t){this.bookingDataSubject.next(t),sessionStorage.setItem("bookingData",JSON.stringify(t))}getBookingData(){return this.bookingDataSubject.value}validateIdNumber(t){return!t||t.length!==13||!/^\d{13}$/.test(t)?!1:this.validateLuhn(t)}validatePhoneNumber(t){return/^(\+27|0)[6-8][0-9]{8}$/.test(t)}validateEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}clearAllData(){this.authDataSubject.next(null),this.personalDataSubject.next(null),this.bookingDataSubject.next(null),sessionStorage.clear()}loadFromSessionStorage(){let t=sessionStorage.getItem("authData"),a=sessionStorage.getItem("personalData"),e=sessionStorage.getItem("bookingData");t&&this.authDataSubject.next(JSON.parse(t)),a&&this.personalDataSubject.next(JSON.parse(a)),e&&this.bookingDataSubject.next(JSON.parse(e))}validateLuhn(t){let a=0,e=!1;for(let i=t.length-1;i>=0;i--){let n=parseInt(t.charAt(i));e&&(n*=2,n>9&&(n-=9)),a+=n,e=!e}return a%10===0}submitBooking(t){return new r(a=>{setTimeout(()=>{let e={success:!0,bookingId:"DHA-"+Date.now(),message:"Booking submitted successfully",data:t};a.next(e),a.complete()},2e3)})}static \u0275fac=function(a){return new(a||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{u as a};
